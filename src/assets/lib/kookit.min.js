import e from"underscore";import t from"rangy/lib/rangy-core.js";import"rangy/lib/rangy-textrange";import i from"jszip";import{unzlibSync as r}from"fflate";import n from"chardet";import o from"js-untar";import s from"mammoth";import{marked as a}from"marked";import l from"mhtml2html";function c(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}const h=e=>e?parseFloat(e+""):0,d=(e,t)=>c(void 0,void 0,void 0,(function*(){let i="";if(e&&e.load){let t=yield fetch(yield e.load()).then((e=>e.blob()));i=yield t.text()}return t||(e&&e.loadAsset&&(i=yield f(i,e.loadAsset)),i=p(i)),i})),u=e=>Array.from(e.querySelectorAll("img, image")),f=(e,t)=>c(void 0,void 0,void 0,(function*(){let i=(new DOMParser).parseFromString(e,"text/html"),r=u(i);for(let e=0;e<r.length;e++)r[e].getAttribute("src")?r[e].src=yield t(r[e].getAttribute("src")):r[e].getAttribute("xlink:href")&&r[e].setAttribute("xlink:href",yield t(r[e].getAttribute("xlink:href")));let n=Array.from(i.getElementsByTagName("link"));for(let e=0;e<n.length;e++){const i=n[e];i.getAttribute("href")&&(i.href=yield t(i.getAttribute("href")))}return i.documentElement.innerHTML})),p=e=>{let t=(new DOMParser).parseFromString(e,"text/html"),i=u(t);if(0===i.length)return e;for(let e=0;e<i.length;e++){if("image"===i[e].tagName)continue;var r=document.createElement("kookitmarker"),n=document.createTextNode("img");r.appendChild(n),r.setAttribute("style","visibility: hidden; position: absolute;display: inline-block; width: 0; height: 0;");let o=i[e];for(;o.parentElement&&o.parentElement!==t.body;)o=o.parentElement;o.parentElement===t.body?o.insertAdjacentElement("afterend",r):t.body.appendChild(r)}return t.documentElement.innerHTML},g=(e,t)=>{var i=document.createElement("iframe");i.style.width=t?100*(t-.4)+"%":"100%",i.style.margin="0",i.style.border="0",i.style.padding="0",i.style.minHeight="calc(100% - 2px)",i.style.fontSize="100%",i.style.font="inherit",i.scrolling="no",i.tabIndex=0,i.id="kookit-iframe",i.style.verticalAlign="baseline",e.innerHTML="",e.appendChild(i),t&&(e.scrollLeft=e.scrollWidth/2-e.clientWidth/2)},m=(e,t,i)=>{let r=Math.floor(i.clientWidth/12),n=r%2==0?r:r-1;return{totalPage:"scroll"===e?Math.floor(i.scrollHeight/(i.clientHeight-50)):"single"===e?Math.round(parseFloat(t.body.scrollWidth/(t.body.clientWidth+n)+"")):2*Math.round(parseFloat(t.body.scrollWidth/(t.body.clientWidth+n)+"")),currentPage:"scroll"===e?Math.floor(i.scrollTop/(i.clientHeight-50))+1:Math.round(parseFloat(h(t.body.scrollLeft)/(t.body.clientWidth+n)+""))+1}},y=e=>{var t;let i=e.querySelectorAll("a, article, cite, div, li, p, span, pre, dt, dd, table, bold, font");for(let e=0;e<i.length;e++){const r=i[e];-1===r.className.indexOf("kookit-text")&&"RT"!==(null===(t=r.parentElement)||void 0===t?void 0:t.tagName)&&(r.className=r.className+" kookit-text")}let r=e.querySelectorAll("h1, h2, h3, h4, h5, h6, title");for(let e=0;e<r.length;e++){const t=r[e];-1===t.className.indexOf("kookit-title")&&(t.className="kookit-title "+t.className)}},b=e=>c(void 0,void 0,void 0,(function*(){const t=new Image;t.src=e;try{yield t.decode()}catch(e){console.error(e)}return t})),v=(e,t,i,r)=>c(void 0,void 0,void 0,(function*(){var n,o;let s=Math.floor(e.clientWidth/12),a=s%2==0?s:s-1;e.clientWidth;let l=r.querySelectorAll("img, image");for(let s of l){let l=s.parentElement,c=0,h=0,d=s.naturalWidth,u=s.naturalHeight;if("image"===s.tagName){let e=yield b(s.getAttribute("xlink:href"));d=e.naturalWidth,u=e.naturalHeight}if(i.startsWith("CB")&&"scroll"===t)h=l.offsetWidth;else if(i.startsWith("CB")&&"single"===t)c=e.clientHeight,h=e.clientWidth;else if(l&&d&&u&&l.clientHeight&&l.clientWidth){u/d>l.clientHeight/l.clientWidth?(c=l.clientHeight,h=parseInt(c*d/u+"")):(h=l.clientWidth,c=parseInt(h*u/d+"")),c>r.body.clientHeight&&"scroll"!==t&&(h=parseInt(h*(r.body.clientHeight/c)+""),c=r.body.clientHeight),l.style.textIndent="0px"}else l&&l.clientWidth&&l.clientWidth>0?(h=l.clientWidth,c=l.clientHeight,l.style.textIndent="0px"):(h=e.clientWidth,c=e.clientHeight);h=h?Math.min("scroll"===t||"single"===t?e.clientWidth:(e.clientWidth-a)/2,h):"scroll"===t||"single"===t?e.clientWidth:(e.clientWidth-a)/2,d&&u&&(d>u||c/h>u/d?c=h*(u/d):h=c*(d/u)),(h||c)&&s.setAttribute("style",(s.getAttribute("style")?s.getAttribute("style"):"")+";"+`max-width: ${h>0?h+"px":""};max-height:${c>0?c+"px":""}; margin: 0 auto; min-width: 0px; min-height: 0px; ${i.startsWith("CB")?`margin-left: calc(100% - ${s.clientWidth}px);`:""}`),"image"===s.tagName&&(null===(n=s.parentElement)||void 0===n||n.setAttribute("width",h),null===(o=s.parentElement)||void 0===o||o.setAttribute("height",c)),i.startsWith("CB")&&"scroll"===t&&s.setAttribute("style",(s.getAttribute("style")?s.getAttribute("style"):"")+";margin-left: 0px; width: 100%;"),i.startsWith("CB")&&"scroll"!==t&&s.setAttribute("style",(s.getAttribute("style")?s.getAttribute("style"):"")+`;margin-left: calc(50% - ${s.getBoundingClientRect().width/2}px);`)}})),w=(e,t,i)=>{let r=i.createElement("style");if(r.id="default-style",r.textContent="p,empty-line{display: inherit;margin-block-start: inherit;margin-block-end: inherit;margin-inline-start: inherit;margin-inline-end: inherit;}body{margin: 0px}",i.head.appendChild(r),"scroll"===t)return;let n="double"===t?2:1,o=Math.floor(e.clientWidth/12),s=o%2==0?o:o-1;i.body.setAttribute("style",`width: ${e.clientWidth+"px"};height: 100%;overflow-y: hidden;overflow-X: hidden;padding-left: 0px;padding-right: 0px;margin: 0px;box-sizing: border-box;touch-action:none; overscroll-behavior: none;max-width: inherit;column-fill: auto;column-gap: ${s}px; column-width: ${(e.clientWidth-s)/n}px;`)};function x(e){const t=e.getSelection();if(!t)return null;if(t.rangeCount>0){return t.getRangeAt(0).startContainer.parentElement}return null}const C=e=>"string"==typeof e||e instanceof String;class T{constructor(e){this.book=e,this.chapterList=[],this.flattenChapters=[],this.chapterDocList=[]}unescapeHtml(e){if(!e)return"";return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent||""}getChapter(e){return c(this,void 0,void 0,(function*(){return this.chapterList=e?yield Promise.all(e.map(((e,t)=>c(this,void 0,void 0,(function*(){let i=t;try{i=e.href&&(yield this.book.resolveHref(e.href))?(yield this.book.resolveHref(e.href)).index:i}catch(e){console.error(e)}return{label:this.unescapeHtml(e.label)?this.unescapeHtml(e.label):i+"",href:e.href?e.href:"title"+i,index:i,subitems:e.subitems?yield this.getChapter(e.subitems):[]}}))))):yield Promise.all(this.book.sections.map(((e,t)=>c(this,void 0,void 0,(function*(){return{label:this.unescapeHtml(e.label)?this.unescapeHtml(e.label):t+"",href:e.href?e.href:"title"+t,index:t,subitems:e.subitems?yield this.getChapter(e.subitems):[]}}))))),this.flattenChapters=this.flatChapter(this.chapterList),this.chapterList}))}getChapterDoc(){return c(this,void 0,void 0,(function*(){const e=this.flattenChapters.map((e=>e.index));return this.book.sections.map(((t,i)=>e.indexOf(i)>-1?{label:this.unescapeHtml(this.flattenChapters[e.indexOf(i)].label),href:this.flattenChapters[e.indexOf(i)].href,text:t}:{label:"",href:"",text:t}))}))}flatChapter(e){let t=[];for(let i=0;i<e.length;i++)e[i].subitems&&e[i].subitems.length>0?(t.push(e[i]),t=t.concat(this.flatChapter(e[i].subitems))):t.push(e[i]);return t}getMetadata(){return new Promise(((e,t)=>c(this,void 0,void 0,(function*(){const i=this.book.metadata;let r=i.author&&i.author[0]&&i.author[0].name&&C(i.author[0].name)?i.author[0].name:i.author&&i.author[0]&&C(i.author[0])?i.author[0]:i.author&&C(i.author)?i.author:"";try{const t=yield this.book.getCover();var n=new FileReader;n.readAsDataURL(t),n.onloadend=()=>{e(Object.assign(Object.assign({},i),{name:i.title,author:r,description:i.description,publisher:i.publisher,cover:n.result}))}}catch(n){console.error(n);try{e(Object.assign(Object.assign({},i),{name:i.title,author:r,description:i.description,publisher:i.publisher,cover:""}))}catch(e){console.error(e),t(e)}}}))))}}const L=(e,t)=>[-1,...t,e.length].reduce((({xs:t,a:i},r)=>({xs:t?.concat([e.slice(i+1,r)])??[],a:r})),{}).xs,M=/\d/,S=/^epubcfi\((.*)\)$/,D=e=>e.replace(/[\^[\](),;=]/g,"^$&"),k=(e,t)=>{return i=([e])=>e===t,e.map(((e,t,r)=>i(e,t,r)?t:null)).filter((e=>null!=e));var i},A=e=>{const t=[];let i;for(const[r,n]of e){if("/"===r)t.push({index:n});else{const e=t[t.length-1];if(":"===r)e.offset=n;else if("~"===r)e.temporal=n;else if("@"===r)e.spatial=(e.spatial??[]).concat(n);else if(";s"===r)e.side=n;else if("["===r){if("/"!==i||!n){e.text=(e.text??[]).concat(n);continue}e.id=n}}i=r}return t},E=e=>L(e,k(e,"!")).map(A),I=e=>{const t=(e=>{const t=[];let i,r,n="";const o=e=>(t.push(e),i=null,n=""),s=e=>(n+=e,r=!1);for(const t of Array.from(e.trim()).concat(""))if("^"!==t||r){if("!"===i)o(["!"]);else if(","===i)o([","]);else if("/"===i||":"===i){if(M.test(t)){s(t);continue}o([i,parseInt(n)])}else if("~"===i){if(M.test(t)||"."===t){s(t);continue}o(["~",parseFloat(n)])}else if("@"===i){if(":"===t){o(["@",parseFloat(n)]),i="@";continue}if(M.test(t)||"."===t){s(t);continue}o(["@",parseFloat(n)])}else{if("["===i){";"!==t||r?","!==t||r?"]"!==t||r?s(t):o(["[",n]):(o(["[",n]),i="["):(o(["[",n]),i=";");continue}if(i?.startsWith(";")){"="!==t||r?";"!==t||r?"]"!==t||r?s(t):o([i,n]):(o([i,n]),i=";"):(i=`;${n}`,n="");continue}}"/"!==t&&":"!==t&&"~"!==t&&"@"!==t&&"["!==t&&"!"!==t&&","!==t||(i=t)}else r=!0;return t})((i=e,i.match(S)?.[1]??i));var i;const r=k(t,",");if(!r.length)return E(t);const[n,o,s]=L(t,r).map(E);return{parent:n,start:o,end:s}},N=({index:e,id:t,offset:i,temporal:r,spatial:n,text:o,side:s})=>{const a=s?`;s=${s}`:"";return`/${e}`+(t?`[${D(t)}${a}]`:"")+(null!=i&&e%2?`:${i}`:"")+(r?`~${r}`:"")+(n?`@${n.join(":")}`:"")+(o||!t&&s?"["+(o?.map(D)?.join(",")??"")+a+"]":"")},R=e=>e.parent?[e.parent,e.start,e.end].map(R).join(","):e.map((e=>e.map(N).join(""))).join("!"),P=e=>{return t=R(e),S.test(t)?t:`epubcfi(${t})`;var t},O=(e,t)=>{return"string"==typeof e?P(O(I(e),t)):e.parent?(i=e.parent,r=e[t?"end":"start"],i.slice(0,-1).concat([i[i.length-1].concat(r[0])]).concat(r.slice(1))):e;var i,r},B=({nodeType:e})=>3===e||4===e,F=({nodeType:e})=>1===e,H=e=>{const t=Array.from(e.childNodes).filter((e=>B(e)||F(e))).reduce(((e,t)=>{let i=e[e.length-1];return i?B(t)?Array.isArray(i)?i.push(t):B(i)?e[e.length-1]=[i,t]:e.push(t):F(i)?e.push(null,t):e.push(t):e.push(t),e}),[]);return F(t[0])&&t.unshift("first"),F(t[t.length-1])&&t.push("last"),t.unshift("before"),t.push("after"),t},j=(e,t)=>e?H(e)[t]:null,W=(e,t)=>{const{id:i}=t[t.length-1];if(i){const t=e.ownerDocument.getElementById(i);if(t)return{node:t,offset:0}}for(const{index:i}of t){const t=j(e,i);if("first"===t)return{node:e.firstChild??e};if("last"===t)return{node:e.lastChild??e};if("before"===t)return{node:e,before:!0};if("after"===t)return{node:e,after:!0};e=t}const{offset:r}=t[t.length-1];if(!Array.isArray(e))return{node:e,offset:r};let n=0;for(const t of e){const{length:e}=t.nodeValue;if(n+e>=r)return{node:t,offset:r-n};n+=e}},$=(e,t)=>{const{parentNode:i,id:r}=e,n=H(i),o=n.findIndex((t=>Array.isArray(t)?t.some((t=>t===e)):t===e)),s=n[o];if(Array.isArray(s)){let i=0;for(const r of s){if(r===e){i+=t;break}i+=r.nodeValue.length}t=i}const a={id:r,index:o,offset:t};return i!==e.ownerDocument.documentElement?$(i).concat(a):[a]},U=(e,t)=>W(e.documentElement,O(t)).node,q="urn:oasis:names:tc:opendocument:xmlns:container",z="http://www.w3.org/1999/xhtml",V="http://www.idpf.org/2007/opf",X="http://www.idpf.org/2007/ops",J="http://purl.org/dc/elements/1.1/",G="http://www.w3.org/2001/04/xmlenc#",_="http://www.daisy.org/z3986/2005/ncx/",Y="http://www.w3.org/1999/xlink",Z="http://www.w3.org/ns/SMIL",K={XML:"application/xml",NCX:"application/x-dtbncx+xml",XHTML:"application/xhtml+xml",HTML:"text/html",CSS:"text/css",SVG:"image/svg+xml",JS:/\/(x-)?(javascript|ecmascript)/},Q=e=>e.toLowerCase().replace(/[-:](.)/g,((e,t)=>t.toUpperCase())),ee=(e,t,i)=>i?i=>i.getAttribute(e)?.split(/\s/)?.includes(t):"function"==typeof t?i=>t(i.getAttribute(e)):i=>i.getAttribute(e)===t,te=(...e)=>t=>t?Object.fromEntries(e.map((e=>[Q(e),t.getAttribute(e)]))):null,ie=e=>{return t=e?.textContent,t?t.trim().replace(/\s{2,}/g," "):"";var t},re=(e,t)=>{const i=e.lookupNamespaceURI(null)===t||e.lookupPrefix(t),r=i?(e,i)=>e=>e.namespaceURI===t&&e.localName===i:(e,t)=>e=>e.localName===t;return{$:(e,t)=>[...e.children].find(r(e,t)),$$:(e,t)=>[...e.children].filter(r(e,t)),$$$:i?(e,i)=>[...e.getElementsByTagNameNS(t,i)]:(e,i)=>[...e.getElementsByTagName(t,i)]}},ne=(e,t)=>{try{const i="whatever://whatever/";return decodeURI(new URL(e,i+t).href.replace(i,""))}catch(t){return console.warn(t),e}},oe=e=>/^(?!blob)\w+:/i.test(e),se=async(e,t,i)=>{const r=[];e.replace(t,((...e)=>(r.push(e),null)));const n=[];for(const e of r)n.push(await i(...e));return e.replace(t,(()=>n.shift()))},ae=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),le={attrs:["dir","xml:lang"]},ce={name:"alternate-script",many:!0,...le,props:["file-as"]},he={many:!0,...le,props:[{name:"role",many:!0,attrs:["scheme"]},"file-as",ce]},de=[{name:"title",many:!0,...le,props:["title-type","display-seq","file-as",ce]},{name:"identifier",many:!0,props:[{name:"identifier-type",attrs:["scheme"]}]},{name:"language",many:!0},{name:"creator",...he},{name:"contributor",...he},{name:"publisher",...le,props:["file-as",ce]},{name:"description",...le,props:[ce]},{name:"rights",...le,props:[ce]},{name:"date"},{name:"dcterms:modified",type:"meta"},{name:"subject",many:!0,...le,props:["term","authority",ce]},{name:"belongs-to-collection",type:"meta",many:!0,...le,props:["collection-type","group-position","dcterms:identifier","file-as",ce,{name:"belongs-to-collection",recursive:!0}]}],ue=(e,t=e=>e)=>{const{$:i,$$:r,$$$:n}=re(e,z),o=e=>r=>{const n=i(r,"a")??i(r,"span"),o=i(r,"ol"),a=(e=>e?decodeURI(t(e)):null)(n?.getAttribute("href")),l={label:ie(n)||n?.getAttribute("title"),href:a,subitems:s(o)};return e&&(l.type=n?.getAttributeNS(X,"type")?.split(/\s/)),l},s=(e,t)=>e?r(e,"li").map(o(t)):null,a=(e,t)=>s(i(e,"ol"),t),l=n(e,"nav");let c=null,h=null,d=null,u=[];for(const e of l){const t=e.getAttributeNS(X,"type")?.split(/\s/)??[];t.includes("toc")?c??=a(e):t.includes("page-list")?h??=a(e):t.includes("landmarks")?d??=a(e,!0):u.push({label:ie(e.firstElementChild),type:t,list:a(e)})}return{toc:c,pageList:h,landmarks:d,others:u}},fe=(e,t=e=>e)=>{const{$:i,$$:r}=re(e,_),n=e=>{const o=i(e,"navLabel"),s=i(e,"content"),a=ie(o),l=(e=>e?decodeURI(t(e)):null)(s.getAttribute("src"));if("navPoint"===e.localName){const t=r(e,"navPoint");return{label:a,href:l,subitems:t.length?t.map(n):null}}return{label:a,href:l}},o=(e,t)=>r(e,t).map(n),s=(t,r)=>{const n=i(e.documentElement,t);return n?o(n,r):null};return{toc:s("navMap","navPoint"),pageList:s("pageList","pageTarget"),others:r(e.documentElement,"navList").map((e=>({label:ie(i(e,"navLabel")),list:o(e,"navTarget")})))}},pe=e=>{if(!e)return;const t=e.split(":").map((e=>parseFloat(e)));if(3===t.length){const[e,i,r]=t;return 60*e*60+60*i+r}if(2===t.length){const[e,i]=t;return 60*e+i}const[i,r]=e.split(/(?=[^\d.])/);return parseFloat(i)*("h"===r?3600:"min"===r?60:"ms"===r?.001:1)},ge=/([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})/,me=e=>ie(e.getElementById(e.documentElement.getAttribute("unique-identifier"))??e.getElementsByTagNameNS(J,"identifier")[0]),ye=async(e,t,i)=>{const r=new Uint8Array(await i.slice(0,t).arrayBuffer());t=Math.min(t,r.length);for(var n=0;n<t;n++)r[n]=r[n]^e[n%e.length];return new Blob([r,i.slice(t)],{type:i.type})},be=async e=>{const t=(new TextEncoder).encode(e),i=await globalThis.crypto.subtle.digest("SHA-1",t);return new Uint8Array(i)},ve=(e=be)=>({"http://www.idpf.org/2008/embedding":{key:t=>e(me(t).replaceAll(/[\u0020\u0009\u000d\u000a]/g,"")),decode:(e,t)=>ye(e,1040,t)},"http://ns.adobe.com/pdf/enc#RC":{key:e=>{const t=(e=>{for(const t of e.getElementsByTagNameNS(J,"identifier")){const[e]=ie(t).split(":").slice(-1);if(ge.test(e))return e}return""})(e).replaceAll("-","");return Uint8Array.from({length:16},((e,i)=>parseInt(t.slice(2*i,2*i+2),16)))},decode:(e,t)=>ye(e,1024,t)}});class we{#e=new Map;#t=new Map;#i;constructor(e){this.#i=e}async init(e,t){if(!e)return;const i=Array.from(e.getElementsByTagNameNS(G,"EncryptedData"),(e=>({algorithm:e.getElementsByTagNameNS(G,"EncryptionMethod")[0]?.getAttribute("Algorithm"),uri:e.getElementsByTagNameNS(G,"CipherReference")[0]?.getAttribute("URI")})));for(const{algorithm:e,uri:r}of i){if(!this.#t.has(e)){const i=this.#i[e];if(!i){console.warn("Unknown encryption algorithm");continue}const r=await i.key(t);this.#t.set(e,(e=>i.decode(r,e)))}this.#e.set(r,e)}}getDecoder(e){return this.#t.get(this.#e.get(e))??(e=>e)}}class xe{constructor({opf:e,resolveHref:t}){this.opf=e;const{$:i,$$:r,$$$:n}=re(e,V),o=i(e.documentElement,"manifest"),s=i(e.documentElement,"spine"),a=r(s,"itemref");this.manifest=r(o,"item").map(te("href","id","media-type","properties","media-overlay")).map((e=>(e.href=t(e.href),e.properties=e.properties?.split(/\s/),e))),0===this.manifest.length&&(this.manifest=Array.from(o.children).map((e=>{const i=te("href","id","media-type","properties","media-overlay")(e);return i.href=t(i.href),i.properties=i.properties?.split(/\s/),i}))),this.spine=a.map(te("idref","id","linear","properties")).map((e=>(e.properties=e.properties?.split(/\s/),e))),this.pageProgressionDirection=s.getAttribute("page-progression-direction"),this.navPath=this.getItemByProperty("nav")?.href,this.ncxPath=(this.getItemByID(s.getAttribute("toc"))??this.manifest.find((e=>e.mediaType===K.NCX)))?.href;const l=i(e.documentElement,"guide");l&&(this.guide=r(l,"reference").map(te("type","title","href")).map((({type:e,title:i,href:r})=>({label:i,type:e.split(/\s/),href:t(r)})))),this.cover=this.getItemByProperty("cover-image")??this.getItemByID("cover-image")??this.getItemByID(n(e,"meta").find(ee("name","cover"))?.getAttribute("content"))??this.getItemByID("cover")??this.getItemByID("cover.jpg")??this.getItemByID("cover.png")??this.getItemByID("cover.jpeg")??this.getItemByHref(this.guide?.find((e=>e.type.includes("cover")&&!e.href.includes("html")&&!e.href.includes("xml")))?.href),this.cfis=(e=>{const t=[],{parentNode:i}=e[0],r=$(i);for(const[n,o]of H(i).entries()){const i=e[t.length];o===i&&t.push(P([r.concat({id:i.id,index:n})]))}return t})(a)}getItemByID(e){return this.manifest.find((t=>t.id===e))}getItemByHref(e){return this.manifest.find((t=>t.href===e))}getItemByProperty(e){return this.manifest.find((t=>t.properties?.includes(e)))}resolveCFI(e){const t=I(e),i=(t.parent??t).shift();let r=U(this.opf,i);r&&"idref"!==r.nodeName&&(i.at(-1).id=null,r=U(this.opf,i));const n=r?.getAttribute("idref");return{index:this.spine.findIndex((e=>e.idref===n)),anchor:e=>((e,t)=>{const i=O(t),r=O(t,!0),n=e.documentElement,o=W(n,i[0]),s=W(n,r[0]),a=e.createRange();return o.before?a.setStartBefore(o.node):o.after?a.setStartAfter(o.node):a.setStart(o.node,o.offset),s.before?a.setEndBefore(s.node):s.after?a.setEndAfter(s.node):a.setEnd(s.node,s.offset),a})(e,t)}}}class Ce{#r=new Map;#n=new Map;#o=new Map;allowScript=!1;constructor({loadText:e,loadBlob:t,resources:i}){this.loadText=e,this.loadBlob=t,this.manifest=i.manifest,this.assets=i.manifest}createURL(e,t,i,r){if(!t)return"";const n=URL.createObjectURL(new Blob([t],{type:i}));if(this.#r.set(e,n),this.#o.set(e,1),r){const t=this.#n.get(r);t?t.push(e):this.#n.set(r,[e])}return n}ref(e,t){const i=this.#n.get(t);return i?.includes(e)||(this.#o.set(e,this.#o.get(e)+1),i?i.push(e):this.#n.set(t,[e])),this.#r.get(e)}unref(e){if(!this.#o.has(e))return;const t=this.#o.get(e)-1;if(t<1){URL.revokeObjectURL(this.#r.get(e)),this.#r.delete(e),this.#o.delete(e);const t=this.#n.get(e);if(t)for(;t.length;)this.unref(t.pop());this.#n.delete(e)}else this.#o.set(e,t)}async loadItem(e,t=[]){if(!e)return null;const{href:i,mediaType:r}=e,n=K.JS.test(e.mediaType);if(n&&!this.allowScript)return null;const o=t.at(-1);if(this.#r.has(i))return this.ref(i,o);return(n||[K.XHTML,K.HTML,K.CSS,K.SVG].includes(r))&&t.every((e=>e!==i))?this.loadReplaced(e,t):this.createURL(i,await this.loadBlob(i),r,o)}async loadHref(e,t,i=[]){if(oe(e))return e;const r=ne(e,t);let n=this.manifest.find((e=>e.href===r));return n||(n={href:r,mediaType:""}),this.loadItem(n,i.concat(t))}async loadReplaced(e,t=[]){const{href:i,mediaType:r}=e,n=t.at(-1),o=await this.loadText(i);if(!o)return null;if([K.XHTML,K.HTML,K.SVG].includes(r)){let s=(new DOMParser).parseFromString(o.trim(),r);if(r===K.XHTML&&s.querySelector("parsererror")&&(console.warn(s.querySelector("parsererror").innerText),e.mediaType=K.HTML,s=(new DOMParser).parseFromString(o.trim(),e.mediaType)),[K.XHTML,K.SVG].includes(e.mediaType)){let e=s.firstChild;for(;e instanceof ProcessingInstruction;){if(e.data){const r=await se(e.data,/(?:^|\s*)(href\s*=\s*['"])([^'"]*)(['"])/i,((e,r,n,o)=>this.loadHref(n,i,t).then((e=>`${r}${e}${o}`))));e.replaceWith(s.createProcessingInstruction(e.target,r))}e=e.nextSibling}}const a=async(e,r)=>e.setAttribute(r,await this.loadHref(e.getAttribute(r),i,t));for(const e of s.querySelectorAll("link[href]"))await a(e,"href");for(const e of s.querySelectorAll("[src]"))await a(e,"src");for(const e of s.querySelectorAll("[poster]"))await a(e,"poster");for(const e of s.querySelectorAll("object[data]"))await a(e,"data");for(const e of s.querySelectorAll("[*|href]:not([href]"))e.setAttributeNS(Y,"href",await this.loadHref(e.getAttributeNS(Y,"href"),i,t));for(const e of s.querySelectorAll("style"))e.textContent&&(e.textContent=await this.replaceCSS(e.textContent,i,t));for(const e of s.querySelectorAll("[style]"))e.setAttribute("style",await this.replaceCSS(e.getAttribute("style"),i,t));const l=(new XMLSerializer).serializeToString(s);return this.createURL(i,l,e.mediaType,n)}const s=r===K.CSS?await this.replaceCSS(o,i,t):await this.replaceString(o,i,t);return this.createURL(i,s,r,n)}async replaceCSS(e,t,i=[]){const r=await se(e,/url\(\s*["']?([^'"\n]*?)\s*["']?\s*\)/gi,((e,r)=>this.loadHref(r,t,i).then((e=>`url("${e}")`)))),n=await se(r,/@import\s*["']([^"'\n]*?)["']/gi,((e,r)=>this.loadHref(r,t,i).then((e=>`@import "${e}"`)))),o=window?.innerWidth??800,s=window?.innerHeight??600;return n.replace(/-epub-/gi,"").replace(/(\d*\.?\d+)vw/gi,((e,t)=>parseFloat(t)*o/100+"px")).replace(/(\d*\.?\d+)vh/gi,((e,t)=>parseFloat(t)*s/100+"px")).replace(/page-break-(after|before|inside)/gi,((e,t)=>`-webkit-column-break-${t}`))}replaceString(e,t,i=[]){const r=new Map,n=this.assets.map((e=>{if(e.href===t)return;const i=((e,t)=>{if(!e)return t;const i=e.replace(/\/$/,"").split("/"),r=t.replace(/\/$/,"").split("/"),n=(i.length>r.length?i:r).findIndex(((e,t)=>i[t]!==r[t]));return n<0?"":Array(i.length-n).fill("..").concat(r.slice(n)).join("/")})((e=>e.slice(0,e.lastIndexOf("/")+1))(t),e.href),n=encodeURI(i),o="/"+e.href,s=encodeURI(o),a=new Set([i,n,o,s]);for(const t of a)r.set(t,e);return Array.from(a)})).flat().filter((e=>e));if(!n.length)return e;const o=new RegExp(n.map(ae).join("|"),"g");return se(e,o,(async e=>this.loadItem(r.get(e.replace(/^\//,"")),i.concat(t))))}unloadItem(e){this.unref(e?.href)}}const Te=e=>{for(const t of e){if("page-spread-left"===t||"rendition:page-spread-left"===t)return"left";if("page-spread-right"===t||"rendition:page-spread-right"===t)return"right";if("rendition:page-spread-center"===t)return"center"}};class Le{parser=new DOMParser;#s;constructor({loadText:e,loadBlob:t,getSize:i,sha1:r}){this.loadText=e,this.loadBlob=t,this.getSize=i,this.#s=new we(ve(r))}#a(e){return e&&e.includes("opf:scheme")&&(e=e.replaceAll("opf:scheme","scheme")),e&&(e=e.replace(/^\uFEFF/,"").replace(/<!--([\s\S]*?)-->/g,((e,t)=>`\x3c!--${t.replace(/--/g,"- -")}--\x3e`)).replace(/&(?!(?:amp|lt|gt|quot|apos|#\d+|#x[\da-fA-F]+);)/g,"&amp;").replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"")),e?this.parser.parseFromString(e.trim(),K.XML):null}async#l(e){return this.#a(await this.loadText(e))}async init(){const e=await this.#l("META-INF/container.xml");if(!e)throw new Error("Failed to load container file");const t=Array.from(e.getElementsByTagNameNS(q,"rootfile"),te("full-path","media-type")).filter((e=>"application/oebps-package+xml"===e.mediaType));if(!t.length)throw new Error("No package document defined in container");const i=t[0].fullPath,r=await this.#l(i);if(!r)throw new Error("Failed to load package document");if(r.querySelector("parsererror"))throw new Error("Package document is not a valid XML");const n=await this.#l("META-INF/encryption.xml");await this.#s.init(n,r),this.resources=new xe({opf:r,resolveHref:e=>ne(e,i)});const o=new Ce({loadText:this.loadText,loadBlob:e=>Promise.resolve(this.loadBlob(e)).then(this.#s.getDecoder(e)),resources:this.resources});this.sections=this.resources.spine.map(((e,t)=>{const{idref:i,linear:r,properties:n=[]}=e,s=this.resources.getItemByID(i);return s?{id:this.resources.getItemByID(i)?.href,load:()=>o.loadItem(s),unload:()=>o.unloadItem(s),createDocument:()=>this.loadDocument(s),size:this.getSize(s.href),cfi:this.resources.cfis[t],linear:r,pageSpread:Te(n),resolveHref:e=>ne(e,s.href),loadMediaOverlay:()=>this.loadMediaOverlay(s)}:(console.warn(`Could not find item with ID "${i}" in manifest`),null)}));const{navPath:s,ncxPath:a}=this.resources;if(s)try{const e=e=>ne(e,s),t=ue(await this.#l(s),e);this.toc=t.toc,this.pageList=t.pageList,this.landmarks=t.landmarks}catch(e){console.warn(e)}if((!this.toc||0===this.toc.length)&&a)try{const e=e=>ne(e,a),t=fe(await this.#l(a),e);this.toc=t.toc,this.pageList=t.pageList}catch(e){console.warn(e)}this.landmarks??=this.resources.guide;const{metadata:l,rendition:c,media:h}=(e=>{const{$:t,$$:i}=re(e,V),r=t(e.documentElement,"metadata"),n=Array.from(r.children),o=(e,t)=>{if(!t)return null;const{props:i=[],attrs:r=[]}=e,s=ie(t);if(!i.length&&!r.length)return s;const a=t.getAttribute("id"),l=a?n.filter(ee("refines","#"+a)):[];return Object.fromEntries([["value",s]].concat(i.map((t=>{const{many:i,recursive:r}=t,n="string"==typeof t?t:t.name,s=ee("property",n),a=r?e:t;return[Q(n),i?l.filter(s).map((e=>o(a,e))):o(a,l.find(s))]}))).concat(r.map((e=>[Q(e),t.getAttribute(e)]))))},s=n.filter(ee("refines",null)),a=e=>Object.fromEntries(i(r,"meta").filter(ee("property",(t=>t?.startsWith(e)))).map((t=>[t.getAttribute("property").replace(e,""),ie(t)])));return{metadata:Object.fromEntries(de.map((e=>{const{type:t,name:i,many:r}=e,n="meta"===t?e=>e.namespaceURI===V&&e.getAttribute("property")===i:e=>e.namespaceURI===J&&e.localName===i;return[Q(i),r?s.filter(n).map((t=>o(e,t))):o(e,s.find(n))]}))),rendition:a("rendition:"),media:a("media:")}})(r);this.rendition=c,this.media=h,h.duration=pe(h.duration),this.dir=this.resources.pageProgressionDirection,this.rawMetadata=l;const d=l?.title?.[0];this.metadata={title:d?.value,sortAs:d?.fileAs,language:l?.language,identifier:me(r),description:l?.description?.value,publisher:l?.publisher?.value,published:l?.date,modified:l?.dctermsModified,subject:l?.subject?.filter((({value:e,code:t})=>e||t))?.map((({value:e,code:t,scheme:i})=>({name:e,code:t,scheme:i}))),rights:l?.rights?.value};const u={art:"artist",aut:"author",bkp:"producer",clr:"colorist",edt:"editor",ill:"illustrator",trl:"translator",pbl:"publisher"},f=e=>t=>{const i=[...new Set(t.role?.map((({value:t,scheme:i})=>(i&&"marc:relators"!==i?null:u[t])??e)))],r={name:t.value,sortAs:t.fileAs};return[i?.length?i:[e],r]};return l?.creator?.map(f("author"))?.concat(l?.contributor?.map?.(f("contributor")))?.forEach((([e,t])=>e.forEach((e=>{this.metadata[e]?this.metadata[e].push(t):this.metadata[e]=[t]})))),this}async loadDocument(e){const t=await this.loadText(e.href);return this.parser.parseFromString(t.trim(),e.mediaType)}async loadMediaOverlay(e){const t=e.mediaOverlay;if(!t)return null;const i=this.resources.getItemByID(t),r=((e,t=e=>e)=>{const{$:i,$$$:r}=re(e,Z);return r(e,"par").map((e=>{const r=i(e,"text")?.getAttribute("src")?.split("#")?.[1],n=i(e,"audio");return n?{id:r,audio:{src:(o=n.getAttribute("src"),o?decodeURI(t(o)):null),clipBegin:pe(n.getAttribute("clipBegin")),clipEnd:pe(n.getAttribute("clipEnd"))}}:{id:r};var o}))})(await this.#l(i.href),(e=>ne(e,i.href)));return r}resolveCFI(e){return this.resources.resolveCFI(e)}resolveHref(e){const[t,i]=e.split("#"),r=this.resources.getItemByHref(decodeURI(t));if(!r)return null;return{index:this.resources.spine.findIndex((({idref:e})=>e===r.id)),anchor:i?e=>((e,t)=>e.getElementById(t)??e.querySelector(`[name="${CSS.escape(t)}"]`))(e,i):()=>0}}splitTOCHref(e){return e?.split("#")??[]}getTOCFragment(e,t){return e.getElementById(t)??e.querySelector(`[name="${CSS.escape(t)}"]`)}isExternal(e){return oe(e)}async getCover(){const e=this.resources?.cover;return e?.href?new Blob([await this.loadBlob(e.href)],{type:e.mediaType}):null}async getCalibreBookmarks(){const e=await this.loadText("META-INF/calibre_bookmarks.txt"),t="encoding=json+base64:";if(e?.startsWith(t)){const t=atob(e.slice(21));return JSON.parse(t)}}}const Me={"㐷":"傌","㐹":"㑶","㐽":"偑","㑇":"㑳","㑈":"倲","㑔":"㑯","㑩":"儸","㓆":"𠗣","㓥":"劏","㓰":"劃","㔉":"劚","㖊":"噚","㖞":"喎","㘎":"㘚","㚯":"㜄","㛀":"媰","㛟":"𡞵","㛠":"𡢃","㛣":"㜏","㛤":"孋","㛿":"𡠹","㟆":"㠏","㟜":"𡾱","㟥":"嵾","㡎":"幓","㤘":"㥮","㤽":"懤","㥪":"慺","㧏":"掆","㧐":"㩳","㧑":"撝","㧟":"擓","㧰":"擽","㨫":"㩜","㭎":"棡","㭏":"椲","㭣":"𣙎","㭤":"樢","㭴":"樫","㱩":"殰","㱮":"殨","㲿":"瀇","㳔":"濧","㳕":"灡","㳠":"澾","㳡":"濄","㳢":"𣾷","㳽":"瀰","㴋":"潚","㶉":"鸂","㶶":"燶","㶽":"煱","㺍":"獱","㻅":"璯","㻏":"𤫩","㻘":"𤪺","䀥":"䁻","䁖":"瞜","䂵":"碽","䃅":"磾","䅉":"稏","䅟":"穇","䅪":"𥢢","䇲":"筴","䉤":"籔","䌶":"䊷","䌷":"紬","䌸":"縳","䌹":"絅","䌺":"䋙","䌻":"䋚","䌼":"綐","䌽":"綵","䌾":"䋻","䌿":"䋹","䍀":"繿","䍁":"繸","䍠":"䍦","䎬":"䎱","䏝":"膞","䑽":"𦪙","䓓":"薵","䓕":"薳","䓖":"藭","䓨":"罃","䗖":"螮","䘛":"𧝞","䘞":"𧜗","䙊":"𧜵","䙌":"䙡","䙓":"襬","䜣":"訢","䜤":"鿁","䜥":"𧩙","䜧":"䜀","䜩":"讌","䝙":"貙","䞌":"𧵳","䞍":"䝼","䞎":"𧶧","䞐":"賰","䟢":"躎","䢀":"𨊰","䢁":"𨊸","䢂":"𨋢","䥺":"釾","䥽":"鏺","䥾":"䥱","䥿":"𨯅","䦀":"𨦫","䦁":"𨧜","䦂":"䥇","䦃":"鐯","䦅":"鐥","䦆":"钁","䦶":"䦛","䦷":"䦟","䩄":"靦","䭪":"𩞯","䯃":"𩣑","䯄":"騧","䯅":"䯀","䲝":"䱽","䲞":"𩶘","䲟":"鮣","䲠":"鰆","䲡":"鰌","䲢":"鰧","䲣":"䱷","䴓":"鳾","䴔":"鵁","䴕":"鴷","䴖":"鶄","䴗":"鶪","䴘":"鷉","䴙":"鸊","䶮":"龑","万":"萬","与":"與","丑":"醜","专":"專","业":"業","丛":"叢","东":"東","丝":"絲","丢":"丟","两":"兩","严":"嚴","丧":"喪","个":"個","丰":"豐","临":"臨","为":"爲","丽":"麗","举":"舉","么":"麼","义":"義","乌":"烏","乐":"樂","乔":"喬","习":"習","乡":"鄉","书":"書","买":"買","乱":"亂","了":"了","争":"爭","于":"於","亏":"虧","云":"雲","亘":"亙","亚":"亞","产":"產","亩":"畝","亲":"親","亵":"褻","亸":"嚲","亿":"億","仅":"僅","仆":"僕","仇":"仇","从":"從","仑":"侖","仓":"倉","仪":"儀","们":"們","价":"價","仿":"仿","众":"衆","优":"優","伙":"夥","会":"會","伛":"傴","伞":"傘","伟":"偉","传":"傳","伡":"俥","伣":"俔","伤":"傷","伥":"倀","伦":"倫","伧":"傖","伪":"僞","伫":"佇","体":"體","余":"餘","佛":"佛","佣":"傭","佥":"僉","侠":"俠","侣":"侶","侥":"僥","侦":"偵","侧":"側","侨":"僑","侩":"儈","侪":"儕","侬":"儂","侭":"儘","俊":"俊","俣":"俁","俦":"儔","俨":"儼","俩":"倆","俪":"儷","俫":"倈","俭":"儉","修":"修","借":"借","债":"債","倾":"傾","偬":"傯","偻":"僂","偾":"僨","偿":"償","傤":"儎","傥":"儻","傧":"儐","储":"儲","傩":"儺","僵":"僵","儿":"兒","克":"克","兑":"兌","兖":"兗","党":"黨","兰":"蘭","关":"關","兴":"興","兹":"茲","养":"養","兽":"獸","冁":"囅","内":"內","冈":"岡","册":"冊","写":"寫","军":"軍","农":"農","冬":"冬","冯":"馮","冲":"衝","决":"決","况":"況","冻":"凍","净":"淨","凄":"悽","准":"準","凉":"涼","凌":"凌","减":"減","凑":"湊","凛":"凜","几":"幾","凤":"鳳","凫":"鳧","凭":"憑","凯":"凱","凶":"兇","出":"出","击":"擊","凿":"鑿","刍":"芻","划":"劃","刘":"劉","则":"則","刚":"剛","创":"創","删":"刪","别":"別","刬":"剗","刭":"剄","刮":"刮","制":"制","刹":"剎","刽":"劊","刾":"㓨","刿":"劌","剀":"剴","剂":"劑","剐":"剮","剑":"劍","剥":"剝","剧":"劇","劝":"勸","办":"辦","务":"務","劢":"勱","动":"動","励":"勵","劲":"勁","劳":"勞","势":"勢","勋":"勳","勚":"勩","匀":"勻","匦":"匭","匮":"匱","区":"區","医":"醫","千":"千","升":"升","华":"華","协":"協","单":"單","卖":"賣","卜":"卜","占":"佔","卢":"盧","卤":"滷","卧":"臥","卫":"衛","却":"卻","卷":"卷","卺":"巹","厂":"廠","厅":"廳","历":"歷","厉":"厲","压":"壓","厌":"厭","厍":"厙","厐":"龎","厕":"廁","厘":"釐","厢":"廂","厣":"厴","厦":"廈","厨":"廚","厩":"廄","厮":"廝","县":"縣","叁":"叄","参":"參","叆":"靉","叇":"靆","双":"雙","发":"發","变":"變","叙":"敘","叠":"疊","只":"只","台":"臺","叶":"葉","号":"號","叹":"嘆","叽":"嘰","吁":"籲","吃":"喫","合":"合","吊":"吊","同":"同","后":"後","向":"向","吓":"嚇","吕":"呂","吗":"嗎","吨":"噸","听":"聽","启":"啓","吴":"吳","呐":"吶","呒":"嘸","呓":"囈","呕":"嘔","呖":"嚦","呗":"唄","员":"員","呙":"咼","呛":"嗆","呜":"嗚","周":"周","咏":"詠","咙":"嚨","咛":"嚀","咝":"噝","咤":"吒","咨":"諮","咸":"鹹","咽":"咽","哄":"哄","响":"響","哑":"啞","哒":"噠","哓":"嘵","哔":"嗶","哕":"噦","哗":"譁","哙":"噲","哜":"嚌","哝":"噥","哟":"喲","唇":"脣","唛":"嘜","唝":"嗊","唠":"嘮","唡":"啢","唢":"嗩","唤":"喚","啧":"嘖","啬":"嗇","啭":"囀","啮":"齧","啯":"嘓","啰":"囉","啴":"嘽","啸":"嘯","喂":"喂","喷":"噴","喽":"嘍","喾":"嚳","嗫":"囁","嗳":"噯","嘘":"噓","嘤":"嚶","嘱":"囑","噜":"嚕","噪":"噪","嚣":"囂","回":"回","团":"團","园":"園","困":"困","囱":"囪","围":"圍","囵":"圇","国":"國","图":"圖","圆":"圓","圣":"聖","圹":"壙","场":"場","坏":"壞","块":"塊","坚":"堅","坛":"壇","坜":"壢","坝":"壩","坞":"塢","坟":"墳","坠":"墜","垄":"壟","垅":"壠","垆":"壚","垒":"壘","垦":"墾","垩":"堊","垫":"墊","垭":"埡","垯":"墶","垱":"壋","垲":"塏","垴":"堖","埘":"塒","埙":"壎","埚":"堝","堑":"塹","堕":"墮","塆":"壪","墙":"牆","壮":"壯","声":"聲","壳":"殼","壶":"壺","壸":"壼","处":"處","备":"備","复":"復","够":"夠","夫":"夫","头":"頭","夸":"誇","夹":"夾","夺":"奪","奁":"奩","奂":"奐","奋":"奮","奖":"獎","奥":"奧","奸":"奸","妆":"妝","妇":"婦","妈":"媽","妩":"嫵","妪":"嫗","妫":"嬀","姗":"姍","姜":"姜","姹":"奼","娄":"婁","娅":"婭","娆":"嬈","娇":"嬌","娈":"孌","娘":"娘","娱":"娛","娲":"媧","娴":"嫺","婳":"嫿","婴":"嬰","婵":"嬋","婶":"嬸","媪":"媼","媭":"嬃","嫒":"嬡","嫔":"嬪","嫱":"嬙","嬷":"嬤","孙":"孫","学":"學","孪":"孿","宁":"寧","它":"它","宝":"寶","实":"實","宠":"寵","审":"審","宪":"憲","宫":"宮","家":"家","宽":"寬","宾":"賓","寝":"寢","对":"對","寻":"尋","导":"導","寿":"壽","将":"將","尔":"爾","尘":"塵","尝":"嘗","尧":"堯","尴":"尷","尸":"屍","尽":"盡","局":"局","层":"層","屃":"屓","屉":"屜","届":"屆","属":"屬","屡":"屢","屦":"屨","屿":"嶼","岁":"歲","岂":"豈","岖":"嶇","岗":"崗","岘":"峴","岚":"嵐","岛":"島","岩":"巖","岭":"嶺","岳":"嶽","岽":"崬","岿":"巋","峃":"嶨","峄":"嶧","峡":"峽","峣":"嶢","峤":"嶠","峥":"崢","峦":"巒","峰":"峯","崂":"嶗","崃":"崍","崄":"嶮","崭":"嶄","嵘":"嶸","嵚":"嶔","嵝":"嶁","巅":"巔","巨":"巨","巩":"鞏","巯":"巰","币":"幣","布":"布","帅":"帥","师":"師","帏":"幃","帐":"帳","帘":"簾","帜":"幟","带":"帶","帧":"幀","席":"席","帮":"幫","帱":"幬","帻":"幘","帼":"幗","幂":"冪","干":"幹","并":"並","幸":"幸","广":"廣","庄":"莊","庆":"慶","床":"牀","庐":"廬","庑":"廡","库":"庫","应":"應","庙":"廟","庞":"龐","废":"廢","庵":"庵","庼":"廎","廪":"廩","开":"開","异":"異","弃":"棄","弑":"弒","张":"張","弥":"彌","弦":"弦","弪":"弳","弯":"彎","弹":"彈","强":"強","归":"歸","当":"當","录":"錄","彟":"彠","彦":"彥","彨":"彲","彩":"彩","彻":"徹","征":"徵","径":"徑","徕":"徠","御":"御","忆":"憶","忏":"懺","志":"志","忧":"憂","念":"念","忾":"愾","怀":"懷","态":"態","怂":"慫","怃":"憮","怄":"慪","怅":"悵","怆":"愴","怜":"憐","总":"總","怼":"懟","怿":"懌","恋":"戀","恒":"恆","恤":"恤","恳":"懇","恶":"惡","恸":"慟","恹":"懨","恺":"愷","恻":"惻","恼":"惱","恽":"惲","悦":"悅","悫":"愨","悬":"懸","悭":"慳","悮":"悞","悯":"憫","惊":"驚","惧":"懼","惨":"慘","惩":"懲","惫":"憊","惬":"愜","惭":"慚","惮":"憚","惯":"慣","愈":"愈","愠":"慍","愤":"憤","愦":"憒","愿":"願","慑":"懾","慭":"憖","懑":"懣","懒":"懶","懔":"懍","戆":"戇","戋":"戔","戏":"戲","戗":"戧","战":"戰","戚":"戚","戬":"戩","戯":"戱","户":"戶","才":"才","扎":"扎","扑":"撲","托":"託","扣":"扣","执":"執","扩":"擴","扪":"捫","扫":"掃","扬":"揚","扰":"擾","折":"折","抚":"撫","抛":"拋","抟":"摶","抠":"摳","抡":"掄","抢":"搶","护":"護","报":"報","抵":"抵","担":"擔","拐":"拐","拟":"擬","拢":"攏","拣":"揀","拥":"擁","拦":"攔","拧":"擰","拨":"撥","择":"擇","挂":"掛","挚":"摯","挛":"攣","挜":"掗","挝":"撾","挞":"撻","挟":"挾","挠":"撓","挡":"擋","挢":"撟","挣":"掙","挤":"擠","挥":"揮","挦":"撏","挨":"挨","挽":"挽","捝":"挩","捞":"撈","损":"損","捡":"撿","换":"換","捣":"搗","据":"據","掳":"擄","掴":"摑","掷":"擲","掸":"撣","掺":"摻","掼":"摜","揽":"攬","揾":"搵","揿":"撳","搀":"攙","搁":"擱","搂":"摟","搄":"揯","搅":"攪","搜":"搜","携":"攜","摄":"攝","摅":"攄","摆":"擺","摇":"搖","摈":"擯","摊":"攤","撄":"攖","撑":"撐","撵":"攆","撷":"擷","撸":"擼","撺":"攛","擜":"㩵","擞":"擻","攒":"攢","敌":"敵","敚":"敓","敛":"斂","敩":"斆","数":"數","斋":"齋","斓":"斕","斗":"鬥","斩":"斬","断":"斷","旋":"旋","无":"無","旧":"舊","时":"時","旷":"曠","旸":"暘","昆":"昆","昙":"曇","昵":"暱","昼":"晝","昽":"曨","显":"顯","晋":"晉","晒":"曬","晓":"曉","晔":"曄","晕":"暈","晖":"暉","暂":"暫","暅":"𣈶","暗":"暗","暧":"曖","曲":"曲","术":"術","朱":"朱","朴":"樸","机":"機","杀":"殺","杂":"雜","权":"權","杆":"杆","杠":"槓","条":"條","来":"來","杨":"楊","杩":"榪","杯":"杯","杰":"傑","松":"松","板":"板","极":"極","构":"構","枞":"樅","枢":"樞","枣":"棗","枥":"櫪","枧":"梘","枨":"棖","枪":"槍","枫":"楓","枭":"梟","柜":"櫃","柠":"檸","柽":"檉","栀":"梔","栅":"柵","标":"標","栈":"棧","栉":"櫛","栊":"櫳","栋":"棟","栌":"櫨","栎":"櫟","栏":"欄","树":"樹","栖":"棲","栗":"栗","样":"樣","核":"核","栾":"欒","桠":"椏","桡":"橈","桢":"楨","档":"檔","桤":"榿","桥":"橋","桦":"樺","桧":"檜","桨":"槳","桩":"樁","桪":"樳","梁":"梁","梦":"夢","梼":"檮","梾":"棶","梿":"槤","检":"檢","棁":"梲","棂":"欞","椁":"槨","椝":"槼","椟":"櫝","椠":"槧","椢":"槶","椤":"欏","椫":"樿","椭":"橢","椮":"槮","楼":"樓","榄":"欖","榅":"榲","榇":"櫬","榈":"櫚","榉":"櫸","榝":"樧","槚":"檟","槛":"檻","槟":"檳","槠":"櫧","横":"橫","樯":"檣","樱":"櫻","橥":"櫫","橱":"櫥","橹":"櫓","橼":"櫞","檩":"檁","欢":"歡","欤":"歟","欧":"歐","欲":"欲","歼":"殲","殁":"歿","殇":"殤","残":"殘","殒":"殞","殓":"殮","殚":"殫","殡":"殯","殴":"毆","毁":"毀","毂":"轂","毕":"畢","毙":"斃","毡":"氈","毵":"毿","毶":"𣯶","氇":"氌","气":"氣","氢":"氫","氩":"氬","氲":"氳","汇":"匯","汉":"漢","汤":"湯","汹":"洶","沄":"澐","沈":"沈","沟":"溝","没":"沒","沣":"灃","沤":"漚","沥":"瀝","沦":"淪","沧":"滄","沨":"渢","沩":"潙","沪":"滬","沾":"沾","泛":"泛","泞":"濘","注":"注","泪":"淚","泶":"澩","泷":"瀧","泸":"瀘","泺":"濼","泻":"瀉","泼":"潑","泽":"澤","泾":"涇","洁":"潔","洒":"灑","洼":"窪","浃":"浹","浅":"淺","浆":"漿","浇":"澆","浈":"湞","浉":"溮","浊":"濁","测":"測","浍":"澮","济":"濟","浏":"瀏","浐":"滻","浑":"渾","浒":"滸","浓":"濃","浔":"潯","浕":"濜","涂":"塗","涌":"湧","涚":"涗","涛":"濤","涝":"澇","涞":"淶","涟":"漣","涠":"潿","涡":"渦","涢":"溳","涣":"渙","涤":"滌","润":"潤","涧":"澗","涨":"漲","涩":"澀","淀":"澱","渊":"淵","渌":"淥","渍":"漬","渎":"瀆","渐":"漸","渑":"澠","渔":"漁","渖":"瀋","渗":"滲","温":"溫","游":"遊","湾":"灣","湿":"溼","溁":"濚","溃":"潰","溅":"濺","溆":"漵","溇":"漊","滗":"潷","滚":"滾","滞":"滯","滟":"灩","滠":"灄","满":"滿","滢":"瀅","滤":"濾","滥":"濫","滦":"灤","滨":"濱","滩":"灘","滪":"澦","漓":"漓","潆":"瀠","潇":"瀟","潋":"瀲","潍":"濰","潜":"潛","潴":"瀦","澛":"瀂","澜":"瀾","濑":"瀨","濒":"瀕","灏":"灝","灭":"滅","灯":"燈","灵":"靈","灶":"竈","灾":"災","灿":"燦","炀":"煬","炉":"爐","炖":"燉","炜":"煒","炝":"熗","点":"點","炼":"煉","炽":"熾","烁":"爍","烂":"爛","烃":"烴","烛":"燭","烟":"煙","烦":"煩","烧":"燒","烨":"燁","烩":"燴","烫":"燙","烬":"燼","热":"熱","焕":"煥","焖":"燜","焘":"燾","煴":"熅","熏":"燻","爱":"愛","爷":"爺","牍":"牘","牦":"犛","牵":"牽","牺":"犧","犊":"犢","状":"狀","犷":"獷","犸":"獁","犹":"猶","狈":"狽","狝":"獮","狞":"獰","独":"獨","狭":"狹","狮":"獅","狯":"獪","狰":"猙","狱":"獄","狲":"猻","猃":"獫","猎":"獵","猕":"獼","猡":"玀","猪":"豬","猫":"貓","猬":"蝟","献":"獻","獭":"獺","玑":"璣","玙":"璵","玚":"瑒","玛":"瑪","玩":"玩","玮":"瑋","环":"環","现":"現","玱":"瑲","玺":"璽","珐":"琺","珑":"瓏","珰":"璫","珲":"琿","琎":"璡","琏":"璉","琐":"瑣","琼":"瓊","瑶":"瑤","瑷":"璦","瑸":"璸","璇":"璇","璎":"瓔","瓒":"瓚","瓮":"甕","瓯":"甌","电":"電","画":"畫","畅":"暢","畴":"疇","疖":"癤","疗":"療","疟":"瘧","疠":"癘","疡":"瘍","疬":"癧","疭":"瘲","疮":"瘡","疯":"瘋","疱":"皰","疴":"痾","症":"症","痈":"癰","痉":"痙","痒":"癢","痖":"瘂","痨":"癆","痪":"瘓","痫":"癇","痴":"癡","瘅":"癉","瘆":"瘮","瘗":"瘞","瘘":"瘻","瘪":"癟","瘫":"癱","瘾":"癮","瘿":"癭","癞":"癩","癣":"癬","癫":"癲","皂":"皁","皑":"皚","皱":"皺","皲":"皸","盏":"盞","盐":"鹽","监":"監","盖":"蓋","盗":"盜","盘":"盤","眍":"瞘","眦":"眥","眬":"矓","睁":"睜","睐":"睞","睑":"瞼","瞆":"瞶","瞒":"瞞","瞩":"矚","矩":"矩","矫":"矯","矶":"磯","矾":"礬","矿":"礦","砀":"碭","码":"碼","砖":"磚","砗":"硨","砚":"硯","砜":"碸","砺":"礪","砻":"礱","砾":"礫","础":"礎","硁":"硜","硕":"碩","硖":"硤","硗":"磽","硙":"磑","硚":"礄","确":"確","硵":"磠","硷":"礆","碍":"礙","碛":"磧","碜":"磣","碱":"鹼","礼":"禮","祃":"禡","祎":"禕","祢":"禰","祯":"禎","祷":"禱","祸":"禍","禀":"稟","禄":"祿","禅":"禪","离":"離","私":"私","秃":"禿","秆":"稈","秋":"秋","种":"種","秘":"祕","积":"積","称":"稱","秽":"穢","秾":"穠","稆":"穭","税":"稅","稣":"穌","稳":"穩","穑":"穡","穞":"穭","穷":"窮","窃":"竊","窍":"竅","窎":"窵","窑":"窯","窜":"竄","窝":"窩","窥":"窺","窦":"竇","窭":"窶","竖":"豎","竞":"競","笃":"篤","笋":"筍","笔":"筆","笕":"筧","笺":"箋","笼":"籠","笾":"籩","筑":"築","筚":"篳","筛":"篩","筜":"簹","筝":"箏","筹":"籌","筼":"篔","签":"籤","筿":"篠","简":"簡","箓":"籙","箦":"簀","箧":"篋","箨":"籜","箩":"籮","箪":"簞","箫":"簫","篑":"簣","篓":"簍","篮":"籃","篯":"籛","篱":"籬","簖":"籪","籁":"籟","籴":"糴","类":"類","籼":"秈","粜":"糶","粝":"糲","粤":"粵","粪":"糞","粮":"糧","粽":"糉","糁":"糝","糇":"餱","糍":"餈","系":"系","紧":"緊","絷":"縶","緼":"縕","縆":"緪","纟":"糹","纠":"糾","纡":"紆","红":"紅","纣":"紂","纤":"纖","纥":"紇","约":"約","级":"級","纨":"紈","纩":"纊","纪":"紀","纫":"紉","纬":"緯","纭":"紜","纮":"紘","纯":"純","纰":"紕","纱":"紗","纲":"綱","纳":"納","纴":"紝","纵":"縱","纶":"綸","纷":"紛","纸":"紙","纹":"紋","纺":"紡","纻":"紵","纼":"紖","纽":"紐","纾":"紓","线":"線","绀":"紺","绁":"紲","绂":"紱","练":"練","组":"組","绅":"紳","细":"細","织":"織","终":"終","绉":"縐","绊":"絆","绋":"紼","绌":"絀","绍":"紹","绎":"繹","经":"經","绐":"紿","绑":"綁","绒":"絨","结":"結","绔":"絝","绕":"繞","绖":"絰","绗":"絎","绘":"繪","给":"給","绚":"絢","绛":"絳","络":"絡","绝":"絕","绞":"絞","统":"統","绠":"綆","绡":"綃","绢":"絹","绣":"繡","绤":"綌","绥":"綏","绦":"絛","继":"繼","绨":"綈","绩":"績","绪":"緒","绫":"綾","绬":"緓","续":"續","绮":"綺","绯":"緋","绰":"綽","绱":"鞝","绲":"緄","绳":"繩","维":"維","绵":"綿","绶":"綬","绷":"繃","绸":"綢","绹":"綯","绺":"綹","绻":"綣","综":"綜","绽":"綻","绾":"綰","绿":"綠","缀":"綴","缁":"緇","缂":"緙","缃":"緗","缄":"緘","缅":"緬","缆":"纜","缇":"緹","缈":"緲","缉":"緝","缊":"縕","缋":"繢","缌":"緦","缍":"綞","缎":"緞","缏":"緶","缐":"線","缑":"緱","缒":"縋","缓":"緩","缔":"締","缕":"縷","编":"編","缗":"緡","缘":"緣","缙":"縉","缚":"縛","缛":"縟","缜":"縝","缝":"縫","缞":"縗","缟":"縞","缠":"纏","缡":"縭","缢":"縊","缣":"縑","缤":"繽","缥":"縹","缦":"縵","缧":"縲","缨":"纓","缩":"縮","缪":"繆","缫":"繅","缬":"纈","缭":"繚","缮":"繕","缯":"繒","缰":"繮","缱":"繾","缲":"繰","缳":"繯","缴":"繳","缵":"纘","罂":"罌","网":"網","罗":"羅","罚":"罰","罢":"罷","罴":"羆","羁":"羈","羟":"羥","羡":"羨","群":"羣","翘":"翹","翙":"翽","翚":"翬","耢":"耮","耧":"耬","耸":"聳","耻":"恥","聂":"聶","聋":"聾","职":"職","聍":"聹","联":"聯","聩":"聵","聪":"聰","肃":"肅","肠":"腸","肤":"膚","肮":"骯","肴":"餚","肾":"腎","肿":"腫","胀":"脹","胁":"脅","胄":"胄","胆":"膽","背":"背","胜":"勝","胡":"胡","胧":"朧","胨":"腖","胪":"臚","胫":"脛","胶":"膠","脉":"脈","脍":"膾","脏":"髒","脐":"臍","脑":"腦","脓":"膿","脔":"臠","脚":"腳","脱":"脫","脶":"腡","脸":"臉","腊":"臘","腌":"醃","腘":"膕","腭":"齶","腻":"膩","腼":"靦","腽":"膃","腾":"騰","膑":"臏","膻":"羶","臜":"臢","致":"致","舆":"輿","舍":"舍","舣":"艤","舰":"艦","舱":"艙","舻":"艫","艰":"艱","艳":"豔","艺":"藝","节":"節","芈":"羋","芗":"薌","芜":"蕪","芦":"蘆","芸":"芸","苁":"蓯","苇":"葦","苈":"藶","苋":"莧","苌":"萇","苍":"蒼","苎":"苧","苏":"蘇","苔":"苔","苧":"薴","苹":"蘋","范":"範","茎":"莖","茏":"蘢","茑":"蔦","茔":"塋","茕":"煢","茧":"繭","荆":"荊","荐":"薦","荙":"薘","荚":"莢","荛":"蕘","荜":"蓽","荝":"萴","荞":"蕎","荟":"薈","荠":"薺","荡":"蕩","荣":"榮","荤":"葷","荥":"滎","荦":"犖","荧":"熒","荨":"蕁","荩":"藎","荪":"蓀","荫":"蔭","荬":"蕒","荭":"葒","荮":"葤","药":"藥","莅":"蒞","莱":"萊","莲":"蓮","莳":"蒔","莴":"萵","莶":"薟","获":"獲","莸":"蕕","莹":"瑩","莺":"鶯","莼":"蓴","萚":"蘀","萝":"蘿","萤":"螢","营":"營","萦":"縈","萧":"蕭","萨":"薩","葱":"蔥","蒀":"蒕","蒇":"蕆","蒉":"蕢","蒋":"蔣","蒌":"蔞","蒏":"醟","蒙":"蒙","蓝":"藍","蓟":"薊","蓠":"蘺","蓣":"蕷","蓥":"鎣","蓦":"驀","蔂":"虆","蔑":"蔑","蔷":"薔","蔹":"蘞","蔺":"藺","蔼":"藹","蕰":"薀","蕲":"蘄","蕴":"蘊","薮":"藪","藓":"蘚","藴":"蘊","蘖":"櫱","虏":"虜","虑":"慮","虚":"虛","虫":"蟲","虬":"虯","虮":"蟣","虱":"蝨","虽":"雖","虾":"蝦","虿":"蠆","蚀":"蝕","蚁":"蟻","蚂":"螞","蚃":"蠁","蚕":"蠶","蚝":"蠔","蚬":"蜆","蛊":"蠱","蛎":"蠣","蛏":"蟶","蛮":"蠻","蛰":"蟄","蛱":"蛺","蛲":"蟯","蛳":"螄","蛴":"蠐","蜕":"蛻","蜗":"蝸","蜡":"蠟","蝇":"蠅","蝈":"蟈","蝉":"蟬","蝎":"蠍","蝼":"螻","蝾":"蠑","螀":"螿","螨":"蟎","蟏":"蠨","衅":"釁","衔":"銜","补":"補","表":"表","衬":"襯","衮":"袞","袄":"襖","袅":"嫋","袆":"褘","袜":"襪","袭":"襲","袯":"襏","装":"裝","裆":"襠","裈":"褌","裢":"褳","裣":"襝","裤":"褲","裥":"襉","褛":"褸","褴":"襤","襕":"襴","见":"見","观":"觀","觃":"覎","规":"規","觅":"覓","视":"視","觇":"覘","览":"覽","觉":"覺","觊":"覬","觋":"覡","觌":"觿","觍":"覥","觎":"覦","觏":"覯","觐":"覲","觑":"覷","觞":"觴","触":"觸","觯":"觶","訚":"誾","詟":"讋","誉":"譽","誊":"謄","讠":"訁","计":"計","订":"訂","讣":"訃","认":"認","讥":"譏","讦":"訐","讧":"訌","讨":"討","让":"讓","讪":"訕","讫":"訖","讬":"託","训":"訓","议":"議","讯":"訊","记":"記","讱":"訒","讲":"講","讳":"諱","讴":"謳","讵":"詎","讶":"訝","讷":"訥","许":"許","讹":"訛","论":"論","讻":"訩","讼":"訟","讽":"諷","设":"設","访":"訪","诀":"訣","证":"證","诂":"詁","诃":"訶","评":"評","诅":"詛","识":"識","诇":"詗","诈":"詐","诉":"訴","诊":"診","诋":"詆","诌":"謅","词":"詞","诎":"詘","诏":"詔","诐":"詖","译":"譯","诒":"詒","诓":"誆","诔":"誄","试":"試","诖":"詿","诗":"詩","诘":"詰","诙":"詼","诚":"誠","诛":"誅","诜":"詵","话":"話","诞":"誕","诟":"詬","诠":"詮","诡":"詭","询":"詢","诣":"詣","诤":"諍","该":"該","详":"詳","诧":"詫","诨":"諢","诩":"詡","诪":"譸","诫":"誡","诬":"誣","语":"語","诮":"誚","误":"誤","诰":"誥","诱":"誘","诲":"誨","诳":"誑","说":"說","诵":"誦","诶":"誒","请":"請","诸":"諸","诹":"諏","诺":"諾","读":"讀","诼":"諑","诽":"誹","课":"課","诿":"諉","谀":"諛","谁":"誰","谂":"諗","调":"調","谄":"諂","谅":"諒","谆":"諄","谇":"誶","谈":"談","谉":"讅","谊":"誼","谋":"謀","谌":"諶","谍":"諜","谎":"謊","谏":"諫","谐":"諧","谑":"謔","谒":"謁","谓":"謂","谔":"諤","谕":"諭","谖":"諼","谗":"讒","谘":"諮","谙":"諳","谚":"諺","谛":"諦","谜":"謎","谝":"諞","谞":"諝","谟":"謨","谠":"讜","谡":"謖","谢":"謝","谣":"謠","谤":"謗","谥":"諡","谦":"謙","谧":"謐","谨":"謹","谩":"謾","谪":"謫","谫":"譾","谬":"謬","谭":"譚","谮":"譖","谯":"譙","谰":"讕","谱":"譜","谲":"譎","谳":"讞","谴":"譴","谵":"譫","谶":"讖","谷":"谷","豮":"豶","贝":"貝","贞":"貞","负":"負","贠":"貟","贡":"貢","财":"財","责":"責","贤":"賢","败":"敗","账":"賬","货":"貨","质":"質","贩":"販","贪":"貪","贫":"貧","贬":"貶","购":"購","贮":"貯","贯":"貫","贰":"貳","贱":"賤","贲":"賁","贳":"貰","贴":"貼","贵":"貴","贶":"貺","贷":"貸","贸":"貿","费":"費","贺":"賀","贻":"貽","贼":"賊","贽":"贄","贾":"賈","贿":"賄","赀":"貲","赁":"賃","赂":"賂","赃":"贓","资":"資","赅":"賅","赆":"贐","赇":"賕","赈":"賑","赉":"賚","赊":"賒","赋":"賦","赌":"賭","赍":"齎","赎":"贖","赏":"賞","赐":"賜","赑":"贔","赒":"賙","赓":"賡","赔":"賠","赕":"賧","赖":"賴","赗":"賵","赘":"贅","赙":"賻","赚":"賺","赛":"賽","赜":"賾","赝":"贗","赞":"贊","赟":"贇","赠":"贈","赡":"贍","赢":"贏","赣":"贛","赪":"赬","赵":"趙","赶":"趕","趋":"趨","趱":"趲","趸":"躉","跃":"躍","跄":"蹌","跖":"蹠","跞":"躒","践":"踐","跶":"躂","跷":"蹺","跸":"蹕","跹":"躚","跻":"躋","踌":"躊","踪":"蹤","踬":"躓","踯":"躑","蹑":"躡","蹒":"蹣","蹰":"躕","蹿":"躥","躏":"躪","躜":"躦","躯":"軀","輼":"轀","车":"車","轧":"軋","轨":"軌","轩":"軒","轪":"軑","轫":"軔","转":"轉","轭":"軛","轮":"輪","软":"軟","轰":"轟","轱":"軲","轲":"軻","轳":"轤","轴":"軸","轵":"軹","轶":"軼","轷":"軤","轸":"軫","轹":"轢","轺":"軺","轻":"輕","轼":"軾","载":"載","轾":"輊","轿":"轎","辀":"輈","辁":"輇","辂":"輅","较":"較","辄":"輒","辅":"輔","辆":"輛","辇":"輦","辈":"輩","辉":"輝","辊":"輥","辋":"輞","辌":"輬","辍":"輟","辎":"輜","辏":"輳","辐":"輻","辑":"輯","辒":"轀","输":"輸","辔":"轡","辕":"轅","辖":"轄","辗":"輾","辘":"轆","辙":"轍","辚":"轔","辞":"辭","辟":"闢","辩":"辯","辫":"辮","边":"邊","辽":"遼","达":"達","迁":"遷","过":"過","迈":"邁","运":"運","还":"還","这":"這","进":"進","远":"遠","违":"違","连":"連","迟":"遲","迩":"邇","迳":"逕","迹":"跡","适":"適","选":"選","逊":"遜","递":"遞","逦":"邐","逻":"邏","遗":"遺","遥":"遙","邓":"鄧","邝":"鄺","邬":"鄔","邮":"郵","邹":"鄒","邺":"鄴","邻":"鄰","郁":"鬱","郏":"郟","郐":"鄶","郑":"鄭","郓":"鄆","郦":"酈","郧":"鄖","郸":"鄲","酂":"酇","酝":"醞","酦":"醱","酱":"醬","酸":"酸","酽":"釅","酾":"釃","酿":"釀","醖":"醞","采":"採","释":"釋","里":"裏","鉴":"鑑","銮":"鑾","錾":"鏨","钅":"釒","钆":"釓","钇":"釔","针":"針","钉":"釘","钊":"釗","钋":"釙","钌":"釕","钍":"釷","钎":"釺","钏":"釧","钐":"釤","钑":"鈒","钒":"釩","钓":"釣","钔":"鍆","钕":"釹","钖":"鍚","钗":"釵","钘":"鈃","钙":"鈣","钚":"鈈","钛":"鈦","钜":"鉅","钝":"鈍","钞":"鈔","钟":"鍾","钠":"鈉","钡":"鋇","钢":"鋼","钣":"鈑","钤":"鈐","钥":"鑰","钦":"欽","钧":"鈞","钨":"鎢","钩":"鉤","钪":"鈧","钫":"鈁","钬":"鈥","钭":"鈄","钮":"鈕","钯":"鈀","钰":"鈺","钱":"錢","钲":"鉦","钳":"鉗","钴":"鈷","钵":"鉢","钶":"鈳","钷":"鉕","钸":"鈽","钹":"鈸","钺":"鉞","钻":"鑽","钼":"鉬","钽":"鉭","钾":"鉀","钿":"鈿","铀":"鈾","铁":"鐵","铂":"鉑","铃":"鈴","铄":"鑠","铅":"鉛","铆":"鉚","铇":"鉋","铈":"鈰","铉":"鉉","铊":"鉈","铋":"鉍","铌":"鈮","铍":"鈹","铎":"鐸","铏":"鉶","铐":"銬","铑":"銠","铒":"鉺","铓":"鋩","铔":"錏","铕":"銪","铖":"鋮","铗":"鋏","铘":"鋣","铙":"鐃","铚":"銍","铛":"鐺","铜":"銅","铝":"鋁","铞":"銱","铟":"銦","铠":"鎧","铡":"鍘","铢":"銖","铣":"銑","铤":"鋌","铥":"銩","铦":"銛","铧":"鏵","铨":"銓","铩":"鎩","铪":"鉿","铫":"銚","铬":"鉻","铭":"銘","铮":"錚","铯":"銫","铰":"鉸","铱":"銥","铲":"鏟","铳":"銃","铴":"鐋","铵":"銨","银":"銀","铷":"銣","铸":"鑄","铹":"鐒","铺":"鋪","铻":"鋙","铼":"錸","铽":"鋱","链":"鏈","铿":"鏗","销":"銷","锁":"鎖","锂":"鋰","锃":"鋥","锄":"鋤","锅":"鍋","锆":"鋯","锇":"鋨","锈":"鏽","锉":"銼","锊":"鋝","锋":"鋒","锌":"鋅","锍":"鋶","锎":"鐦","锏":"鐧","锐":"銳","锑":"銻","锒":"鋃","锓":"鋟","锔":"鋦","锕":"錒","锖":"錆","锗":"鍺","锘":"鍩","错":"錯","锚":"錨","锛":"錛","锜":"錡","锝":"鍀","锞":"錁","锟":"錕","锠":"錩","锡":"錫","锢":"錮","锣":"鑼","锤":"錘","锥":"錐","锦":"錦","锧":"鑕","锨":"鍁","锩":"錈","锪":"鍃","锫":"錇","锬":"錟","锭":"錠","键":"鍵","锯":"鋸","锰":"錳","锱":"錙","锲":"鍥","锳":"鍈","锴":"鍇","锵":"鏘","锶":"鍶","锷":"鍔","锸":"鍤","锹":"鍬","锺":"鍾","锻":"鍛","锼":"鎪","锽":"鍠","锾":"鍰","锿":"鎄","镀":"鍍","镁":"鎂","镂":"鏤","镃":"鎡","镄":"鐨","镅":"鎇","镆":"鏌","镇":"鎮","镈":"鎛","镉":"鎘","镊":"鑷","镋":"钂","镌":"鐫","镍":"鎳","镎":"鎿","镏":"鎦","镐":"鎬","镑":"鎊","镒":"鎰","镓":"鎵","镔":"鑌","镕":"鎔","镖":"鏢","镗":"鏜","镘":"鏝","镙":"鏍","镚":"鏰","镛":"鏞","镜":"鏡","镝":"鏑","镞":"鏃","镟":"鏇","镠":"鏐","镡":"鐔","镢":"钁","镣":"鐐","镤":"鏷","镥":"鑥","镦":"鐓","镧":"鑭","镨":"鐠","镩":"鑹","镪":"鏹","镫":"鐙","镬":"鑊","镭":"鐳","镮":"鐶","镯":"鐲","镰":"鐮","镱":"鐿","镲":"鑔","镳":"鑣","镴":"鑞","镵":"鑱","镶":"鑲","长":"長","门":"門","闩":"閂","闪":"閃","闫":"閆","闬":"閈","闭":"閉","问":"問","闯":"闖","闰":"閏","闱":"闈","闲":"閒","闳":"閎","间":"間","闵":"閔","闶":"閌","闷":"悶","闸":"閘","闹":"鬧","闺":"閨","闻":"聞","闼":"闥","闽":"閩","闾":"閭","闿":"闓","阀":"閥","阁":"閣","阂":"閡","阃":"閫","阄":"鬮","阅":"閱","阆":"閬","阇":"闍","阈":"閾","阉":"閹","阊":"閶","阋":"鬩","阌":"閿","阍":"閽","阎":"閻","阏":"閼","阐":"闡","阑":"闌","阒":"闃","阓":"闠","阔":"闊","阕":"闋","阖":"闔","阗":"闐","阘":"闒","阙":"闕","阚":"闞","阛":"闤","队":"隊","阳":"陽","阴":"陰","阵":"陣","阶":"階","际":"際","陆":"陸","陇":"隴","陈":"陳","陉":"陘","陕":"陝","陦":"隯","陧":"隉","陨":"隕","险":"險","随":"隨","隐":"隱","隶":"隸","隽":"雋","难":"難","雇":"僱","雏":"雛","雕":"雕","雠":"讎","雳":"靂","雾":"霧","霁":"霽","霉":"黴","霡":"霢","霭":"靄","靓":"靚","靔":"靝","静":"靜","面":"面","靥":"靨","鞑":"韃","鞒":"鞽","鞯":"韉","鞲":"韝","韦":"韋","韧":"韌","韨":"韍","韩":"韓","韪":"韙","韫":"韞","韬":"韜","韵":"韻","页":"頁","顶":"頂","顷":"頃","顸":"頇","项":"項","顺":"順","须":"須","顼":"頊","顽":"頑","顾":"顧","顿":"頓","颀":"頎","颁":"頒","颂":"頌","颃":"頏","预":"預","颅":"顱","领":"領","颇":"頗","颈":"頸","颉":"頡","颊":"頰","颋":"頲","颌":"頜","颍":"潁","颎":"熲","颏":"頦","颐":"頤","频":"頻","颒":"頮","颓":"頹","颔":"頷","颕":"頴","颖":"穎","颗":"顆","题":"題","颙":"顒","颚":"顎","颛":"顓","颜":"顏","额":"額","颞":"顳","颟":"顢","颠":"顛","颡":"顙","颢":"顥","颣":"纇","颤":"顫","颥":"顬","颦":"顰","颧":"顴","风":"風","飏":"颺","飐":"颭","飑":"颮","飒":"颯","飓":"颶","飔":"颸","飕":"颼","飖":"颻","飗":"飀","飘":"飄","飙":"飆","飚":"飈","飞":"飛","飨":"饗","餍":"饜","饣":"飠","饤":"飣","饥":"飢","饦":"飥","饧":"餳","饨":"飩","饩":"餼","饪":"飪","饫":"飫","饬":"飭","饭":"飯","饮":"飲","饯":"餞","饰":"飾","饱":"飽","饲":"飼","饳":"飿","饴":"飴","饵":"餌","饶":"饒","饷":"餉","饸":"餄","饹":"餎","饺":"餃","饻":"餏","饼":"餅","饽":"餑","饾":"餖","饿":"餓","馀":"餘","馁":"餒","馂":"餕","馃":"餜","馄":"餛","馅":"餡","馆":"館","馇":"餷","馈":"饋","馉":"餶","馊":"餿","馋":"饞","馌":"饁","馍":"饃","馎":"餺","馏":"餾","馐":"饈","馑":"饉","馒":"饅","馓":"饊","馔":"饌","馕":"饢","马":"馬","驭":"馭","驮":"馱","驯":"馴","驰":"馳","驱":"驅","驲":"馹","驳":"駁","驴":"驢","驵":"駔","驶":"駛","驷":"駟","驸":"駙","驹":"駒","驺":"騶","驻":"駐","驼":"駝","驽":"駑","驾":"駕","驿":"驛","骀":"駘","骁":"驍","骂":"罵","骃":"駰","骄":"驕","骅":"驊","骆":"駱","骇":"駭","骈":"駢","骉":"驫","骊":"驪","骋":"騁","验":"驗","骍":"騂","骎":"駸","骏":"駿","骐":"騏","骑":"騎","骒":"騍","骓":"騅","骔":"騌","骕":"驌","骖":"驂","骗":"騙","骘":"騭","骙":"騤","骚":"騷","骛":"騖","骜":"驁","骝":"騮","骞":"騫","骟":"騸","骠":"驃","骡":"騾","骢":"驄","骣":"驏","骤":"驟","骥":"驥","骦":"驦","骧":"驤","髅":"髏","髋":"髖","髌":"髕","鬓":"鬢","鬶":"鬹","魇":"魘","魉":"魎","鱼":"魚","鱽":"魛","鱾":"魢","鱿":"魷","鲀":"魨","鲁":"魯","鲂":"魴","鲃":"䰾","鲄":"魺","鲅":"鮁","鲆":"鮃","鲇":"鮎","鲈":"鱸","鲉":"鮋","鲊":"鮓","鲋":"鮒","鲌":"鮊","鲍":"鮑","鲎":"鱟","鲏":"鮍","鲐":"鮐","鲑":"鮭","鲒":"鮚","鲓":"鮳","鲔":"鮪","鲕":"鮞","鲖":"鮦","鲗":"鰂","鲘":"鮜","鲙":"鱠","鲚":"鱭","鲛":"鮫","鲜":"鮮","鲝":"鮺","鲞":"鯗","鲟":"鱘","鲠":"鯁","鲡":"鱺","鲢":"鰱","鲣":"鰹","鲤":"鯉","鲥":"鰣","鲦":"鰷","鲧":"鯀","鲨":"鯊","鲩":"鯇","鲪":"鮶","鲫":"鯽","鲬":"鯒","鲭":"鯖","鲮":"鯪","鲯":"鯕","鲰":"鯫","鲱":"鯡","鲲":"鯤","鲳":"鯧","鲴":"鯝","鲵":"鯢","鲶":"鯰","鲷":"鯛","鲸":"鯨","鲹":"鰺","鲺":"鯴","鲻":"鯔","鲼":"鱝","鲽":"鰈","鲾":"鰏","鲿":"鱨","鳀":"鯷","鳁":"鰮","鳂":"鰃","鳃":"鰓","鳄":"鱷","鳅":"鰍","鳆":"鰒","鳇":"鰉","鳈":"鰁","鳉":"鱂","鳊":"鯿","鳋":"鰠","鳌":"鰲","鳍":"鰭","鳎":"鰨","鳏":"鰥","鳐":"鰩","鳑":"鰟","鳒":"鰜","鳓":"鰳","鳔":"鰾","鳕":"鱈","鳖":"鱉","鳗":"鰻","鳘":"鰵","鳙":"鱅","鳚":"䲁","鳛":"鰼","鳜":"鱖","鳝":"鱔","鳞":"鱗","鳟":"鱒","鳠":"鱯","鳡":"鱤","鳢":"鱧","鳣":"鱣","鳤":"䲘","鸟":"鳥","鸠":"鳩","鸡":"雞","鸢":"鳶","鸣":"鳴","鸤":"鳲","鸥":"鷗","鸦":"鴉","鸧":"鶬","鸨":"鴇","鸩":"鴆","鸪":"鴣","鸫":"鶇","鸬":"鸕","鸭":"鴨","鸮":"鴞","鸯":"鴦","鸰":"鴒","鸱":"鴟","鸲":"鴝","鸳":"鴛","鸴":"鷽","鸵":"鴕","鸶":"鷥","鸷":"鷙","鸸":"鴯","鸹":"鴰","鸺":"鵂","鸻":"鴴","鸼":"鵃","鸽":"鴿","鸾":"鸞","鸿":"鴻","鹀":"鵐","鹁":"鵓","鹂":"鸝","鹃":"鵑","鹄":"鵠","鹅":"鵝","鹆":"鵒","鹇":"鷳","鹈":"鵜","鹉":"鵡","鹊":"鵲","鹋":"鶓","鹌":"鵪","鹍":"鵾","鹎":"鵯","鹏":"鵬","鹐":"鵮","鹑":"鶉","鹒":"鶊","鹓":"鵷","鹔":"鷫","鹕":"鶘","鹖":"鶡","鹗":"鶚","鹘":"鶻","鹙":"鶖","鹚":"鷀","鹛":"鶥","鹜":"鶩","鹝":"鷊","鹞":"鷂","鹟":"鶲","鹠":"鶹","鹡":"鶺","鹢":"鷁","鹣":"鶼","鹤":"鶴","鹥":"鷖","鹦":"鸚","鹧":"鷓","鹨":"鷚","鹩":"鷯","鹪":"鷦","鹫":"鷲","鹬":"鷸","鹭":"鷺","鹮":"䴉","鹯":"鸇","鹰":"鷹","鹱":"鸌","鹲":"鸏","鹳":"鸛","鹴":"鸘","鹾":"鹺","麦":"麥","麸":"麩","麹":"麴","麺":"麪","麽":"麼","黄":"黃","黉":"黌","黡":"黶","黩":"黷","黪":"黲","黾":"黽","鼋":"黿","鼌":"鼂","鼍":"鼉","鼹":"鼴","齐":"齊","齑":"齏","齿":"齒","龀":"齔","龁":"齕","龂":"齗","龃":"齟","龄":"齡","龅":"齙","龆":"齠","龇":"齜","龈":"齦","龉":"齬","龊":"齪","龋":"齲","龌":"齷","龙":"龍","龚":"龔","龛":"龕","龟":"龜","鿎":"䃮","鿏":"䥑","鿒":"鿓","鿔":"鎶","𠀾":"𠁞","𠆲":"儣","𠆿":"𠌥","𠇹":"俓","𠉂":"㒓","𠉗":"𠏢","𠋆":"儭","𠚳":"𠠎","𠛅":"剾","𠛆":"𠞆","𠛾":"𪟖","𠡠":"勑","𠮶":"嗰","𠯟":"哯","𠯠":"噅","𠰱":"㘉","𠰷":"嚧","𠱞":"囃","𠲥":"𡅏","𠴛":"𡃕","𠴢":"𡄔","𠵸":"𡄣","𠵾":"㗲","𡋀":"𡓾","𡋗":"𡑭","𡋤":"壗","𡍣":"𡔖","𡒄":"壈","𡝠":"㜷","𡞋":"㜗","𡞱":"㜢","𡠟":"孎","𡥧":"孻","𡭜":"𡮉","𡭬":"𡮣","𡳃":"𡳳","𡳒":"𦘧","𡶴":"嵼","𡸃":"𡽗","𡺃":"嶈","𡺄":"嶘","𢋈":"㢝","𢗓":"㦛","𢘙":"𢤱","𢘝":"𢣚","𢘞":"𢣭","𢙏":"愻","𢙐":"憹","𢙑":"𢠼","𢙒":"憢","𢙓":"懀","𢛯":"㦎","𢠁":"懎","𢢐":"𤢻","𢧐":"戰","𢫊":"𢷮","𢫞":"𢶫","𢫬":"摋","𢬍":"擫","𢬦":"𢹿","𢭏":"擣","𢽾":"斅","𣃁":"斸","𣆐":"曥","𣈣":"𣋋","𣍨":"𦢈","𣍯":"腪","𣍰":"脥","𣎑":"臗","𣏢":"槫","𣐕":"桱","𣐤":"欍","𣑶":"𣠲","𣒌":"楇","𣓿":"橯","𣔌":"樤","𣗊":"樠","𣗋":"欓","𣗙":"㰙","𣘐":"㯤","𣘓":"𣞻","𣘴":"檭","𣘷":"𣝕","𣚚":"欘","𣞎":"𣠩","𣨼":"殢","𣭤":"𣯴","𣯣":"𣯩","𣱝":"氭","𣲗":"湋","𣲘":"潕","𣳆":"㵗","𣶩":"澅","𣶫":"𣿉","𣶭":"𪷓","𣷷":"𤅶","𣸣":"濆","𣺼":"灙","𣺽":"𤁣","𣽷":"瀃","𤆡":"熓","𤆢":"㷍","𤇃":"爄","𤇄":"熌","𤇭":"爖","𤇹":"熚","𤈶":"熉","𤈷":"㷿","𤊀":"𤒎","𤊰":"𤓩","𤋏":"熡","𤎺":"𤓎","𤎻":"𤑳","𤙯":"𤛮","𤝢":"𤢟","𤞃":"獩","𤞤":"玁","𤠋":"㺏","𤦀":"瓕","𤩽":"瓛","𤳄":"𤳸","𤶊":"癐","𤶧":"𤸫","𤻊":"㿗","𤽯":"㿧","𤾀":"皟","𤿲":"麬","𥁢":"䀉","𥅘":"𥌃","𥅴":"䀹","𥅿":"𥊝","𥆧":"瞤","𥇢":"䁪","𥎝":"䂎","𥐟":"礒","𥐯":"𥖅","𥐰":"𥕥","𥐻":"碙","𥞦":"𥞵","𥧂":"𥨐","𥩟":"竚","𥩺":"𥪂","𥫣":"籅","𥬀":"䉙","𥬞":"籋","𥬠":"篘","𥭉":"𥵊","𥮋":"𥸠","𥮜":"䉲","𥮾":"篸","𥱔":"𥵃","𥹥":"𥼽","𥺅":"䊭","𥺇":"𥽖","𦈈":"𥿊","𦈉":"緷","𦈋":"綇","𦈌":"綀","𦈎":"繟","𦈏":"緍","𦈐":"縺","𦈑":"緸","𦈒":"𦂅","𦈓":"䋿","𦈔":"縎","𦈕":"緰","𦈖":"䌈","𦈗":"𦃄","𦈘":"䌋","𦈙":"䌰","𦈚":"縬","𦈛":"繓","𦈜":"䌖","𦈝":"繏","𦈞":"䌟","𦈟":"䌝","𦈠":"䌥","𦈡":"繻","𦍠":"䍽","𦛨":"朥","𦝼":"膢","𦟗":"𦣎","𦨩":"𦪽","𦰏":"蓧","𦰴":"䕳","𦶟":"爇","𦶻":"𦾟","𦻕":"蘟","𧉐":"𧕟","𧉞":"䗿","𧌥":"𧎈","𧏖":"蠙","𧏗":"蠀","𧑏":"蠾","𧒭":"𧔥","𧜭":"䙱","𧝝":"襰","𧝧":"𧟀","𧮪":"詀","𧳕":"𧳟","𧹑":"䞈","𧹒":"買","𧹓":"𧶔","𧹔":"賬","𧹕":"𝻻","𧹖":"賟","𧹗":"贃","𧿈":"𨇁","𨀁":"躘","𨀱":"𨄣","𨁴":"𨅍","𨂺":"𨈊","𨄄":"𨈌","𨅛":"䠱","𨅫":"𨇞","𨅬":"躝","𨉗":"軉","𨐅":"軗","𨐆":"𨊻","𨐇":"𨏠","𨐈":"輄","𨐉":"𨎮","𨐊":"𨏥","𨑹":"䢨","𨟳":"𨣞","𨠨":"𨣧","𨡙":"𨢿","𨡺":"𨣈","𨤰":"𨤻","𨰾":"鎷","𨰿":"釳","𨱀":"𨥛","𨱁":"鈠","𨱂":"鈋","𨱃":"鈲","𨱄":"鈯","𨱅":"鉁","𨱆":"龯","𨱇":"銶","𨱈":"鋉","𨱉":"鍄","𨱊":"𨧱","𨱋":"錂","𨱌":"鏆","𨱍":"鎯","𨱎":"鍮","𨱏":"鎝","𨱐":"𨫒","𨱑":"鐄","𨱒":"鏉","𨱓":"鐎","𨱔":"鐏","𨱕":"𨮂","𨱖":"䥩","𨷿":"䦳","𨸀":"𨳕","𨸁":"𨳑","𨸂":"閍","𨸃":"閐","𨸄":"䦘","𨸅":"𨴗","𨸆":"𨵩","𨸇":"𨵸","𨸉":"𨶀","𨸊":"𨶏","𨸋":"𨶲","𨸌":"𨶮","𨸎":"𨷲","𨸘":"𨽏","𨸟":"䧢","𩏼":"䪏","𩏽":"𩏪","𩏾":"𩎢","𩏿":"䪘","𩐀":"䪗","𩓋":"顂","𩖕":"𩓣","𩖖":"顃","𩖗":"䫴","𩙥":"颰","𩙦":"𩗀","𩙧":"䬞","𩙨":"𩘹","𩙩":"𩘀","𩙪":"颷","𩙫":"颾","𩙬":"𩘺","𩙭":"𩘝","𩙮":"䬘","𩙯":"䬝","𩙰":"𩙈","𩟿":"𩚛","𩠀":"𩚥","𩠁":"𩚵","𩠂":"𩛆","𩠃":"𩛩","𩠅":"𩟐","𩠆":"𩜦","𩠇":"䭀","𩠈":"䭃","𩠉":"𩜇","𩠊":"𩜵","𩠋":"𩝔","𩠌":"餸","𩠎":"𩞄","𩠏":"𩞦","𩠠":"𩠴","𩡖":"𩡣","𩧦":"𩡺","𩧨":"駎","𩧩":"𩤊","𩧪":"䮾","𩧫":"駚","𩧬":"𩢡","𩧭":"䭿","𩧮":"𩢾","𩧯":"驋","𩧰":"䮝","𩧱":"𩥉","𩧲":"駧","𩧳":"𩢸","𩧴":"駩","𩧵":"𩢴","𩧶":"𩣏","𩧸":"𩣫","𩧺":"駶","𩧻":"𩣵","𩧼":"𩣺","𩧿":"䮠","𩨀":"騔","𩨁":"䮞","𩨂":"驄","𩨃":"騝","𩨄":"騪","𩨅":"𩤸","𩨆":"𩤙","𩨇":"䮫","𩨈":"騟","𩨉":"𩤲","𩨊":"騚","𩨋":"𩥄","𩨌":"𩥑","𩨍":"𩥇","𩨎":"龭","𩨏":"䮳","𩨐":"𩧆","𩩈":"䯤","𩬣":"𩭙","𩬤":"𩰀","𩭹":"鬖","𩯒":"𩯳","𩰰":"𩰹","𩲒":"𩳤","𩴌":"𩴵","𩽹":"魥","𩽺":"𩵩","𩽻":"𩵹","𩽼":"鯶","𩽽":"𩶱","𩽾":"鮟","𩽿":"𩶰","𩾁":"鯄","𩾂":"䲖","𩾃":"鮸","𩾄":"𩷰","𩾅":"𩸃","𩾆":"𩸦","𩾇":"鯱","𩾈":"䱙","𩾊":"䱬","𩾋":"䱰","𩾌":"鱇","𩾎":"𩽇","𪉂":"䲰","𪉃":"鳼","𪉄":"𩿪","𪉅":"𪀦","𪉆":"鴲","𪉈":"鴜","𪉉":"𪁈","𪉊":"鷨","𪉋":"𪀾","𪉌":"𪁖","𪉍":"鵚","𪉎":"𪂆","𪉏":"𪃏","𪉐":"𪃍","𪉑":"鷔","𪉒":"𪄕","𪉔":"𪄆","𪉕":"𪇳","𪎈":"䴬","𪎉":"麲","𪎊":"麨","𪎋":"䴴","𪎌":"麳","𪑅":"䵳","𪔭":"𪔵","𪚏":"𪘀","𪚐":"𪘯","𪜎":"𠿕","𪞝":"凙","𪟎":"㔋","𪟝":"勣","𪠀":"𧷎","𪠟":"㓄","𪠡":"𠬙","𪠳":"唓","𪠵":"㖮","𪠸":"嚛","𪠺":"𠽃","𪠽":"噹","𪡀":"嘺","𪡃":"嘪","𪡋":"噞","𪡏":"嗹","𪡛":"㗿","𪡞":"嘳","𪡺":"𡃄","𪢌":"㘓","𪢐":"𡃤","𪢒":"𡂡","𪢕":"嚽","𪢖":"𡅯","𪢠":"囒","𪢮":"圞","𪢸":"墲","𪣆":"埬","𪣒":"堚","𪣻":"塿","𪤄":"𡓁","𪤚":"壣","𪥠":"𧹈","𪥫":"孇","𪥰":"嬣","𪥿":"嬻","𪧀":"孾","𪧘":"寠","𪨊":"㞞","𪨗":"屩","𪨧":"崙","𪨩":"𡸗","𪨶":"輋","𪨷":"巗","𪨹":"𡹬","𪩇":"㟺","𪩎":"巊","𪩘":"巘","𪩛":"𡿖","𪩷":"幝","𪩸":"幩","𪪏":"廬","𪪑":"㢗","𪪞":"廧","𪪴":"𢍰","𪪼":"彃","𪫌":"徿","𪫡":"𢤩","𪫷":"㦞","𪫺":"憸","𪬚":"𢣐","𪬯":"𢤿","𪭝":"𢯷","𪭢":"摐","𪭧":"擟","𪭯":"𢶒","𪭵":"掚","𪭾":"撊","𪮃":"㨻","𪮋":"㩋","𪮖":"撧","𪮳":"𢺳","𪮶":"攋","𪯋":"㪎","𪰶":"曊","𪱥":"膹","𪱷":"梖","𪲎":"櫅","𪲔":"欐","𪲛":"檵","𪲮":"櫠","𪳍":"欇","𪳗":"𣜬","𪴙":"欑","𪵑":"毊","𪵣":"霼","𪵱":"濿","𪶄":"溡","𪶒":"𤄷","𪶮":"𣽏","𪷍":"㵾","𪷽":"灒","𪸕":"熂","𪸩":"煇","𪹀":"𤑹","𪹠":"𤓌","𪹳":"爥","𪹹":"𤒻","𪺣":"𤘀","𪺪":"𤜆","𪺭":"犞","𪺷":"獊","𪺸":"𤠮","𪺻":"㺜","𪺽":"猌","𪻐":"瑽","𪻨":"瓄","𪻲":"瑻","𪻺":"璝","𪼋":"㻶","𪼴":"𤬅","𪽈":"畼","𪽝":"𤳷","𪽪":"痮","𪽭":"𤷃","𪽮":"㿖","𪽴":"𤺔","𪽷":"瘱","𪾔":"盨","𪾢":"睍","𪾣":"眝","𪾦":"矑","𪾸":"矉","𪿊":"𥏝","𪿞":"𥖲","𪿫":"礮","𪿵":"𥗇","𫀌":"𥜰","𫀓":"𥜐","𫀨":"䅐","𫀬":"䅳","𫀮":"𥢷","𫁂":"䆉","𫁟":"竱","𫁡":"鴗","𫁱":"𥶽","𫁲":"䉑","𫁳":"𥯤","𫁷":"䉶","𫁺":"𥴼","𫂃":"簢","𫂆":"簂","𫂈":"䉬","𫂖":"𥴨","𫂿":"𥻦","𫃗":"𩏷","𫄙":"糺","𫄚":"䊺","𫄛":"紟","𫄜":"䋃","𫄝":"𥾯","𫄞":"䋔","𫄟":"絁","𫄠":"絙","𫄡":"絧","𫄢":"絥","𫄣":"繷","𫄤":"繨","𫄥":"纚","𫄦":"𦀖","𫄧":"綖","𫄨":"絺","𫄩":"䋦","𫄪":"𦅇","𫄫":"綟","𫄬":"緤","𫄭":"緮","𫄮":"䋼","𫄯":"𦃩","𫄰":"縍","𫄱":"繬","𫄲":"縸","𫄳":"縰","𫄴":"繂","𫄵":"𦅈","𫄶":"繈","𫄷":"繶","𫄸":"纁","𫄹":"纗","𫅅":"䍤","𫅗":"羵","𫅥":"𦒀","𫅭":"䎙","𫅼":"𦔖","𫆏":"聻","𫆝":"𦟼","𫆫":"𦡝","𫇘":"𦧺","𫇛":"艣","𫇪":"𦱌","𫇭":"蔿","𫇴":"蒭","𫇽":"蕽","𫈉":"蕳","𫈎":"葝","𫈟":"蔯","𫈵":"蕝","𫉁":"薆","𫉄":"藷","𫊪":"䗅","𫊮":"蠦","𫊸":"蟜","𫊹":"𧒯","𫊻":"蟳","𫋇":"蟂","𫋌":"蟘","𫋲":"䙔","𫋷":"襗","𫋹":"襓","𫋻":"襘","𫌀":"襀","𫌇":"襵","𫌋":"𧞫","𫌨":"覼","𫌪":"覛","𫌫":"𧡴","𫌬":"𧢄","𫌭":"覹","𫌯":"䚩","𫍐":"𧭹","𫍙":"訑","𫍚":"訞","𫍛":"訜","𫍜":"詓","𫍝":"諫","𫍞":"𧦝","𫍟":"𧦧","𫍠":"䛄","𫍡":"詑","𫍢":"譊","𫍣":"詷","𫍤":"譑","𫍥":"誂","𫍦":"譨","𫍧":"誺","𫍨":"誫","𫍩":"諣","𫍪":"誋","𫍫":"䛳","𫍬":"誷","𫍭":"𧩕","𫍮":"誳","𫍯":"諴","𫍰":"諰","𫍱":"諯","𫍲":"謏","𫍳":"諥","𫍴":"謱","𫍵":"謸","𫍶":"𧩼","𫍷":"謉","𫍸":"謆","𫍹":"謯","𫍺":"𧫝","𫍻":"譆","𫍼":"𧬤","𫍽":"譞","𫍾":"𧭈","𫍿":"譾","𫎆":"豵","𫎌":"貗","𫎦":"贚","𫎧":"䝭","𫎨":"𧸘","𫎩":"賝","𫎪":"䞋","𫎫":"贉","𫎬":"贑","𫎭":"䞓","𫎱":"䟐","𫎳":"䟆","𫎸":"𧽯","𫎺":"䟃","𫏃":"䠆","𫏆":"蹳","𫏋":"蹻","𫏌":"𨂐","𫏐":"蹔","𫏑":"𨇽","𫏕":"𨆪","𫏞":"𨇰","𫏨":"𨇤","𫐄":"軏","𫐅":"軕","𫐆":"轣","𫐇":"軜","𫐈":"軷","𫐉":"軨","𫐊":"軬","𫐋":"𨎌","𫐌":"軿","𫐍":"𨌈","𫐎":"輢","𫐏":"輖","𫐐":"輗","𫐑":"輨","𫐒":"輷","𫐓":"輮","𫐔":"𨍰","𫐕":"轊","𫐖":"轇","𫐗":"轐","𫐘":"轗","𫐙":"轠","𫐷":"遱","𫑘":"鄟","𫑡":"鄳","𫑷":"醶","𫓥":"釟","𫓦":"釨","𫓧":"鈇","𫓨":"鈛","𫓩":"鏦","𫓪":"鈆","𫓫":"𨥟","𫓬":"鉔","𫓭":"鉠","𫓮":"𨪕","𫓯":"銈","𫓰":"銊","𫓱":"鐈","𫓲":"銁","𫓳":"𨰋","𫓴":"鉾","𫓵":"鋠","𫓶":"鋗","𫓷":"𫒡","𫓸":"錽","𫓹":"錤","𫓺":"鐪","𫓻":"錜","𫓼":"𨨛","𫓽":"錝","𫓾":"錥","𫓿":"𨨢","𫔀":"鍊","𫔁":"鐼","𫔂":"鍉","𫔃":"𨰲","𫔄":"鍒","𫔅":"鎍","𫔆":"䥯","𫔇":"鎞","𫔈":"鎙","𫔉":"𨰃","𫔊":"鏥","𫔋":"䥗","𫔌":"鏾","𫔍":"鐇","𫔎":"鐍","𫔏":"𨬖","𫔐":"𨭸","𫔑":"𨭖","𫔒":"𨮳","𫔓":"𨯟","𫔔":"鑴","𫔕":"𨰥","𫔖":"𨲳","𫔭":"開","𫔮":"閒","𫔯":"閗","𫔰":"閞","𫔲":"𨴹","𫔴":"閵","𫔵":"䦯","𫔶":"闑","𫔽":"𨼳","𫕚":"𩀨","𫕥":"霣","𫕨":"𩅙","𫖃":"靧","𫖅":"䪊","𫖇":"鞾","𫖑":"𩎖","𫖒":"韠","𫖓":"𩏂","𫖔":"韛","𫖕":"韝","𫖖":"𩏠","𫖪":"𩑔","𫖫":"䪴","𫖬":"䪾","𫖭":"𩒎","𫖮":"顗","𫖯":"頫","𫖰":"䫂","𫖱":"䫀","𫖲":"䫟","𫖳":"頵","𫖴":"𩔳","𫖵":"𩓥","𫖶":"顅","𫖷":"𩔑","𫖸":"願","𫖹":"顣","𫖺":"䫶","𫗇":"䫻","𫗈":"𩗓","𫗉":"𩗴","𫗊":"䬓","𫗋":"飋","𫗚":"𩟗","𫗞":"飦","𫗟":"䬧","𫗠":"餦","𫗡":"𩚩","𫗢":"飵","𫗣":"飶","𫗤":"𩛌","𫗥":"餫","𫗦":"餔","𫗧":"餗","𫗨":"𩛡","𫗩":"饠","𫗪":"餧","𫗫":"餬","𫗬":"餪","𫗭":"餵","𫗮":"餭","𫗯":"餱","𫗰":"䭔","𫗱":"䭑","𫗳":"𩝽","𫗴":"饘","𫗵":"饟","𫘛":"馯","𫘜":"馼","𫘝":"駃","𫘞":"駞","𫘟":"駊","𫘠":"駤","𫘡":"駫","𫘣":"駻","𫘤":"騃","𫘥":"騉","𫘦":"騊","𫘧":"騄","𫘨":"騠","𫘩":"騜","𫘪":"騵","𫘫":"騴","𫘬":"騱","𫘭":"騻","𫘮":"䮰","𫘯":"驓","𫘰":"驙","𫘱":"驨","𫘽":"鬠","𫙂":"𩯁","𫚈":"鱮","𫚉":"魟","𫚊":"鰑","𫚋":"鱄","𫚌":"魦","𫚍":"魵","𫚎":"𩶁","𫚏":"䱁","𫚐":"䱀","𫚑":"鮅","𫚒":"鮄","𫚓":"鮤","𫚔":"鮰","𫚕":"鰤","𫚖":"鮆","𫚗":"鮯","𫚘":"𩻮","𫚙":"鯆","𫚚":"鮿","𫚛":"鮵","𫚜":"䲅","𫚝":"𩸄","𫚞":"鯬","𫚟":"𩸡","𫚠":"䱧","𫚡":"鯞","𫚢":"鰋","𫚣":"鯾","𫚤":"鰦","𫚥":"鰕","𫚦":"鰫","𫚧":"鰽","𫚨":"𩻗","𫚩":"𩻬","𫚪":"鱊","𫚫":"鱢","𫚬":"𩼶","𫚭":"鱲","𫛚":"鳽","𫛛":"鳷","𫛜":"鴀","𫛝":"鴅","𫛞":"鴃","𫛟":"鸗","𫛠":"𩿤","𫛡":"鴔","𫛢":"鸋","𫛣":"鴥","𫛤":"鴐","𫛥":"鵊","𫛦":"鴮","𫛧":"𪀖","𫛨":"鵧","𫛩":"鴳","𫛪":"鴽","𫛫":"鶰","𫛬":"䳜","𫛭":"鵟","𫛮":"䳤","𫛯":"鶭","𫛰":"䳢","𫛱":"鵫","𫛲":"鵰","𫛳":"鵩","𫛴":"鷤","𫛵":"鶌","𫛶":"鶒","𫛷":"鶦","𫛸":"鶗","𫛹":"𪃧","𫛺":"䳧","𫛻":"𪃒","𫛼":"䳫","𫛽":"鷅","𫛾":"𪆷","𫜀":"鷐","𫜁":"鷩","𫜂":"𪅂","𫜃":"鷣","𫜄":"鷷","𫜅":"䴋","𫜊":"𪉸","𫜑":"麷","𫜒":"䴱","𫜓":"𪌭","𫜔":"䴽","𫜕":"𪍠","𫜙":"䵴","𫜟":"𪓰","𫜨":"𪶕","𫜩":"齧","𫜪":"齩","𫜫":"𫜦","𫜬":"齰","𫜭":"齭","𫜮":"齴","𫜯":"𪙏","𫜰":"齾","𫜲":"龓","𫜳":"䶲","𫝈":"㑮","𫝋":"𠐊","𫝦":"㛝","𫝧":"㜐","𫝨":"媈","𫝩":"嬦","𫝪":"𡟫","𫝫":"婡","𫝬":"嬇","𫝭":"孆","𫝮":"孄","𫝵":"嶹","𫞅":"𦠅","𫞗":"潣","𫞚":"澬","𫞛":"㶆","𫞝":"灍","𫞠":"爧","𫞡":"爃","𫞢":"𤛱","𫞣":"㹽","𫞥":"珼","𫞦":"璾","𫞧":"𤩂","𫞨":"璼","𫞩":"璊","𫞷":"𥢶","𫟃":"絍","𫟄":"綋","𫟅":"綡","𫟆":"緟","𫟇":"𦆲","𫟑":"䖅","𫟕":"䕤","𫟞":"訨","𫟟":"詊","𫟠":"譂","𫟡":"誴","𫟢":"䜖","𫟤":"䡐","𫟥":"䡩","𫟦":"䡵","𫟫":"𨞺","𫟬":"𨟊","𫟲":"釚","𫟳":"釲","𫟴":"鈖","𫟵":"鈗","𫟶":"銏","𫟷":"鉝","𫟸":"鉽","𫟹":"鉷","𫟺":"䤤","𫟻":"銂","𫟼":"鐽","𫟽":"𨧰","𫟾":"𨩰","𫟿":"鎈","𫠀":"䥄","𫠁":"鑉","𫠂":"閝","𫠅":"韚","𫠆":"頍","𫠇":"𩖰","𫠈":"䫾","𫠊":"䮄","𫠋":"騼","𫠌":"𩦠","𫠏":"𩵦","𫠐":"魽","𫠑":"䱸","𫠒":"鱆","𫠖":"𩿅","𫠜":"齯","𫢸":"僤","𫧃":"𣍐","𫧮":"𪋿","𫫇":"噁","𫬐":"㘔","𫭟":"塸","𫭢":"埨","𫭼":"𡑍","𫮃":"墠","𫰛":"娙","𫵷":"㠣","𫶇":"嵽","𫷷":"廞","𫸩":"彄","𬀩":"暐","𬀪":"晛","𬂩":"梜","𬃊":"櫍","𬇕":"澫","𬇙":"浿","𬇹":"漍","𬉼":"熰","𬊈":"燖","𬊤":"燀","𬍛":"瓅","𬍡":"璗","𬍤":"璕","𬒈":"礐","𬒗":"𥗽","𬕂":"篢","𬘓":"紃","𬘘":"紞","𬘡":"絪","𬘩":"綎","𬘫":"綄","𬘬":"綪","𬘭":"綝","𬘯":"綧","𬙂":"縯","𬙊":"纆","𬙋":"纕","𬜬":"蔄","𬜯":"䓣","𬞟":"蘋","𬟁":"虉","𬟽":"蝀","𬣙":"訏","𬣞":"詝","𬣡":"諓","𬣳":"詪","𬤇":"諲","𬤊":"諟","𬤝":"譓","𬨂":"軝","𬨎":"輶","𬩽":"鄩","𬪩":"醲","𬬩":"釴","𬬭":"錀","𬬮":"鋹","𬬱":"釿","𬬸":"鉥","𬬹":"鉮","𬬻":"鑪","𬬿":"鉊","𬭁":"鉧","𬭊":"𨧀","𬭎":"鋐","𬭚":"錞","𬭛":"𨨏","𬭤":"鍭","𬭩":"鎓","𬭬":"鏏","𬭭":"鏚","𬭯":"䥕","𬭳":"𨭎","𬭶":"𨭆","𬭸":"鏻","𬭼":"鐩","𬮱":"闉","𬮿":"隑","𬯀":"隮","𬯎":"隤","𬱖":"頔","𬱟":"頠","𬳵":"駓","𬳶":"駉","𬳽":"駪","𬳿":"駼","𬴂":"騑","𬴃":"騞","𬴊":"驎","𬶋":"鮈","𬶍":"鮀","𬶏":"鮠","𬶐":"鮡","𬶟":"鯻","𬶠":"鰊","𬶨":"鱀","𬶭":"鰶","𬶮":"鱚","𬷕":"鵏","𬸘":"鶠","𬸚":"鸑","𬸣":"鶱","𬸦":"鷟","𬸪":"鷭","𬸯":"鷿","𬹼":"齘","𬺈":"齮","𬺓":"齼","𰬸":"繐","𰰨":"菕","𰶎":"譅","𰾄":"鋂","𰾭":"鑀","𱊜":"𪈼"},Se={"㑮":"𫝈","㑯":"㑔","㑳":"㑇","㑶":"㐹","㒓":"𠉂","㓄":"𪠟","㓨":"刾","㔋":"𪟎","㖮":"𪠵","㗲":"𠵾","㗿":"𪡛","㘉":"𠰱","㘓":"𪢌","㘔":"𫬐","㘚":"㘎","㛝":"𫝦","㜄":"㚯","㜏":"㛣","㜐":"𫝧","㜗":"𡞋","㜢":"𡞱","㜷":"𡝠","㞞":"𪨊","㟺":"𪩇","㠏":"㟆","㠣":"𫵷","㢗":"𪪑","㢝":"𢋈","㥮":"㤘","㦎":"𢛯","㦛":"𢗓","㦞":"𪫷","㨻":"𪮃","㩋":"𪮋","㩜":"㨫","㩳":"㧐","㩵":"擜","㪎":"𪯋","㯤":"𣘐","㰙":"𣗙","㵗":"𣳆","㵾":"𪷍","㶆":"𫞛","㷍":"𤆢","㷿":"𤈷","㸇":"𤎺","㹽":"𫞣","㺏":"𤠋","㺜":"𪺻","㻶":"𪼋","㿖":"𪽮","㿗":"𤻊","㿧":"𤽯","䀉":"𥁢","䀹":"𥅴","䁪":"𥇢","䁻":"䀥","䂎":"𥎝","䃮":"鿎","䅐":"𫀨","䅳":"𫀬","䆉":"𫁂","䉑":"𫁲","䉙":"𥬀","䉬":"𫂈","䉲":"𥮜","䉶":"𫁷","䊭":"𥺅","䊷":"䌶","䊺":"𫄚","䋃":"𫄜","䋔":"𫄞","䋙":"䌺","䋚":"䌻","䋦":"𫄩","䋹":"䌿","䋻":"䌾","䋼":"𫄮","䋿":"𦈓","䌈":"𦈖","䌋":"𦈘","䌖":"𦈜","䌝":"𦈟","䌟":"𦈞","䌥":"𦈠","䌰":"𦈙","䍤":"𫅅","䍦":"䍠","䍽":"𦍠","䎙":"𫅭","䎱":"䎬","䓣":"𬜯","䕤":"𫟕","䕳":"𦰴","䖅":"𫟑","䗅":"𫊪","䗿":"𧉞","䙔":"𫋲","䙡":"䙌","䙱":"𧜭","䚩":"𫌯","䛄":"𫍠","䛳":"𫍫","䜀":"䜧","䜖":"𫟢","䝭":"𫎧","䝻":"𧹕","䝼":"䞍","䞈":"𧹑","䞋":"𫎪","䞓":"𫎭","䟃":"𫎺","䟆":"𫎳","䟐":"𫎱","䠆":"𫏃","䠱":"𨅛","䡐":"𫟤","䡩":"𫟥","䡵":"𫟦","䢨":"𨑹","䤤":"𫟺","䥄":"𫠀","䥇":"䦂","䥑":"鿏","䥕":"𬭯","䥗":"𫔋","䥩":"𨱖","䥯":"𫔆","䥱":"䥾","䦘":"𨸄","䦛":"䦶","䦟":"䦷","䦯":"𫔵","䦳":"𨷿","䧢":"𨸟","䪊":"𫖅","䪏":"𩏼","䪗":"𩐀","䪘":"𩏿","䪴":"𫖫","䪾":"𫖬","䫀":"𫖱","䫂":"𫖰","䫟":"𫖲","䫴":"𩖗","䫶":"𫖺","䫻":"𫗇","䫾":"𫠈","䬓":"𫗊","䬘":"𩙮","䬝":"𩙯","䬞":"𩙧","䬧":"𫗟","䭀":"𩠇","䭃":"𩠈","䭑":"𫗱","䭔":"𫗰","䭿":"𩧭","䮄":"𫠊","䮝":"𩧰","䮞":"𩨁","䮠":"𩧿","䮫":"𩨇","䮰":"𫘮","䮳":"𩨏","䮾":"𩧪","䯀":"䯅","䯤":"𩩈","䰾":"鲃","䱀":"𫚐","䱁":"𫚏","䱙":"𩾈","䱧":"𫚠","䱬":"𩾊","䱰":"𩾋","䱷":"䲣","䱸":"𫠑","䱽":"䲝","䲁":"鳚","䲅":"𫚜","䲖":"𩾂","䲘":"鳤","䲰":"𪉂","䳜":"𫛬","䳢":"𫛰","䳤":"𫛮","䳧":"𫛺","䳫":"𫛼","䴉":"鹮","䴋":"𫜅","䴬":"𪎈","䴱":"𫜒","䴴":"𪎋","䴽":"𫜔","䵳":"𪑅","䵴":"𫜙","䶕":"𫜨","䶲":"𫜳","丟":"丢","並":"并","乾":"干","亂":"乱","亙":"亘","亞":"亚","佇":"伫","佈":"布","佔":"占","併":"并","來":"来","侖":"仑","侶":"侣","侷":"局","俁":"俣","係":"系","俓":"𠇹","俔":"伣","俠":"侠","俥":"伡","俬":"私","倀":"伥","倆":"俩","倈":"俫","倉":"仓","個":"个","們":"们","倖":"幸","倫":"伦","倲":"㑈","偉":"伟","偑":"㐽","側":"侧","偵":"侦","偽":"伪","傌":"㐷","傑":"杰","傖":"伧","傘":"伞","備":"备","傢":"家","傭":"佣","傯":"偬","傳":"传","傴":"伛","債":"债","傷":"伤","傾":"倾","僂":"偻","僅":"仅","僉":"佥","僑":"侨","僕":"仆","僞":"伪","僤":"𫢸","僥":"侥","僨":"偾","僱":"雇","價":"价","儀":"仪","儁":"俊","儂":"侬","億":"亿","儈":"侩","儉":"俭","儎":"","儐":"","儔":"俦","儕":"侪","儘":"尽","償":"偿","儣":"𠆲","優":"优","儭":"𠋆","儲":"储","儷":"俪","儸":"㑩","儺":"傩","儻":"傥","儼":"俨","兇":"凶","兌":"兑","兒":"儿","兗":"兖","內":"内","兩":"两","冊":"册","冑":"胄","冪":"幂","凈":"净","凍":"冻","凙":"𪞝","凜":"凛","凱":"凯","別":"别","刪":"删","剄":"刭","則":"则","剋":"克","剎":"刹","剗":"刬","剛":"刚","剝":"剥","剮":"剐","剴":"剀","創":"创","剷":"铲","剾":"𠛅","劃":"划","劇":"剧","劉":"刘","劊":"刽","劌":"刿","劍":"剑","劏":"㓥","劑":"剂","劚":"㔉","勁":"劲","勑":"𠡠","動":"动","務":"务","勛":"勋","勝":"胜","勞":"劳","勢":"势","勣":"𪟝","勩":"勚","勱":"劢","勳":"勋","勵":"励","勸":"劝","勻":"匀","匭":"匦","匯":"汇","匱":"匮","區":"区","協":"协","卹":"恤","卻":"却","卽":"即","厙":"厍","厠":"厕","厤":"历","厭":"厌","厲":"厉","厴":"厣","參":"参","叄":"叁","叢":"丛","吒":"咤","吳":"吴","吶":"呐","呂":"吕","咼":"呙","員":"员","哯":"𠯟","唄":"呗","唓":"𪠳","唸":"念","問":"问","啓":"启","啞":"哑","啟":"启","啢":"唡","喎":"㖞","喚":"唤","喪":"丧","喫":"吃","喬":"乔","單":"单","喲":"哟","嗆":"呛","嗇":"啬","嗊":"唝","嗎":"吗","嗚":"呜","嗩":"唢","嗰":"𠮶","嗶":"哔","嗹":"𪡏","嘆":"叹","嘍":"喽","嘓":"啯","嘔":"呕","嘖":"啧","嘗":"尝","嘜":"唛","嘩":"哗","嘪":"𪡃","嘮":"唠","嘯":"啸","嘰":"叽","嘳":"𪡞","嘵":"哓","嘸":"呒","嘺":"𪡀","嘽":"啴","噁":"恶","噅":"𠯠","噓":"嘘","噚":"㖊","噝":"咝","噞":"𪡋","噠":"哒","噥":"哝","噦":"哕","噯":"嗳","噲":"哙","噴":"喷","噸":"吨","噹":"当","嚀":"咛","嚇":"吓","嚌":"哜","嚐":"尝","嚕":"噜","嚙":"啮","嚛":"𪠸","嚥":"咽","嚦":"呖","嚧":"𠰷","嚨":"咙","嚮":"向","嚲":"亸","嚳":"喾","嚴":"严","嚶":"嘤","嚽":"𪢕","囀":"啭","囁":"嗫","囂":"嚣","囃":"𠱞","囅":"冁","囈":"呓","囉":"啰","囌":"苏","囑":"嘱","囒":"𪢠","囪":"囱","圇":"囵","國":"国","圍":"围","園":"园","圓":"圆","圖":"图","團":"团","圞":"𪢮","垻":"坝","埡":"垭","埨":"𫭢","埬":"𪣆","埰":"采","執":"执","堅":"坚","堊":"垩","堖":"垴","堚":"𪣒","堝":"埚","堯":"尧","報":"报","場":"场","塊":"块","塋":"茔","塏":"垲","塒":"埘","塗":"涂","塚":"冢","塢":"坞","塤":"埙","塵":"尘","塸":"𫭟","塹":"堑","塿":"𪣻","墊":"垫","墜":"坠","墠":"𫮃","墮":"堕","墰":"坛","墲":"𪢸","墳":"坟","墶":"垯","墻":"墙","墾":"垦","壇":"坛","壈":"𡒄","壋":"垱","壎":"埙","壓":"压","壗":"𡋤","壘":"垒","壙":"圹","壚":"垆","壜":"坛","壞":"坏","壟":"垄","壠":"垅","壢":"坜","壣":"𪤚","壩":"坝","壪":"塆","壯":"壮","壺":"壶","壼":"壸","壽":"寿","夠":"够","夢":"梦","夥":"伙","夾":"夹","奐":"奂","奧":"奥","奩":"奁","奪":"夺","奬":"奖","奮":"奋","奼":"姹","妝":"妆","姍":"姗","姦":"奸","娙":"𫰛","娛":"娱","婁":"娄","婡":"𫝫","婦":"妇","婭":"娅","媈":"𫝨","媧":"娲","媯":"妫","媰":"㛀","媼":"媪","媽":"妈","嫋":"袅","嫗":"妪","嫵":"妩","嫺":"娴","嫻":"娴","嫿":"婳","嬀":"妫","嬃":"媭","嬇":"𫝬","嬈":"娆","嬋":"婵","嬌":"娇","嬙":"嫱","嬡":"嫒","嬣":"𪥰","嬤":"嬷","嬦":"𫝩","嬪":"嫔","嬰":"婴","嬸":"婶","嬻":"𪥿","孃":"娘","孄":"𫝮","孆":"𫝭","孇":"𪥫","孋":"㛤","孌":"娈","孎":"𡠟","孫":"孙","學":"学","孻":"𡥧","孾":"𪧀","孿":"孪","宮":"宫","寀":"采","寠":"𪧘","寢":"寝","實":"实","寧":"宁","審":"审","寫":"写","寬":"宽","寵":"宠","寶":"宝","將":"将","專":"专","尋":"寻","對":"对","導":"导","尷":"尴","屆":"届","屍":"尸","屓":"屃","屜":"屉","屢":"屡","層":"层","屨":"屦","屩":"𪨗","屬":"属","岡":"冈","峯":"峰","峴":"岘","島":"岛","峽":"峡","崍":"崃","崑":"昆","崗":"岗","崙":"仑","崢":"峥","崬":"岽","嵐":"岚","嵗":"岁","嵼":"𡶴","嵽":"𫶇","嵾":"㟥","嶁":"嵝","嶄":"崭","嶇":"岖","嶈":"𡺃","嶔":"嵚","嶗":"崂","嶘":"𡺄","嶠":"峤","嶢":"峣","嶧":"峄","嶨":"峃","嶮":"崄","嶸":"嵘","嶹":"𫝵","嶺":"岭","嶼":"屿","嶽":"岳","巊":"𪩎","巋":"岿","巒":"峦","巔":"巅","巖":"岩","巗":"𪨷","巘":"𪩘","巰":"巯","巹":"卺","帥":"帅","師":"师","帳":"帐","帶":"带","幀":"帧","幃":"帏","幓":"㡎","幗":"帼","幘":"帻","幝":"𪩷","幟":"帜","幣":"币","幩":"𪩸","幫":"帮","幬":"帱","幹":"干","幾":"几","庫":"库","廁":"厕","廂":"厢","廄":"厩","廈":"厦","廎":"庼","廕":"荫","廚":"厨","廝":"厮","廞":"𫷷","廟":"庙","廠":"厂","廡":"庑","廢":"废","廣":"广","廧":"𪪞","廩":"廪","廬":"庐","廳":"厅","弒":"弑","弔":"吊","弳":"弪","張":"张","強":"强","彃":"𪪼","彄":"𫸩","彆":"别","彈":"弹","彌":"弥","彎":"弯","彔":"录","彙":"汇","彠":"彟","彥":"彦","彫":"雕","彲":"彨","彷":"彷","彿":"佛","後":"后","徑":"径","從":"从","徠":"徕","復":"复","徵":"征","徹":"彻","徿":"𪫌","恆":"恒","恥":"耻","悅":"悦","悞":"悮","悵":"怅","悶":"闷","悽":"凄","惡":"恶","惱":"恼","惲":"恽","惻":"恻","愛":"爱","愜":"惬","愨":"悫","愴":"怆","愷":"恺","愻":"𢙏","愾":"忾","慄":"栗","態":"态","慍":"愠","慘":"惨","慚":"惭","慟":"恸","慣":"惯","慤":"悫","慪":"怄","慫":"怂","慮":"虑","慳":"悭","慶":"庆","慺":"㥪","慼":"戚","慾":"欲","憂":"忧","憊":"惫","憐":"怜","憑":"凭","憒":"愦","憖":"慭","憚":"惮","憢":"𢙒","憤":"愤","憫":"悯","憮":"怃","憲":"宪","憶":"忆","憸":"𪫺","憹":"𢙐","懀":"𢙓","懇":"恳","應":"应","懌":"怿","懍":"懔","懎":"𢠁","懞":"蒙","懟":"怼","懣":"懑","懤":"㤽","懨":"恹","懲":"惩","懶":"懒","懷":"怀","懸":"悬","懺":"忏","懼":"惧","懾":"慑","戀":"恋","戇":"戆","戔":"戋","戧":"戗","戩":"戬","戰":"战","戱":"戯","戲":"戏","戶":"户","拋":"抛","挩":"捝","挱":"挲","挾":"挟","捨":"舍","捫":"扪","捱":"挨","捲":"卷","掃":"扫","掄":"抡","掆":"㧏","掗":"挜","掙":"挣","掚":"𪭵","掛":"挂","採":"采","揀":"拣","揚":"扬","換":"换","揮":"挥","揯":"搄","損":"损","搖":"摇","搗":"捣","搵":"揾","搶":"抢","摋":"𢫬","摐":"𪭢","摑":"掴","摜":"掼","摟":"搂","摯":"挚","摳":"抠","摶":"抟","摺":"折","摻":"掺","撈":"捞","撊":"𪭾","撏":"挦","撐":"撑","撓":"挠","撝":"㧑","撟":"挢","撣":"掸","撥":"拨","撧":"𪮖","撫":"抚","撲":"扑","撳":"揿","撻":"挞","撾":"挝","撿":"捡","擁":"拥","擄":"掳","擇":"择","擊":"击","擋":"挡","擓":"㧟","擔":"担","據":"据","擟":"𪭧","擠":"挤","擣":"捣","擫":"𢬍","擬":"拟","擯":"摈","擰":"拧","擱":"搁","擲":"掷","擴":"扩","擷":"撷","擺":"摆","擻":"擞","擼":"撸","擽":"㧰","擾":"扰","攄":"摅","攆":"撵","攋":"𪮶","攏":"拢","攔":"拦","攖":"撄","攙":"搀","攛":"撺","攜":"携","攝":"摄","攢":"攒","攣":"挛","攤":"摊","攪":"搅","攬":"揽","敎":"教","敓":"敚","敗":"败","敘":"叙","敵":"敌","數":"数","斂":"敛","斃":"毙","斅":"𢽾","斆":"敩","斕":"斓","斬":"斩","斷":"断","斸":"𣃁","於":"于","旂":"旗","旣":"既","昇":"升","時":"时","晉":"晋","晛":"𬀪","晝":"昼","暈":"晕","暉":"晖","暐":"𬀩","暘":"旸","暢":"畅","暫":"暂","曄":"晔","曆":"历","曇":"昙","曉":"晓","曊":"𪰶","曏":"向","曖":"暧","曠":"旷","曥":"𣆐","曨":"昽","曬":"晒","書":"书","會":"会","朥":"𦛨","朧":"胧","朮":"术","東":"东","枴":"拐","柵":"栅","柺":"拐","査":"查","桱":"𣐕","桿":"杆","梔":"栀","梖":"𪱷","梘":"枧","梜":"𬂩","條":"条","梟":"枭","梲":"棁","棄":"弃","棊":"棋","棖":"枨","棗":"枣","棟":"栋","棡":"㭎","棧":"栈","棲":"栖","棶":"梾","椏":"桠","椲":"㭏","楇":"𣒌","楊":"杨","楓":"枫","楨":"桢","業":"业","極":"极","榘":"矩","榦":"干","榪":"杩","榮":"荣","榲":"榅","榿":"桤","構":"构","槍":"枪","槓":"杠","槤":"梿","槧":"椠","槨":"椁","槫":"𣏢","槮":"椮","槳":"桨","槶":"椢","槼":"椝","樁":"桩","樂":"乐","樅":"枞","樑":"梁","樓":"楼","標":"标","樞":"枢","樠":"𣗊","樢":"㭤","樣":"样","樤":"𣔌","樧":"榝","樫":"㭴","樳":"桪","樸":"朴","樹":"树","樺":"桦","樿":"椫","橈":"桡","橋":"桥","機":"机","橢":"椭","橫":"横","橯":"𣓿","檁":"檩","檉":"柽","檔":"档","檜":"桧","檟":"槚","檢":"检","檣":"樯","檭":"𣘴","檮":"梼","檯":"台","檳":"槟","檵":"𪲛","檸":"柠","檻":"槛","櫃":"柜","櫅":"𪲎","櫍":"𬃊","櫓":"橹","櫚":"榈","櫛":"栉","櫝":"椟","櫞":"橼","櫟":"栎","櫠":"𪲮","櫥":"橱","櫧":"槠","櫨":"栌","櫪":"枥","櫫":"橥","櫬":"榇","櫱":"蘖","櫳":"栊","櫸":"榉","櫻":"樱","欄":"栏","欅":"榉","欇":"𪳍","權":"权","欍":"𣐤","欏":"椤","欐":"𪲔","欑":"𪴙","欒":"栾","欓":"𣗋","欖":"榄","欘":"𣚚","欞":"棂","欽":"钦","歎":"叹","歐":"欧","歟":"欤","歡":"欢","歲":"岁","歷":"历","歸":"归","歿":"殁","殘":"残","殞":"殒","殢":"𣨼","殤":"殇","殨":"㱮","殫":"殚","殭":"僵","殮":"殓","殯":"殡","殰":"㱩","殲":"歼","殺":"杀","殻":"壳","殼":"壳","毀":"毁","毆":"殴","毊":"𪵑","毿":"毵","氂":"牦","氈":"毡","氌":"氇","氣":"气","氫":"氢","氬":"氩","氭":"𣱝","氳":"氲","氾":"泛","汎":"泛","汙":"污","決":"决","沒":"没","沖":"冲","況":"况","泝":"溯","洩":"泄","洶":"汹","浹":"浃","浿":"𬇙","涇":"泾","涗":"涚","涼":"凉","淒":"凄","淚":"泪","淥":"渌","淨":"净","淩":"凌","淪":"沦","淵":"渊","淶":"涞","淺":"浅","渙":"涣","減":"减","渢":"沨","渦":"涡","測":"测","渾":"浑","湊":"凑","湋":"𣲗","湞":"浈","湧":"涌","湯":"汤","溈":"沩","準":"准","溝":"沟","溡":"𪶄","溫":"温","溮":"浉","溳":"涢","溼":"湿","滄":"沧","滅":"灭","滌":"涤","滎":"荥","滙":"汇","滬":"沪","滯":"滞","滲":"渗","滷":"卤","滸":"浒","滻":"浐","滾":"滚","滿":"满","漁":"渔","漊":"溇","漍":"𬇹","漚":"沤","漢":"汉","漣":"涟","漬":"渍","漲":"涨","漵":"溆","漸":"渐","漿":"浆","潁":"颍","潑":"泼","潔":"洁","潕":"𣲘","潙":"沩","潚":"㴋","潛":"潜","潣":"𫞗","潤":"润","潯":"浔","潰":"溃","潷":"滗","潿":"涠","澀":"涩","澅":"𣶩","澆":"浇","澇":"涝","澐":"沄","澗":"涧","澠":"渑","澤":"泽","澦":"滪","澩":"泶","澫":"𬇕","澬":"𫞚","澮":"浍","澱":"淀","澾":"㳠","濁":"浊","濃":"浓","濄":"㳡","濆":"𣸣","濕":"湿","濘":"泞","濚":"溁","濛":"蒙","濜":"浕","濟":"济","濤":"涛","濧":"㳔","濫":"滥","濰":"潍","濱":"滨","濺":"溅","濼":"泺","濾":"滤","濿":"𪵱","瀂":"澛","瀃":"𣽷","瀅":"滢","瀆":"渎","瀇":"㲿","瀉":"泻","瀋":"沈","瀏":"浏","瀕":"濒","瀘":"泸","瀝":"沥","瀟":"潇","瀠":"潆","瀦":"潴","瀧":"泷","瀨":"濑","瀰":"弥","瀲":"潋","瀾":"澜","灃":"沣","灄":"滠","灍":"𫞝","灑":"洒","灒":"𪷽","灕":"漓","灘":"滩","灙":"𣺼","灝":"灏","灡":"㳕","灣":"湾","灤":"滦","灧":"滟","灩":"滟","災":"灾","為":"为","烏":"乌","烴":"烃","無":"无","煇":"𪸩","煉":"炼","煒":"炜","煙":"烟","煢":"茕","煥":"焕","煩":"烦","煬":"炀","煱":"㶽","熂":"𪸕","熅":"煴","熉":"𤈶","熌":"𤇄","熒":"荧","熓":"𤆡","熗":"炝","熚":"𤇹","熡":"𤋏","熰":"𬉼","熱":"热","熲":"颎","熾":"炽","燀":"𬊤","燁":"烨","燈":"灯","燉":"炖","燒":"烧","燖":"𬊈","燙":"烫","燜":"焖","營":"营","燦":"灿","燬":"毁","燭":"烛","燴":"烩","燶":"㶶","燻":"熏","燼":"烬","燾":"焘","爃":"𫞡","爄":"𤇃","爇":"𦶟","爍":"烁","爐":"炉","爖":"𤇭","爛":"烂","爥":"𪹳","爧":"𫞠","爭":"争","爲":"为","爺":"爷","爾":"尔","牀":"床","牆":"墙","牘":"牍","牴":"牴","牽":"牵","犖":"荦","犛":"牦","犞":"𪺭","犢":"犊","犧":"牺","狀":"状","狹":"狭","狽":"狈","猌":"𪺽","猙":"狰","猶":"犹","猻":"狲","獁":"犸","獃":"呆","獄":"狱","獅":"狮","獊":"𪺷","獎":"奖","獨":"独","獩":"𤞃","獪":"狯","獫":"猃","獮":"狝","獰":"狞","獱":"㺍","獲":"获","獵":"猎","獷":"犷","獸":"兽","獺":"獭","獻":"献","獼":"猕","玀":"猡","玁":"𤞤","珼":"𫞥","現":"现","琱":"雕","琺":"珐","琿":"珲","瑋":"玮","瑒":"玚","瑣":"琐","瑤":"瑶","瑩":"莹","瑪":"玛","瑲":"玱","瑻":"𪻲","瑽":"𪻐","璉":"琏","璊":"𫞩","璕":"𬍤","璗":"𬍡","璝":"𪻺","璡":"琎","璣":"玑","璦":"瑷","璫":"珰","璯":"㻅","環":"环","璵":"玙","璸":"瑸","璼":"𫞨","璽":"玺","璾":"𫞦","璿":"璇","瓄":"𪻨","瓅":"𬍛","瓊":"琼","瓏":"珑","瓔":"璎","瓕":"𤦀","瓚":"瓒","瓛":"𤩽","甌":"瓯","甕":"瓮","產":"产","産":"产","甦":"苏","甯":"宁","畝":"亩","畢":"毕","畫":"画","異":"异","畵":"画","當":"当","畼":"𪽈","疇":"畴","疊":"叠","痙":"痉","痠":"酸","痮":"𪽪","痾":"疴","瘂":"痖","瘋":"疯","瘍":"疡","瘓":"痪","瘞":"瘗","瘡":"疮","瘧":"疟","瘮":"瘆","瘱":"𪽷","瘲":"疭","瘺":"瘘","瘻":"瘘","療":"疗","癆":"痨","癇":"痫","癉":"瘅","癐":"𤶊","癒":"愈","癘":"疠","癟":"瘪","癡":"痴","癢":"痒","癤":"疖","癥":"症","癧":"疬","癩":"癞","癬":"癣","癭":"瘿","癮":"瘾","癰":"痈","癱":"瘫","癲":"癫","發":"发","皁":"皂","皚":"皑","皟":"𤾀","皰":"疱","皸":"皲","皺":"皱","盃":"杯","盜":"盗","盞":"盏","盡":"尽","監":"监","盤":"盘","盧":"卢","盨":"𪾔","盪":"荡","眝":"𪾣","眞":"真","眥":"眦","眾":"众","睍":"𪾢","睏":"困","睜":"睁","睞":"睐","瞘":"眍","瞜":"䁖","瞞":"瞒","瞤":"𥆧","瞭":"瞭","瞶":"瞆","瞼":"睑","矇":"蒙","矉":"𪾸","矑":"𪾦","矓":"眬","矚":"瞩","矯":"矫","硃":"朱","硜":"硁","硤":"硖","硨":"砗","硯":"砚","碕":"埼","碙":"𥐻","碩":"硕","碭":"砀","碸":"砜","確":"确","碼":"码","碽":"䂵","磑":"硙","磚":"砖","磠":"硵","磣":"碜","磧":"碛","磯":"矶","磽":"硗","磾":"䃅","礄":"硚","礆":"硷","礎":"础","礐":"𬒈","礒":"𥐟","礙":"碍","礦":"矿","礪":"砺","礫":"砾","礬":"矾","礮":"𪿫","礱":"砻","祇":"祇","祕":"秘","祿":"禄","禍":"祸","禎":"祯","禕":"祎","禡":"祃","禦":"御","禪":"禅","禮":"礼","禰":"祢","禱":"祷","禿":"秃","秈":"籼","稅":"税","稈":"秆","稏":"䅉","稜":"棱","稟":"禀","種":"种","稱":"称","穀":"谷","穇":"䅟","穌":"稣","積":"积","穎":"颖","穠":"秾","穡":"穑","穢":"秽","穩":"稳","穫":"获","穭":"穞","窩":"窝","窪":"洼","窮":"穷","窯":"窑","窵":"窎","窶":"窭","窺":"窥","竄":"窜","竅":"窍","竇":"窦","竈":"灶","竊":"窃","竚":"𥩟","竪":"竖","竱":"𫁟","競":"竞","筆":"笔","筍":"笋","筧":"笕","筴":"䇲","箇":"个","箋":"笺","箏":"筝","節":"节","範":"范","築":"筑","篋":"箧","篔":"筼","篘":"𥬠","篠":"筿","篢":"𬕂","篤":"笃","篩":"筛","篳":"筚","篸":"𥮾","簀":"箦","簂":"𫂆","簍":"篓","簑":"蓑","簞":"箪","簡":"简","簢":"𫂃","簣":"篑","簫":"箫","簹":"筜","簽":"签","簾":"帘","籃":"篮","籅":"𥫣","籋":"𥬞","籌":"筹","籔":"䉤","籙":"箓","籛":"篯","籜":"箨","籟":"籁","籠":"笼","籤":"签","籩":"笾","籪":"簖","籬":"篱","籮":"箩","籲":"吁","粵":"粤","糉":"粽","糝":"糁","糞":"粪","糧":"粮","糰":"团","糲":"粝","糴":"籴","糶":"粜","糹":"纟","糺":"𫄙","糾":"纠","紀":"纪","紂":"纣","紃":"𬘓","約":"约","紅":"红","紆":"纡","紇":"纥","紈":"纨","紉":"纫","紋":"纹","納":"纳","紐":"纽","紓":"纾","純":"纯","紕":"纰","紖":"纼","紗":"纱","紘":"纮","紙":"纸","級":"级","紛":"纷","紜":"纭","紝":"纴","紞":"𬘘","紟":"𫄛","紡":"纺","紬":"䌷","紮":"扎","細":"细","紱":"绂","紲":"绁","紳":"绅","紵":"纻","紹":"绍","紺":"绀","紼":"绋","紿":"绐","絀":"绌","絁":"𫄟","終":"终","絃":"弦","組":"组","絅":"䌹","絆":"绊","絍":"𫟃","絎":"绗","結":"结","絕":"绝","絙":"𫄠","絛":"绦","絝":"绔","絞":"绞","絡":"络","絢":"绚","絥":"𫄢","給":"给","絧":"𫄡","絨":"绒","絪":"𬘡","絰":"绖","統":"统","絲":"丝","絳":"绛","絶":"绝","絹":"绢","絺":"𫄨","綀":"𦈌","綁":"绑","綃":"绡","綄":"𬘫","綆":"绠","綇":"𦈋","綈":"绨","綉":"绣","綋":"𫟄","綌":"绤","綎":"𬘩","綏":"绥","綐":"䌼","綑":"捆","經":"经","綖":"𫄧","綜":"综","綝":"𬘭","綞":"缍","綟":"𫄫","綠":"绿","綡":"𫟅","綢":"绸","綣":"绻","綧":"𬘯","綪":"𬘬","綫":"线","綬":"绶","維":"维","綯":"绹","綰":"绾","綱":"纲","網":"网","綳":"绷","綴":"缀","綵":"彩","綸":"纶","綹":"绺","綺":"绮","綻":"绽","綽":"绰","綾":"绫","綿":"绵","緄":"绲","緇":"缁","緊":"紧","緋":"绯","緍":"𦈏","緑":"绿","緒":"绪","緓":"绬","緔":"绱","緗":"缃","緘":"缄","緙":"缂","線":"线","緝":"缉","緞":"缎","緟":"𫟆","締":"缔","緡":"缗","緣":"缘","緤":"𫄬","緦":"缌","編":"编","緩":"缓","緬":"缅","緮":"𫄭","緯":"纬","緰":"𦈕","緱":"缑","緲":"缈","練":"练","緶":"缏","緷":"𦈉","緸":"𦈑","緹":"缇","緻":"致","緼":"缊","縈":"萦","縉":"缙","縊":"缢","縋":"缒","縍":"𫄰","縎":"𦈔","縐":"绉","縑":"缣","縕":"缊","縗":"缞","縛":"缚","縝":"缜","縞":"缟","縟":"缛","縣":"县","縧":"绦","縫":"缝","縬":"𦈚","縭":"缡","縮":"缩","縯":"𬙂","縰":"𫄳","縱":"纵","縲":"缧","縳":"䌸","縴":"纤","縵":"缦","縶":"絷","縷":"缕","縸":"𫄲","縹":"缥","縺":"𦈐","總":"总","績":"绩","繂":"𫄴","繃":"绷","繅":"缫","繆":"缪","繈":"𫄶","繏":"𦈝","繐":"𰬸","繒":"缯","繓":"𦈛","織":"织","繕":"缮","繚":"缭","繞":"绕","繟":"𦈎","繡":"绣","繢":"缋","繨":"𫄤","繩":"绳","繪":"绘","繫":"系","繬":"𫄱","繭":"茧","繮":"缰","繯":"缳","繰":"缲","繳":"缴","繶":"𫄷","繷":"𫄣","繸":"䍁","繹":"绎","繻":"𦈡","繼":"继","繽":"缤","繾":"缱","繿":"䍀","纁":"𫄸","纆":"𬙊","纇":"颣","纈":"缬","纊":"纩","續":"续","纍":"累","纏":"缠","纓":"缨","纔":"才","纕":"𬙋","纖":"纤","纗":"𫄹","纘":"缵","纚":"𫄥","纜":"缆","缽":"钵","罃":"䓨","罈":"坛","罌":"罂","罎":"坛","罰":"罚","罵":"骂","罷":"罢","羅":"罗","羆":"罴","羈":"羁","羋":"芈","羣":"群","羥":"羟","羨":"羡","義":"义","羵":"𫅗","羶":"膻","習":"习","翫":"玩","翬":"翚","翹":"翘","翽":"翙","耬":"耧","耮":"耢","聖":"圣","聞":"闻","聯":"联","聰":"聪","聲":"声","聳":"耸","聵":"聩","聶":"聂","職":"职","聹":"聍","聻":"𫆏","聽":"听","聾":"聋","肅":"肃","脅":"胁","脈":"脉","脛":"胫","脣":"唇","脥":"𣍰","脩":"修","脫":"脱","脹":"胀","腎":"肾","腖":"胨","腡":"脶","腦":"脑","腪":"𣍯","腫":"肿","腳":"脚","腸":"肠","膃":"腽","膕":"腘","膚":"肤","膞":"䏝","膠":"胶","膢":"𦝼","膩":"腻","膹":"𪱥","膽":"胆","膾":"脍","膿":"脓","臉":"脸","臍":"脐","臏":"膑","臗":"𣎑","臘":"腊","臚":"胪","臟":"脏","臠":"脔","臢":"臜","臥":"卧","臨":"临","臺":"台","與":"与","興":"兴","舉":"举","舊":"旧","舘":"馆","艙":"舱","艣":"𫇛","艤":"舣","艦":"舰","艫":"舻","艱":"艰","艷":"艳","芻":"刍","苧":"苎","茲":"兹","荊":"荆","莊":"庄","莖":"茎","莢":"荚","莧":"苋","菕":"𰰨","華":"华","菴":"庵","菸":"烟","萇":"苌","萊":"莱","萬":"万","萴":"荝","萵":"莴","葉":"叶","葒":"荭","葝":"𫈎","葤":"荮","葦":"苇","葯":"药","葷":"荤","蒍":"𫇭","蒐":"搜","蒓":"莼","蒔":"莳","蒕":"蒀","蒞":"莅","蒭":"𫇴","蒼":"苍","蓀":"荪","蓆":"席","蓋":"盖","蓧":"𦰏","蓮":"莲","蓯":"苁","蓴":"莼","蓽":"荜","蔄":"𬜬","蔔":"卜","蔘":"参","蔞":"蒌","蔣":"蒋","蔥":"葱","蔦":"茑","蔭":"荫","蔯":"𫈟","蔿":"𫇭","蕁":"荨","蕆":"蒇","蕎":"荞","蕒":"荬","蕓":"芸","蕕":"莸","蕘":"荛","蕝":"𫈵","蕢":"蒉","蕩":"荡","蕪":"芜","蕭":"萧","蕳":"𫈉","蕷":"蓣","蕽":"𫇽","薀":"蕰","薆":"𫉁","薈":"荟","薊":"蓟","薌":"芗","薑":"姜","薔":"蔷","薘":"荙","薟":"莶","薦":"荐","薩":"萨","薳":"䓕","薴":"苧","薵":"䓓","薹":"苔","薺":"荠","藉":"藉","藍":"蓝","藎":"荩","藝":"艺","藥":"药","藪":"薮","藭":"䓖","藴":"蕴","藶":"苈","藷":"𫉄","藹":"蔼","藺":"蔺","蘀":"萚","蘄":"蕲","蘆":"芦","蘇":"苏","蘊":"蕴","蘋":"苹","蘚":"藓","蘞":"蔹","蘟":"𦻕","蘢":"茏","蘭":"兰","蘺":"蓠","蘿":"萝","虆":"蔂","虉":"𬟁","處":"处","虛":"虚","虜":"虏","號":"号","虧":"亏","虯":"虬","蛺":"蛱","蛻":"蜕","蜆":"蚬","蝀":"𬟽","蝕":"蚀","蝟":"猬","蝦":"虾","蝨":"虱","蝸":"蜗","螄":"蛳","螞":"蚂","螢":"萤","螮":"䗖","螻":"蝼","螿":"螀","蟂":"𫋇","蟄":"蛰","蟈":"蝈","蟎":"螨","蟘":"𫋌","蟜":"𫊸","蟣":"虮","蟬":"蝉","蟯":"蛲","蟲":"虫","蟳":"𫊻","蟶":"蛏","蟻":"蚁","蠀":"𧏗","蠁":"蚃","蠅":"蝇","蠆":"虿","蠍":"蝎","蠐":"蛴","蠑":"蝾","蠔":"蚝","蠙":"𧏖","蠟":"蜡","蠣":"蛎","蠦":"𫊮","蠨":"蟏","蠱":"蛊","蠶":"蚕","蠻":"蛮","蠾":"𧑏","衆":"众","衊":"蔑","術":"术","衕":"同","衚":"胡","衛":"卫","衝":"冲","衹":"衹","袞":"衮","裊":"袅","裏":"里","補":"补","裝":"装","裡":"里","製":"制","複":"复","褌":"裈","褘":"袆","褲":"裤","褳":"裢","褸":"褛","褻":"亵","襀":"𫌀","襇":"裥","襉":"裥","襏":"袯","襓":"𫋹","襖":"袄","襗":"𫋷","襘":"𫋻","襝":"裣","襠":"裆","襤":"褴","襪":"袜","襬":"摆","襯":"衬","襰":"𧝝","襲":"袭","襴":"襕","襵":"𫌇","覆":"覆","覈":"核","見":"见","覎":"觃","規":"规","覓":"觅","視":"视","覘":"觇","覛":"𫌪","覡":"觋","覥":"觍","覦":"觎","親":"亲","覬":"觊","覯":"觏","覲":"觐","覷":"觑","覹":"𫌭","覺":"觉","覼":"𫌨","覽":"览","覿":"觌","觀":"观","觴":"觞","觶":"觯","觸":"触","訁":"讠","訂":"订","訃":"讣","計":"计","訊":"讯","訌":"讧","討":"讨","訏":"𬣙","訐":"讦","訑":"𫍙","訒":"讱","訓":"训","訕":"讪","訖":"讫","託":"托","記":"记","訛":"讹","訜":"𫍛","訝":"讶","訞":"𫍚","訟":"讼","訢":"䜣","訣":"诀","訥":"讷","訨":"𫟞","訩":"讻","訪":"访","設":"设","許":"许","訴":"诉","訶":"诃","診":"诊","註":"注","証":"证","詀":"𧮪","詁":"诂","詆":"诋","詊":"𫟟","詎":"讵","詐":"诈","詑":"𫍡","詒":"诒","詓":"𫍜","詔":"诏","評":"评","詖":"诐","詗":"诇","詘":"诎","詛":"诅","詝":"𬣞","詞":"词","詠":"咏","詡":"诩","詢":"询","詣":"诣","試":"试","詩":"诗","詪":"𬣳","詫":"诧","詬":"诟","詭":"诡","詮":"诠","詰":"诘","話":"话","該":"该","詳":"详","詵":"诜","詷":"𫍣","詼":"诙","詿":"诖","誂":"𫍥","誄":"诔","誅":"诛","誆":"诓","誇":"夸","誋":"𫍪","誌":"志","認":"认","誑":"诳","誒":"诶","誕":"诞","誘":"诱","誚":"诮","語":"语","誠":"诚","誡":"诫","誣":"诬","誤":"误","誥":"诰","誦":"诵","誨":"诲","說":"说","誫":"𫍨","説":"说","誰":"谁","課":"课","誳":"𫍮","誴":"𫟡","誶":"谇","誷":"𫍬","誹":"诽","誺":"𫍧","誼":"谊","誾":"訚","調":"调","諂":"谄","諄":"谆","談":"谈","諉":"诿","請":"请","諍":"诤","諏":"诹","諑":"诼","諒":"谅","諓":"𬣡","論":"论","諗":"谂","諛":"谀","諜":"谍","諝":"谞","諞":"谝","諟":"𬤊","諡":"谥","諢":"诨","諣":"𫍩","諤":"谔","諥":"𫍳","諦":"谛","諧":"谐","諫":"谏","諭":"谕","諮":"咨","諯":"𫍱","諰":"𫍰","諱":"讳","諲":"𬤇","諳":"谙","諴":"𫍯","諶":"谌","諷":"讽","諸":"诸","諺":"谚","諼":"谖","諾":"诺","謀":"谋","謁":"谒","謂":"谓","謄":"誊","謅":"诌","謆":"𫍸","謉":"𫍷","謊":"谎","謎":"谜","謏":"𫍲","謐":"谧","謔":"谑","謖":"谡","謗":"谤","謙":"谦","謚":"谥","講":"讲","謝":"谢","謠":"谣","謡":"谣","謨":"谟","謫":"谪","謬":"谬","謭":"谫","謯":"𫍹","謱":"𫍴","謳":"讴","謸":"𫍵","謹":"谨","謾":"谩","譁":"哗","譂":"𫟠","譅":"𰶎","譆":"𫍻","證":"证","譊":"𫍢","譎":"谲","譏":"讥","譑":"𫍤","譓":"𬤝","譖":"谮","識":"识","譙":"谯","譚":"谭","譜":"谱","譞":"𫍽","譟":"噪","譨":"𫍦","譫":"谵","譭":"毁","譯":"译","議":"议","譴":"谴","護":"护","譸":"诪","譽":"誉","譾":"谫","讀":"读","讅":"谉","變":"变","讋":"詟","讌":"䜩","讎":"雠","讒":"谗","讓":"让","讕":"谰","讖":"谶","讚":"赞","讜":"谠","讞":"谳","豈":"岂","豎":"竖","豐":"丰","豔":"艳","豬":"猪","豵":"𫎆","豶":"豮","貓":"猫","貗":"𫎌","貙":"䝙","貝":"贝","貞":"贞","貟":"贠","負":"负","財":"财","貢":"贡","貧":"贫","貨":"货","販":"贩","貪":"贪","貫":"贯","責":"责","貯":"贮","貰":"贳","貲":"赀","貳":"贰","貴":"贵","貶":"贬","買":"买","貸":"贷","貺":"贶","費":"费","貼":"贴","貽":"贻","貿":"贸","賀":"贺","賁":"贲","賂":"赂","賃":"赁","賄":"贿","賅":"赅","資":"资","賈":"贾","賊":"贼","賑":"赈","賒":"赊","賓":"宾","賕":"赇","賙":"赒","賚":"赉","賜":"赐","賝":"𫎩","賞":"赏","賟":"𧹖","賠":"赔","賡":"赓","賢":"贤","賣":"卖","賤":"贱","賦":"赋","賧":"赕","質":"质","賫":"赍","賬":"账","賭":"赌","賰":"䞐","賴":"赖","賵":"赗","賺":"赚","賻":"赙","購":"购","賽":"赛","賾":"赜","贃":"𧹗","贄":"贽","贅":"赘","贇":"赟","贈":"赠","贉":"𫎫","贊":"赞","贋":"赝","贍":"赡","贏":"赢","贐":"赆","贑":"𫎬","贓":"赃","贔":"赑","贖":"赎","贗":"赝","贚":"𫎦","贛":"赣","贜":"赃","赬":"赪","趕":"赶","趙":"赵","趨":"趋","趲":"趱","跡":"迹","踐":"践","踰":"逾","踴":"踊","蹌":"跄","蹔":"𫏐","蹕":"跸","蹟":"迹","蹠":"跖","蹣":"蹒","蹤":"踪","蹳":"𫏆","蹺":"跷","蹻":"𫏋","躂":"跶","躉":"趸","躊":"踌","躋":"跻","躍":"跃","躎":"䟢","躑":"踯","躒":"跞","躓":"踬","躕":"蹰","躘":"𨀁","躚":"跹","躝":"𨅬","躡":"蹑","躥":"蹿","躦":"躜","躪":"躏","軀":"躯","軉":"𨉗","車":"车","軋":"轧","軌":"轨","軍":"军","軏":"𫐄","軑":"轪","軒":"轩","軔":"轫","軕":"𫐅","軗":"𨐅","軛":"轭","軜":"𫐇","軝":"𬨂","軟":"软","軤":"轷","軨":"𫐉","軫":"轸","軬":"𫐊","軲":"轱","軷":"𫐈","軸":"轴","軹":"轵","軺":"轺","軻":"轲","軼":"轶","軾":"轼","軿":"𫐌","較":"较","輄":"𨐈","輅":"辂","輇":"辁","輈":"辀","載":"载","輊":"轾","輋":"𪨶","輒":"辄","輓":"挽","輔":"辅","輕":"轻","輖":"𫐏","輗":"𫐐","輛":"辆","輜":"辎","輝":"辉","輞":"辋","輟":"辍","輢":"𫐎","輥":"辊","輦":"辇","輨":"𫐑","輩":"辈","輪":"轮","輬":"辌","輮":"𫐓","輯":"辑","輳":"辏","輶":"𬨎","輷":"𫐒","輸":"输","輻":"辐","輼":"辒","輾":"辗","輿":"舆","轀":"辒","轂":"毂","轄":"辖","轅":"辕","轆":"辘","轇":"𫐖","轉":"转","轊":"𫐕","轍":"辙","轎":"轿","轐":"𫐗","轔":"辚","轗":"𫐘","轟":"轰","轠":"𫐙","轡":"辔","轢":"轹","轣":"𫐆","轤":"轳","辦":"办","辭":"辞","辮":"辫","辯":"辩","農":"农","迴":"回","逕":"迳","這":"这","連":"连","週":"周","進":"进","遊":"游","運":"运","過":"过","達":"达","違":"违","遙":"遥","遜":"逊","遞":"递","遠":"远","遡":"溯","適":"适","遱":"𫐷","遲":"迟","遷":"迁","選":"选","遺":"遗","遼":"辽","邁":"迈","還":"还","邇":"迩","邊":"边","邏":"逻","邐":"逦","郟":"郏","郵":"邮","鄆":"郓","鄉":"乡","鄒":"邹","鄔":"邬","鄖":"郧","鄟":"𫑘","鄧":"邓","鄩":"𬩽","鄭":"郑","鄰":"邻","鄲":"郸","鄳":"𫑡","鄴":"邺","鄶":"郐","鄺":"邝","酇":"酂","酈":"郦","醃":"腌","醖":"酝","醜":"丑","醞":"酝","醟":"蒏","醣":"糖","醫":"医","醬":"酱","醱":"酦","醲":"𬪩","醶":"𫑷","釀":"酿","釁":"衅","釃":"酾","釅":"酽","釋":"释","釐":"厘","釒":"钅","釓":"钆","釔":"钇","釕":"钌","釗":"钊","釘":"钉","釙":"钋","釚":"𫟲","針":"针","釟":"𫓥","釣":"钓","釤":"钐","釦":"扣","釧":"钏","釨":"𫓦","釩":"钒","釲":"𫟳","釳":"𨰿","釴":"𬬩","釵":"钗","釷":"钍","釹":"钕","釺":"钎","釾":"䥺","釿":"𬬱","鈀":"钯","鈁":"钫","鈃":"钘","鈄":"钭","鈅":"钥","鈆":"𫓪","鈇":"𫓧","鈈":"钚","鈉":"钠","鈋":"𨱂","鈍":"钝","鈎":"钩","鈐":"钤","鈑":"钣","鈒":"钑","鈔":"钞","鈕":"钮","鈖":"𫟴","鈗":"𫟵","鈛":"𫓨","鈞":"钧","鈠":"𨱁","鈡":"钟","鈣":"钙","鈥":"钬","鈦":"钛","鈧":"钪","鈮":"铌","鈯":"𨱄","鈰":"铈","鈲":"𨱃","鈳":"钶","鈴":"铃","鈷":"钴","鈸":"钹","鈹":"铍","鈺":"钰","鈽":"钸","鈾":"铀","鈿":"钿","鉀":"钾","鉁":"𨱅","鉅":"巨","鉆":"钻","鉈":"铊","鉉":"铉","鉊":"𬬿","鉋":"铇","鉍":"铋","鉑":"铂","鉔":"𫓬","鉕":"钷","鉗":"钳","鉚":"铆","鉛":"铅","鉝":"𫟷","鉞":"钺","鉠":"𫓭","鉢":"钵","鉤":"钩","鉥":"𬬸","鉦":"钲","鉧":"𬭁","鉬":"钼","鉭":"钽","鉮":"𬬹","鉳":"锫","鉶":"铏","鉷":"𫟹","鉸":"铰","鉺":"铒","鉻":"铬","鉽":"𫟸","鉾":"𫓴","鉿":"铪","銀":"银","銁":"𫓲","銂":"𫟻","銃":"铳","銅":"铜","銈":"𫓯","銊":"𫓰","銍":"铚","銏":"𫟶","銑":"铣","銓":"铨","銖":"铢","銘":"铭","銚":"铫","銛":"铦","銜":"衔","銠":"铑","銣":"铷","銥":"铱","銦":"铟","銨":"铵","銩":"铥","銪":"铕","銫":"铯","銬":"铐","銱":"铞","銳":"锐","銶":"𨱇","銷":"销","銹":"锈","銻":"锑","銼":"锉","鋁":"铝","鋂":"𰾄","鋃":"锒","鋅":"锌","鋇":"钡","鋉":"𨱈","鋌":"铤","鋏":"铗","鋐":"𬭎","鋒":"锋","鋗":"𫓶","鋙":"铻","鋝":"锊","鋟":"锓","鋠":"𫓵","鋣":"铘","鋤":"锄","鋥":"锃","鋦":"锔","鋨":"锇","鋩":"铓","鋪":"铺","鋭":"锐","鋮":"铖","鋯":"锆","鋰":"锂","鋱":"铽","鋶":"锍","鋸":"锯","鋹":"𬬮","鋼":"钢","錀":"𬬭","錁":"锞","錂":"𨱋","錄":"录","錆":"锖","錇":"锫","錈":"锩","錏":"铔","錐":"锥","錒":"锕","錕":"锟","錘":"锤","錙":"锱","錚":"铮","錛":"锛","錜":"𫓻","錝":"𫓽","錞":"𬭚","錟":"锬","錠":"锭","錡":"锜","錢":"钱","錤":"𫓹","錥":"𫓾","錦":"锦","錨":"锚","錩":"锠","錫":"锡","錮":"锢","錯":"错","録":"录","錳":"锰","錶":"表","錸":"铼","錼":"镎","錽":"𫓸","鍀":"锝","鍁":"锨","鍃":"锪","鍄":"𨱉","鍅":"钫","鍆":"钔","鍇":"锴","鍈":"锳","鍉":"𫔂","鍊":"炼","鍋":"锅","鍍":"镀","鍒":"𫔄","鍔":"锷","鍘":"铡","鍚":"钖","鍛":"锻","鍠":"锽","鍤":"锸","鍥":"锲","鍩":"锘","鍬":"锹","鍭":"𬭤","鍮":"𨱎","鍰":"锾","鍵":"键","鍶":"锶","鍺":"锗","鍼":"针","鍾":"钟","鎂":"镁","鎄":"锿","鎇":"镅","鎈":"𫟿","鎊":"镑","鎌":"镰","鎍":"𫔅","鎓":"𬭩","鎔":"镕","鎖":"锁","鎘":"镉","鎙":"𫔈","鎚":"锤","鎛":"镈","鎝":"𨱏","鎞":"𫔇","鎡":"镃","鎢":"钨","鎣":"蓥","鎦":"镏","鎧":"铠","鎩":"铩","鎪":"锼","鎬":"镐","鎭":"镇","鎮":"镇","鎯":"𨱍","鎰":"镒","鎲":"镋","鎳":"镍","鎵":"镓","鎶":"鿔","鎷":"𨰾","鎸":"镌","鎿":"镎","鏃":"镞","鏆":"𨱌","鏇":"旋","鏈":"链","鏉":"𨱒","鏌":"镆","鏍":"镙","鏏":"𬭬","鏐":"镠","鏑":"镝","鏗":"铿","鏘":"锵","鏚":"𬭭","鏜":"镗","鏝":"镘","鏞":"镛","鏟":"铲","鏡":"镜","鏢":"镖","鏤":"镂","鏥":"𫔊","鏦":"𫓩","鏨":"錾","鏰":"镚","鏵":"铧","鏷":"镤","鏹":"镪","鏺":"䥽","鏻":"𬭸","鏽":"锈","鏾":"𫔌","鐃":"铙","鐄":"𨱑","鐇":"𫔍","鐈":"𫓱","鐋":"铴","鐍":"𫔎","鐎":"𨱓","鐏":"𨱔","鐐":"镣","鐒":"铹","鐓":"镦","鐔":"镡","鐘":"钟","鐙":"镫","鐝":"镢","鐠":"镨","鐥":"䦅","鐦":"锎","鐧":"锏","鐨":"镄","鐩":"𬭼","鐪":"𫓺","鐫":"镌","鐮":"镰","鐯":"䦃","鐲":"镯","鐳":"镭","鐵":"铁","鐶":"镮","鐸":"铎","鐺":"铛","鐼":"𫔁","鐽":"𫟼","鐿":"镱","鑀":"𰾭","鑄":"铸","鑉":"𫠁","鑊":"镬","鑌":"镔","鑑":"鉴","鑒":"鉴","鑔":"镲","鑕":"锧","鑞":"镴","鑠":"铄","鑣":"镳","鑥":"镥","鑪":"𬬻","鑭":"镧","鑰":"钥","鑱":"镵","鑲":"镶","鑴":"𫔔","鑷":"镊","鑹":"镩","鑼":"锣","鑽":"钻","鑾":"銮","鑿":"凿","钁":"镢","钂":"镋","長":"长","門":"门","閂":"闩","閃":"闪","閆":"闫","閈":"闬","閉":"闭","開":"开","閌":"闶","閍":"𨸂","閎":"闳","閏":"闰","閐":"𨸃","閑":"闲","閒":"闲","間":"间","閔":"闵","閗":"𫔯","閘":"闸","閝":"𫠂","閞":"𫔰","閡":"阂","閣":"阁","閤":"合","閥":"阀","閨":"闺","閩":"闽","閫":"阃","閬":"阆","閭":"闾","閱":"阅","閲":"阅","閵":"𫔴","閶":"阊","閹":"阉","閻":"阎","閼":"阏","閽":"阍","閾":"阈","閿":"阌","闃":"阒","闆":"板","闇":"暗","闈":"闱","闉":"𬮱","闊":"阔","闋":"阕","闌":"阑","闍":"阇","闐":"阗","闑":"𫔶","闒":"阘","闓":"闿","闔":"阖","闕":"阙","闖":"闯","關":"关","闞":"阚","闠":"阓","闡":"阐","闢":"辟","闤":"阛","闥":"闼","阪":"阪","陘":"陉","陝":"陕","陞":"升","陣":"阵","陰":"阴","陳":"陈","陸":"陆","陽":"阳","隉":"陧","隊":"队","階":"阶","隑":"𬮿","隕":"陨","際":"际","隤":"𬯎","隨":"随","險":"险","隮":"𬯀","隯":"陦","隱":"隐","隴":"陇","隸":"隶","隻":"只","雋":"隽","雖":"虽","雙":"双","雛":"雏","雜":"杂","雞":"鸡","離":"离","難":"难","雲":"云","電":"电","霑":"沾","霢":"霡","霣":"𫕥","霧":"雾","霼":"𪵣","霽":"霁","靂":"雳","靄":"霭","靆":"叇","靈":"灵","靉":"叆","靚":"靓","靜":"静","靝":"靔","靦":"腼","靧":"𫖃","靨":"靥","鞏":"巩","鞝":"绱","鞦":"秋","鞽":"鞒","鞾":"𫖇","韁":"缰","韃":"鞑","韆":"千","韉":"鞯","韋":"韦","韌":"韧","韍":"韨","韓":"韩","韙":"韪","韚":"𫠅","韛":"𫖔","韜":"韬","韝":"鞲","韞":"韫","韠":"𫖒","韻":"韵","響":"响","頁":"页","頂":"顶","頃":"顷","項":"项","順":"顺","頇":"顸","須":"须","頊":"顼","頌":"颂","頍":"𫠆","頎":"颀","頏":"颃","預":"预","頑":"顽","頒":"颁","頓":"顿","頔":"𬱖","頗":"颇","領":"领","頜":"颌","頠":"𬱟","頡":"颉","頤":"颐","頦":"颏","頫":"𫖯","頭":"头","頮":"颒","頰":"颊","頲":"颋","頴":"颕","頵":"𫖳","頷":"颔","頸":"颈","頹":"颓","頻":"频","頽":"颓","顂":"𩓋","顃":"𩖖","顅":"𫖶","顆":"颗","題":"题","額":"额","顎":"颚","顏":"颜","顒":"颙","顓":"颛","顔":"颜","顗":"𫖮","願":"愿","顙":"颡","顛":"颠","類":"类","顢":"颟","顣":"𫖹","顥":"颢","顧":"顾","顫":"颤","顬":"颥","顯":"显","顰":"颦","顱":"颅","顳":"颞","顴":"颧","風":"风","颭":"飐","颮":"飑","颯":"飒","颰":"𩙥","颱":"台","颳":"刮","颶":"飓","颷":"𩙪","颸":"飔","颺":"飏","颻":"飖","颼":"飕","颾":"𩙫","飀":"飗","飄":"飘","飆":"飙","飈":"飚","飋":"𫗋","飛":"飞","飠":"饣","飢":"饥","飣":"饤","飥":"饦","飦":"𫗞","飩":"饨","飪":"饪","飫":"饫","飭":"饬","飯":"饭","飱":"飧","飲":"饮","飴":"饴","飵":"𫗢","飶":"𫗣","飼":"饲","飽":"饱","飾":"饰","飿":"饳","餃":"饺","餄":"饸","餅":"饼","餈":"糍","餉":"饷","養":"养","餌":"饵","餎":"饹","餏":"饻","餑":"饽","餒":"馁","餓":"饿","餔":"𫗦","餕":"馂","餖":"饾","餗":"𫗧","餘":"余","餚":"肴","餛":"馄","餜":"馃","餞":"饯","餡":"馅","餦":"𫗠","餧":"𫗪","館":"馆","餪":"𫗬","餫":"𫗥","餬":"糊","餭":"𫗮","餱":"糇","餳":"饧","餵":"喂","餶":"馉","餷":"馇","餸":"𩠌","餺":"馎","餼":"饩","餾":"馏","餿":"馊","饁":"馌","饃":"馍","饅":"馒","饈":"馐","饉":"馑","饊":"馓","饋":"馈","饌":"馔","饑":"饥","饒":"饶","饗":"飨","饘":"𫗴","饜":"餍","饞":"馋","饟":"𫗵","饠":"𫗩","饢":"馕","馬":"马","馭":"驭","馮":"冯","馯":"𫘛","馱":"驮","馳":"驰","馴":"驯","馹":"驲","馼":"𫘜","駁":"驳","駃":"𫘝","駉":"𬳶","駊":"𫘟","駎":"𩧨","駐":"驻","駑":"驽","駒":"驹","駓":"𬳵","駔":"驵","駕":"驾","駘":"骀","駙":"驸","駚":"𩧫","駛":"驶","駝":"驼","駞":"𫘞","駟":"驷","駡":"骂","駢":"骈","駤":"𫘠","駧":"𩧲","駩":"𩧴","駪":"𬳽","駫":"𫘡","駭":"骇","駰":"骃","駱":"骆","駶":"𩧺","駸":"骎","駻":"𫘣","駼":"𬳿","駿":"骏","騁":"骋","騂":"骍","騃":"𫘤","騄":"𫘧","騅":"骓","騉":"𫘥","騊":"𫘦","騌":"骔","騍":"骒","騎":"骑","騏":"骐","騑":"𬴂","騔":"𩨀","騖":"骛","騙":"骗","騚":"𩨊","騜":"𫘩","騝":"𩨃","騞":"𬴃","騟":"𩨈","騠":"𫘨","騤":"骙","騧":"䯄","騪":"𩨄","騫":"骞","騭":"骘","騮":"骝","騰":"腾","騱":"𫘬","騴":"𫘫","騵":"𫘪","騶":"驺","騷":"骚","騸":"骟","騻":"𫘭","騼":"𫠋","騾":"骡","驀":"蓦","驁":"骜","驂":"骖","驃":"骠","驄":"骢","驅":"驱","驊":"骅","驋":"𩧯","驌":"骕","驍":"骁","驎":"𬴊","驏":"骣","驓":"𫘯","驕":"骄","驗":"验","驙":"𫘰","驚":"惊","驛":"驿","驟":"骤","驢":"驴","驤":"骧","驥":"骥","驦":"骦","驨":"𫘱","驪":"骊","驫":"骉","骯":"肮","髏":"髅","髒":"脏","體":"体","髕":"髌","髖":"髋","髮":"发","鬆":"松","鬍":"胡","鬖":"𩭹","鬚":"须","鬠":"𫘽","鬢":"鬓","鬥":"斗","鬧":"闹","鬨":"哄","鬩":"阋","鬮":"阄","鬱":"郁","鬹":"鬶","魎":"魉","魘":"魇","魚":"鱼","魛":"鱽","魟":"𫚉","魢":"鱾","魥":"𩽹","魦":"𫚌","魨":"鲀","魯":"鲁","魴":"鲂","魵":"𫚍","魷":"鱿","魺":"鲄","魽":"𫠐","鮀":"𬶍","鮁":"鲅","鮃":"鲆","鮄":"𫚒","鮅":"𫚑","鮆":"𫚖","鮈":"𬶋","鮊":"鲌","鮋":"鲉","鮍":"鲏","鮎":"鲇","鮐":"鲐","鮑":"鲍","鮒":"鲋","鮓":"鲊","鮚":"鲒","鮜":"鲘","鮝":"鲞","鮞":"鲕","鮟":"𩽾","鮠":"𬶏","鮡":"𬶐","鮣":"䲟","鮤":"𫚓","鮦":"鲖","鮪":"鲔","鮫":"鲛","鮭":"鲑","鮮":"鲜","鮯":"𫚗","鮰":"𫚔","鮳":"鲓","鮵":"𫚛","鮶":"鲪","鮸":"3","鮺":"鲝","鮿":"𫚚","鯀":"鲧","鯁":"鲠","鯄":"𩾁","鯆":"𫚙","鯇":"鲩","鯉":"鲤","鯊":"鲨","鯒":"鲬","鯔":"鲻","鯕":"鲯","鯖":"鲭","鯗":"鲞","鯛":"鲷","鯝":"鲴","鯞":"𫚡","鯡":"鲱","鯢":"鲵","鯤":"鲲","鯧":"鲳","鯨":"鲸","鯪":"鲮","鯫":"鲰","鯬":"𫚞","鯰":"鲶","鯱":"𩾇","鯴":"鲺","鯶":"𩽼","鯷":"鳀","鯻":"𬶟","鯽":"鲫","鯾":"𫚣","鯿":"鳊","鰁":"鳈","鰂":"鲗","鰃":"鳂","鰆":"䲠","鰈":"鲽","鰉":"鳇","鰊":"𬶠","鰋":"𫚢","鰌":"䲡","鰍":"鳅","鰏":"鲾","鰐":"鳄","鰑":"𫚊","鰒":"鳆","鰓":"鳃","鰕":"𫚥","鰛":"鳁","鰜":"鳒","鰟":"鳑","鰠":"鳋","鰣":"鲥","鰤":"𫚕","鰥":"鳏","鰦":"𫚤","鰧":"䲢","鰨":"鳎","鰩":"鳐","鰫":"𫚦","鰭":"鳍","鰮":"鳁","鰱":"鲢","鰲":"鳌","鰳":"鳓","鰵":"鳘","鰶":"𬶭","鰷":"鲦","鰹":"鲣","鰺":"鲹","鰻":"鳗","鰼":"鳛","鰽":"𫚧","鰾":"鳔","鱀":"𬶨","鱂":"鳉","鱄":"𫚋","鱅":"鳙","鱆":"𫠒","鱇":"𩾌","鱈":"鳕","鱉":"鳖","鱊":"𫚪","鱒":"鳟","鱔":"鳝","鱖":"鳜","鱗":"鳞","鱘":"鲟","鱚":"𬶮","鱝":"鲼","鱟":"鲎","鱠":"鲙","鱢":"𫚫","鱣":"鳣","鱤":"鳡","鱧":"鳢","鱨":"鲿","鱭":"鲚","鱮":"𫚈","鱯":"鳠","鱲":"𫚭","鱷":"鳄","鱸":"鲈","鱺":"鲡","鳥":"鸟","鳧":"凫","鳩":"鸠","鳬":"凫","鳲":"鸤","鳳":"凤","鳴":"鸣","鳶":"鸢","鳷":"𫛛","鳼":"𪉃","鳽":"𫛚","鳾":"䴓","鴀":"𫛜","鴃":"𫛞","鴅":"𫛝","鴆":"鸩","鴇":"鸨","鴉":"鸦","鴐":"𫛤","鴒":"鸰","鴔":"𫛡","鴕":"鸵","鴗":"𫁡","鴛":"鸳","鴜":"𪉈","鴝":"鸲","鴞":"鸮","鴟":"鸱","鴣":"鸪","鴥":"𫛣","鴦":"鸯","鴨":"鸭","鴮":"𫛦","鴯":"鸸","鴰":"鸹","鴲":"𪉆","鴳":"𫛩","鴴":"鸻","鴷":"䴕","鴻":"鸿","鴽":"𫛪","鴿":"鸽","鵁":"䴔","鵂":"鸺","鵃":"鸼","鵊":"𫛥","鵏":"𬷕","鵐":"鹀","鵑":"鹃","鵒":"鹆","鵓":"鹁","鵚":"𪉍","鵜":"鹈","鵝":"鹅","鵟":"𫛭","鵠":"鹄","鵡":"鹉","鵧":"𫛨","鵩":"𫛳","鵪":"鹌","鵫":"𫛱","鵬":"鹏","鵮":"鹐","鵯":"鹎","鵰":"雕","鵲":"鹊","鵷":"鹓","鵾":"鹍","鶄":"䴖","鶇":"鸫","鶉":"鹑","鶊":"鹒","鶌":"𫛵","鶒":"𫛶","鶓":"鹋","鶖":"鹙","鶗":"𫛸","鶘":"鹕","鶚":"鹗","鶠":"𬸘","鶡":"鹖","鶥":"鹛","鶦":"𫛷","鶩":"鹜","鶪":"䴗","鶬":"鸧","鶭":"𫛯","鶯":"莺","鶰":"𫛫","鶱":"𬸣","鶲":"鹟","鶴":"鹤","鶹":"鹠","鶺":"鹡","鶻":"鹘","鶼":"鹣","鶿":"鹚","鷀":"鹚","鷁":"鹢","鷂":"鹞","鷄":"鸡","鷅":"𫛽","鷉":"䴘","鷊":"鹝","鷐":"𫜀","鷓":"鹧","鷔":"𪉑","鷖":"鹥","鷗":"鸥","鷙":"鸷","鷚":"鹨","鷟":"𬸦","鷣":"𫜃","鷤":"𫛴","鷥":"鸶","鷦":"鹪","鷨":"𪉊","鷩":"𫜁","鷫":"鹔","鷭":"𬸪","鷯":"鹩","鷲":"鹫","鷳":"鹇","鷴":"鹇","鷷":"𫜄","鷸":"鹬","鷹":"鹰","鷺":"鹭","鷽":"鸴","鷿":"𬸯","鸂":"㶉","鸇":"鹯","鸊":"䴙","鸋":"𫛢","鸌":"鹱","鸏":"鹲","鸑":"𬸚","鸕":"鸬","鸗":"𫛟","鸘":"鹴","鸚":"鹦","鸛":"鹳","鸝":"鹂","鸞":"鸾","鹵":"卤","鹹":"咸","鹺":"鹾","鹼":"碱","鹽":"盐","麗":"丽","麥":"麦","麨":"𪎊","麩":"麸","麪":"面","麫":"面","麬":"𤿲","麯":"曲","麲":"𪎉","麳":"𪎌","麴":"曲","麵":"面","麷":"𫜑","麼":"么","麽":"么","黃":"黄","黌":"黉","點":"点","黨":"党","黲":"黪","黴":"霉","黶":"黡","黷":"黩","黽":"黾","黿":"鼋","鼂":"鼌","鼉":"鼍","鼕":"冬","鼴":"鼹","齊":"齐","齋":"斋","齎":"赍","齏":"齑","齒":"齿","齔":"龀","齕":"龁","齗":"龂","齘":"𬹼","齙":"龅","齜":"龇","齟":"龃","齠":"龆","齡":"龄","齣":"出","齦":"龈","齧":"啮","齩":"𫜪","齪":"龊","齬":"龉","齭":"𫜭","齮":"𬺈","齯":"𫠜","齰":"𫜬","齲":"龋","齴":"𫜮","齶":"腭","齷":"龌","齼":"𬺓","齾":"𫜰","龍":"龙","龎":"厐","龐":"庞","龑":"䶮","龓":"𫜲","龔":"龚","龕":"龛","龜":"龟","龭":"𩨎","龯":"𨱆","鿁":"䜤","鿓":"鿒","𠁞":"𠀾","𠌥":"𠆿","𠏢":"𠉗","𠐊":"𫝋","𠗣":"㓆","𠞆":"𠛆","𠠎":"𠚳","𠬙":"𪠡","𠽃":"𪠺","𠿕":"𪜎","𡂡":"𪢒","𡃄":"𪡺","𡃕":"𠴛","𡃤":"𪢐","𡄔":"𠴢","𡄣":"𠵸","𡅏":"𠲥","𡅯":"𪢖","𡑍":"𫭼","𡑭":"𡋗","𡓁":"𪤄","𡓾":"𡋀","𡔖":"𡍣","𡞵":"㛟","𡟫":"𫝪","𡠹":"㛿","𡢃":"㛠","𡮉":"𡭜","𡮣":"𡭬","𡳳":"𡳃","𡸗":"𪨩","𡹬":"𪨹","𡻕":"岁","𡽗":"𡸃","𡾱":"㟜","𡿖":"𪩛","𢍰":"𪪴","𢠼":"𢙑","𢣐":"𪬚","𢣚":"𢘝","𢣭":"𢘞","𢤩":"𪫡","𢤱":"𢘙","𢤿":"𪬯","𢯷":"𪭝","𢶒":"𪭯","𢶫":"𢫞","𢷮":"𢫊","𢹿":"𢬦","𢺳":"𪮳","𣈶":"暅","𣋋":"𣈣","𣍐":"𫧃","𣙎":"㭣","𣜬":"𪳗","𣝕":"𣘷","𣞻":"𣘓","𣠩":"𣞎","𣠲":"𣑶","𣯩":"𣯣","𣯴":"𣭤","𣯶":"毶","𣽏":"𪶮","𣾷":"㳢","𣿉":"𣶫","𤁣":"𣺽","𤄷":"𪶒","𤅶":"𣷷","𤑳":"𤎻","𤑹":"𪹀","𤒎":"𤊀","𤒻":"𪹹","𤓌":"𪹠","𤓎":"𤎺","𤓩":"𤊰","𤘀":"𪺣","𤛮":"𤙯","𤛱":"𫞢","𤜆":"𪺪","𤠮":"𪺸","𤢟":"𤝢","𤢻":"𢢐","𤩂":"𫞧","𤪺":"㻘","𤫩":"㻏","𤬅":"𪼴","𤳷":"𪽝","𤳸":"𤳄","𤷃":"𪽭","𤸫":"𤶧","𤺔":"𪽴","𥊝":"𥅿","𥌃":"𥅘","𥏝":"𪿊","𥕥":"𥐰","𥖅":"𥐯","𥖲":"𪿞","𥗇":"𪿵","𥗽":"𬒗","𥜐":"𫀓","𥜰":"𫀌","𥞵":"𥞦","𥢢":"䅪","𥢶":"𫞷","𥢷":"𫀮","𥨐":"𥧂","𥪂":"𥩺","𥯤":"𫁳","𥴨":"𫂖","𥴼":"𫁺","𥵃":"𥱔","𥵊":"𥭉","𥶽":"𫁱","𥸠":"𥮋","𥻦":"𫂿","𥼽":"𥹥","𥽖":"𥺇","𥾯":"𫄝","𥿊":"𦈈","𦀖":"𫄦","𦂅":"𦈒","𦃄":"𦈗","𦃩":"𫄯","𦅇":"𫄪","𦅈":"𫄵","𦆲":"𫟇","𦒀":"𫅥","𦔖":"𫅼","𦘧":"𡳒","𦟼":"𫆝","𦠅":"𫞅","𦡝":"𫆫","𦢈":"𣍨","𦣎":"𦟗","𦧺":"𫇘","𦪙":"䑽","𦪽":"𦨩","𦱌":"𫇪","𦾟":"𦶻","𧎈":"𧌥","𧒯":"𫊹","𧔥":"𧒭","𧕟":"𧉐","𧜗":"䘞","𧜵":"䙊","𧝞":"䘛","𧞫":"𫌋","𧟀":"𧝧","𧡴":"𫌫","𧢄":"𫌬","𧦝":"𫍞","𧦧":"𫍟","𧩕":"𫍭","𧩙":"𬣥","𧩼":"𫍶","𧫝":"𫍺","𧬤":"𫍼","𧭈":"𫍾","𧭹":"𫍐","𧳟":"𧳕","𧵳":"䞌","𧶔":"𧹓","𧶧":"䞎","𧷎":"𪠀","𧸘":"𫎨","𧹈":"𪥠","𧽯":"𫎸","𨂐":"𫏌","𨄣":"𨀱","𨅍":"𨁴","𨆪":"𫏕","𨇁":"𧿈","𨇞":"𨅫","𨇤":"𫏨","𨇰":"𫏞","𨇽":"𫏑","𨈊":"𨂺","𨈌":"𨄄","𨊰":"䢀","𨊸":"䢁","𨊻":"𨐆","𨋢":"䢂","𨌈":"𫐍","𨍰":"𫐔","𨎌":"𫐋","𨎮":"𨐉","𨏠":"𨐇","𨏥":"𨐊","𨞺":"𫟫","𨟊":"𫟬","𨢿":"𨡙","𨣈":"𨡺","𨣞":"𨟳","𨣧":"𨠨","𨤻":"𨤰","𨥛":"𨱀","𨥟":"𫓫","𨦫":"䦀","𨧀":"𬭊","𨧜":"䦁","𨧰":"𫟽","𨧱":"𨱊","𨨏":"𬭛","𨨛":"𫓼","𨨢":"𫓽","𨩰":"𫟾","𨪕":"𫓮","𨫒":"𨱐","𨬖":"𫔏","𨭆":"𬭶","𨭎":"𬭳","𨭖":"𫔑","𨭸":"𫔐","𨮂":"𨱕","𨮳":"𫔒","𨯅":"䥿","𨯟":"𫔓","𨰃":"𫔉","𨰋":"𫓳","𨰥":"𫔕","𨰲":"𫔃","𨲳":"𫔖","𨳑":"𨸁","𨳕":"𨸀","𨴗":"𨸅","𨴹":"𫔲","𨵩":"𨸆","𨵸":"𨸇","𨶀":"𨸉","𨶏":"𨸊","𨶮":"𨸌","𨶲":"𨸋","𨷲":"𨸎","𨼳":"𫔽","𨽏":"𨸘","𩀨":"𫕚","𩅙":"𫕨","𩎖":"𫖑","𩎢":"𩏾","𩏂":"𫖓","𩏠":"𫖖","𩏪":"𩏽","𩏷":"𫃗","𩑔":"𫖪","𩒎":"𫖭","𩓣":"𩖕","𩓥":"𫖵","𩔑":"𫖷","𩔳":"𫖴","𩖰":"𫠇","𩗀":"𩙦","𩗓":"𫗈","𩗴":"𫗉","𩘀":"𩙩","𩘝":"𩙭","𩘹":"𩙨","𩘺":"𩙬","𩙈":"𩙰","𩚛":"𩟿","𩚥":"𩠀","𩚩":"𫗡","𩚵":"𩠁","𩛆":"𩠂","𩛌":"𫗤","𩛡":"𫗨","𩛩":"𩠃","𩜇":"𩠉","𩜦":"𩠆","𩜵":"𩠊","𩝔":"𩠋","𩝽":"𫗳","𩞄":"𩠎","𩞦":"𩠏","𩞯":"䭪","𩟐":"𩠅","𩟗":"𫗚","𩠴":"𩠠","𩡣":"𩡖","𩡺":"𩧦","𩢡":"𩧬","𩢴":"𩧵","𩢸":"𩧳","𩢾":"𩧮","𩣏":"𩧶","𩣑":"䯃","𩣫":"𩧸","𩣵":"𩧻","𩣺":"𩧼","𩤊":"𩧩","𩤙":"𩨆","𩤲":"𩨉","𩤸":"𩨅","𩥄":"𩨋","𩥇":"𩨍","𩥉":"𩧱","𩥑":"𩨌","𩦠":"𫠌","𩧆":"𩨐","𩭙":"𩬣","𩯁":"𫙂","𩯳":"𩯒","𩰀":"𩬤","𩰹":"𩰰","𩳤":"𩲒","𩴵":"𩴌","𩵦":"𫠏","𩵩":"𩽺","𩵹":"𩽻","𩶁":"𫚎","𩶘":"䲞","𩶰":"𩽿","𩶱":"𩽽","𩷰":"𩾄","𩸃":"𩾅","𩸄":"𫚝","𩸡":"𫚟","𩸦":"𩾆","𩻗":"𫚨","𩻬":"𫚩","𩻮":"𫚘","𩼶":"𫚬","𩽇":"𩾎","𩿅":"𫠖","𩿤":"𫛠","𩿪":"𪉄","𪀖":"𫛧","𪀦":"𪉅","𪀾":"𪉋","𪁈":"𪉉","𪁖":"𪉌","𪂆":"𪉎","𪃍":"𪉐","𪃏":"𪉏","𪃒":"𫛻","𪃧":"𫛹","𪄆":"𪉔","𪄕":"𪉒","𪅂":"𫜂","𪆷":"𫛾","𪇳":"𪉕","𪈼":"𱊜","𪉸":"𫜊","𪋿":"𫧮","𪌭":"𫜓","𪍠":"𫜕","𪓰":"𫜟","𪔵":"𪔭","𪘀":"𪚏","𪘯":"𪚐","𪙏":"𫜯","𪟖":"𠛾","𪷓":"𣶭","𫒡":"𫓷","𫜦":"𫜫"};function De(e,t){var i,r,n,o,s="";if(o=t?Me:Se,"string"!=typeof e)return e;for(i=0;i<e.length;i++){if(r=e.charAt(i),!((n=e.charCodeAt(i))>13312&&n<40899||n>63744&&n<64106)){s+=r;continue}let t=o[r];s+=t||r}return s}var ke=function(e){return De(e,!0)},Ae=function(e){return De(e,!1)};let Ee=["章","节","回","節","卷","部","輯","辑","話","集","话","篇"," ","　"],Ie=[],Ne=["CHAPTER","Chapter","序章","前言","声明","写在前面的话","后记","楔子","后序","章节目录","尾声","聲明","寫在前面的話","後記","後序","章節目錄","尾聲"];const Re=e=>e.trim().replace(/(\r\n|\n|\r|\t)/gm,"").substring(0,100).split("").filter((e=>"="!==e&&"-"!==e&&"_"!==e&&"+"!==e)).join(""),Pe=(e,t="")=>t?new RegExp(t).test(e):e&&e.length<40&&!Oe(e)&&(Be(e)||e.startsWith("第")&&Fe(e)||e.startsWith("卷")&&He(e)||e.indexOf("第")>-1&&e.lastIndexOf("第")<7&&Fe(e.substr(e.indexOf("第")))),Oe=e=>Ie.filter((t=>e.indexOf(t)>-1)).length>0,Be=e=>Ne.filter((t=>e.startsWith(t))).length>0,Fe=e=>{let t=!1;for(let i=0;i<Ee.length&&((/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u842c\u96f6]+$/.test(e.substring(1,e.indexOf(Ee[i])).trim())||/^\d+$/.test(e.substring(1,e.indexOf(Ee[i])).trim()))&&(t=!0),!t);i++);return t},He=e=>!(!/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u842c\u96f6]+$/.test(e.substring(1,e.indexOf(" ")))&&!/^\d+$/.test(e.substring(1,e.indexOf(" "))))||(!(!/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u842c\u96f6]+$/.test(e.substring(1,e.indexOf("　")))&&!/^\d+$/.test(e.substring(1,e.indexOf("　"))))||!(!/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u842c\u96f6]+$/.test(e.substring(1))&&!/^\d+$/.test(e.substring(1))));let je=!1;const We=e=>Array.from(e.querySelectorAll("h1,h2,h3,h4,h5,h6,p,div,ul,dl,ol,li,dt,dd,pre,blockquote,address,kookitmarker")),$e=(e,t,i,r,n,o,s)=>c(void 0,void 0,void 0,(function*(){let a=Math.floor(e.clientWidth/12),l=a%2==0?a:a-1;const c=e.clientWidth;if("mimical"===t&&"yes"!==s){let e=document.getElementById("book");e&&(e.style.display="block",i>0?o():i<0&&n(),setTimeout((()=>{if(!e)return{};e.style.display="none"}),1e3))}const h=r.body.scrollLeft,d=c+l;if(i>0){const e=Math.round(h/d),i=Math.max(0,e-1)*d;r.body.scrollTo({top:0,left:i,behavior:"sliding"===t&&"yes"!==s?"smooth":"auto"})}else if(i<0){const e=(Math.round(h/d)+1)*d;r.body.scrollTo({top:0,left:e,behavior:"sliding"===t&&"yes"!==s?"smooth":"auto"})}})),Ue=(t,i,r,n)=>{let o=e.findLastIndex(r,(e=>e.href===i||e.href&&e.href.includes("#")&&e.href.includes(i)));return i&&e.findLastIndex(r,(e=>e.href===i||e.href&&e.href.includes("#")&&e.href.includes(i)))>-1||(o=t),"prev"===n?Object.assign(Object.assign({},r[o-1]),{index:o-1}):Object.assign(Object.assign({},r[o+1]),{index:o+1})},qe=(e,t,i,r,n,o,s,a)=>c(void 0,void 0,void 0,(function*(){let t=parseInt(o.chapterDocIndex||"0"),l=o.chapterHref||"";if(0===t)return;let c=Ue(t,l,i,"prev");c&&(o.text="prevChapter",o.page="",yield ze(c.index,c.label,c.href,i,e,r,n,o,s,a))})),ze=(t,i,r,n,o,s,a,l,h,u)=>c(void 0,void 0,void 0,(function*(){if(h.body.innerHTML="",u.height="0px",h.body.scrollTo(0,0),i&&!t||n[t]&&n[t].label&&i&&i!==n[t].label&&-1===r.indexOf("#")){let r=e.findLastIndex(n,{label:i});-1!==r&&(t=r)}if(-1===t&&r.indexOf("#")>-1){let i=r.split("#")[0],o=e.findLastIndex(n,(e=>e.href===i||e.href&&e.href.includes("#")&&e.href.includes(i)));-1!==o&&(t=o)}(-1===t||t>n.length-1)&&(t=0);let f=yield d(n[t].text,!1),p=function(e){const t=e.match(/<body\b([^>]*)>/i);if(!t)return{};const i=t[1],r={},n=/([\w-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|([^>\s]+))/g;let o;for(;null!==(o=n.exec(i));){const e=o[2]||o[3]||o[4]||"";r[o[1]]=e}return r}(f);h.body.innerHTML=f,p.style?h.body.setAttribute("style",h.body.getAttribute("style")||""):p.class?h.body.setAttribute("class",p.class):p.id?h.body.setAttribute("id",p.id):p.class?p.id||h.body.removeAttribute("id"):h.body.removeAttribute("class"),yield Ve(h),l.chapterTitle=i,l.chapterHref=r,l.chapterDocIndex=t+"",l.percentage=n.slice(0,t).map((e=>e.text&&e.text.size||1)).reduce(((e,t)=>e+t),0)/n.map((e=>e.text&&e.text.size||1)).reduce(((e,t)=>e+t),0)+"",l.text="",yield((e,t,i,r,n)=>c(void 0,void 0,void 0,(function*(){if(yield Promise.race([Promise.all(Array.from([...n.images,...n.querySelectorAll("image")]).map((e=>e.complete?Promise.resolve(0!==e.naturalHeight):new Promise((t=>{e.addEventListener("load",(()=>t(!0))),e.addEventListener("error",(()=>t(!1)))}))))),new Promise(((e,t)=>{setTimeout((()=>{e("image load timeout")}),10)}))]),yield v(e,t,i,n),y(n),"scroll"!==t){if(r.height=e.clientHeight+"px","double"===t){let t=Math.floor(e.clientWidth/12),i=t%2==0?t:t-1,r=(e.clientWidth+i)/2;if((n.body.scrollWidth-n.body.clientWidth)/r%2==1){let e=document.createElement("div");e.setAttribute("style","height: "+n.body.clientHeight+"px; display: inline-block; width: "+(r-i)+"px"),n.body.appendChild(e)}}}else r.height=n.body.scrollHeight+"px",r.height=n.body.scrollHeight+300+"px"})))(o,s,a,u,h),yield Xe(o,s,"","","","",h)}));const Ve=e=>c(void 0,void 0,void 0,(function*(){let t=Array.from(e.getElementsByTagName("link"));if(0===t.length)return;let i=[];for(let e=0;e<t.length;e++){const r=t[e];r.href.endsWith("null")||i.push(new Promise(((e,t)=>{r.addEventListener("load",e)})))}try{yield Promise.race([Promise.all(i),new Promise(((e,t)=>{setTimeout((()=>{e("css load timeout")}),10)}))])}catch(e){console.error(e)}})),Xe=(e,t,i,r,n,o,s)=>c(void 0,void 0,void 0,(function*(){let a=0,l=s.body;if(o&&"scroll"!==t){let t=Math.floor(e.clientWidth/12),i=t%2==0?t:t-1;a=((c=getComputedStyle(e).width,parseFloat(c.substring(0,c.length-2)))+i)*(parseInt(o)-1)}else if(i){let n=We(s.body).filter(((e,t)=>Re(e.textContent)&&(Re(e.textContent)===Re(i)||Re(e.textContent)===Ae(Re(i))||Re(e.textContent)===ke(Re(i)))&&(Math.abs(t-parseInt(r))<2||"search"===r||"ignore"===r||"next"===r)));if(0===n.length)return;l=Je(n[0],e,t),a=l?h(l.offsetLeft)-h(l.marginLeft||parseFloat(getComputedStyle(l).marginLeft)):"prevChapter"===i?s.body.scrollWidth:0}else if(n&&n.indexOf("#")>-1){let i=CSS.escape(n.split("#").reverse()[0]);if(!s.body.querySelector("#"+i))return;l=Je(s.body.querySelector("#"+i)||s.body,e,t),a=l?h(l.offsetLeft)-h(l.marginLeft||parseFloat(getComputedStyle(l).marginLeft)):0}var c;"scroll"!==t?s.body.scrollTo(a,0):l.scrollIntoView()})),Je=(e,t,i)=>{let r=Math.floor(t.clientWidth/12),n=r%2==0?r:r-1,o=h(e.offsetLeft)-h(e.marginLeft||parseFloat(getComputedStyle(e).marginLeft));return"scroll"===i||"scroll"!==i&&Ge(parseInt(o+""),(t.clientWidth+n)/2)?e:e.parentElement?Je(e.parentElement,t,i):e},Ge=(e,t)=>{for(let i=e-10;i<=e+10;i++)if(i%t==0)return!0;return!1},_e=(e,t,i,r,n,o,s)=>c(void 0,void 0,void 0,(function*(){var a,l;if(je)return;let c=We(o.body),h=c.filter((i=>it(e,i,t)&&(i.textContent||"").trim())),d=h[0];s&&(d=s);let u=0;for(let i=0;i<c.length;i++)if(it(e,c[i],t)&&d&&c[i].innerHTML===d.innerHTML){u=i;break}if(Ze(h,i,n),d&&!Ye(d,e,t)){n.text=d.textContent||"",n.count=u+"",n.page="";let e=r.map((e=>e.text&&e.text.size||1)).reduce(((e,t)=>e+t),0);n.percentage=r.slice(0,parseInt(n.chapterDocIndex)).map((e=>e.text&&e.text.size||1)).reduce(((e,t)=>e+t),0)/e+((null===(a=r.find(((e,t)=>t===parseInt(n.chapterDocIndex))))||void 0===a?void 0:a.text.size)||0)/e*(u/c.length)+""}else n.page=(null===(l=yield m(t,o,e))||void 0===l?void 0:l.currentPage)+"";je=!0,setTimeout((()=>{je=!1}),100)})),Ye=(e,t,i)=>{let r=Math.floor(t.clientWidth/12),n=r%2==0?r:r-1;return Math.abs(e.offsetLeft-Je(e,t,i).offsetLeft)>(t.clientWidth+n)/2},Ze=(t,i,r)=>{let n=r.chapterHref||"",o=n.lastIndexOf("#"),s="";s=-1===o?n:n.substring(0,o);for(let n=0;n<t.length;n++){const o=t[n];if(o.id){let t=s+"#"+o.id,n=e.findLastIndex(i,{href:t});n>-1&&(r.chapterHref=t,r.chapterTitle=i[n].label)}}},Ke=(e,t,i,r,n,o,s,a)=>c(void 0,void 0,void 0,(function*(){let t=parseInt(o.chapterDocIndex||"0"),l=o.chapterHref||"";if(t>=i.length-1)return void(o.percentage="1");let c=Ue(t,l,i,"next");c&&(o.page="",yield ze(c.index,c.label,c.href,i,e,r,n,o,s,a))})),Qe=(e,t,i)=>{let r=We(i.body).filter((e=>!tt(e))),n=r.filter((i=>it(e,i,t)&&(i.textContent||"").trim()));return n=n.filter((e=>{if(!(e.textContent||"").trim())return!1;let t=e.parentElement;for(;t&&t!==i.body;){if(r.includes(t))return!1;t=t.parentElement}return!0})),n.filter((e=>{var t;return"img"!==e.textContent&&!(null===(t=e.textContent)||void 0===t?void 0:t.startsWith("img"))})).map((e=>e.textContent))},et=(e,t,i)=>{if(i.querySelectorAll('span[data-highlight="true"]').forEach((e=>{const t=e.parentNode;t&&t.replaceChild(i.createTextNode(e.textContent||""),e)})),!e.trim())return;let r=Array.from(i.body.querySelectorAll("span, p, div, h1, h2, h3, h4, h5, h6 ")).filter((t=>{const i=t.textContent||"";return i.trim()&&i.indexOf(e)>-1}));if(r.length>0){const n=r=>{var n;if(r.nodeType===Node.TEXT_NODE){const o=r.textContent||"",s=o.indexOf(e);if(s>-1){const a=o.substring(0,s),l=o.substring(s+e.length),c=i.createElement("span");c.setAttribute("style",t),c.setAttribute("data-highlight","true"),c.textContent=e;const h=i.createDocumentFragment();return a&&h.appendChild(i.createTextNode(a)),h.appendChild(c),l&&h.appendChild(i.createTextNode(l)),null===(n=r.parentNode)||void 0===n||n.replaceChild(h,r),!0}}return!1},o=e=>{if(n(e))return!0;const t=Array.from(e.childNodes);for(const e of t)if(o(e))return!0;return!1};for(let e=0;e<r.length;e++)o(r[e])}},tt=e=>{var t=e.children;let i=!1;var r=/^(address|kookitmarker|section|blockquote|body|center|dir|div|dl|fieldset|form|h[1-6]|hr|isindex|menu|noframes|noscript|ol|p|pre|table|ul|dd|dt|frameset|li|tbody|td|tfoot|th|thead|tr|html)$/i;if(Array.from(t).filter((e=>r.test(e.nodeName))).length<3)return!1;for(var n=0;n<t.length;n++)if(r.test(t[n].nodeName)){i=!0;break}return i},it=(e,t,i)=>{var r=!1,n=t.getBoundingClientRect();if("scroll"!==i&&t.textContent&&t.textContent.trim()){let t=n.left;r=t>-10&&t<=e.clientWidth}else if("scroll"===i&&t.textContent&&t.textContent.trim()){let t=n.top;r=t>=e.scrollTop&&t<=e.scrollTop+e.clientHeight}else if("scroll"!==i){let t=n.left;r=t>=0&&t<=e.clientWidth}return r};class rt{constructor(){this.callbacks={},this.callbacks.base={}}on(e,t){const i=this;if(void 0===e||""===e)return console.warn("wrong names"),!1;if(void 0===t)return console.warn("wrong callback"),!1;return this.resolveNames(e).forEach((function(e){const r=i.resolveName(e);i.callbacks[r.namespace]instanceof Object||(i.callbacks[r.namespace]={}),i.callbacks[r.namespace][r.value]instanceof Array||(i.callbacks[r.namespace][r.value]=[]),i.callbacks[r.namespace][r.value].push(t)})),this}off(e){const t=this;if(void 0===e||""===e)return console.warn("wrong name"),!1;return this.resolveNames(e).forEach((function(e){const i=t.resolveName(e);if("base"!==i.namespace&&""===i.value)delete t.callbacks[i.namespace];else if("base"===i.namespace)for(const e in t.callbacks)t.callbacks[e]instanceof Object&&t.callbacks[e][i.value]instanceof Array&&(delete t.callbacks[e][i.value],0===Object.keys(t.callbacks[e]).length&&delete t.callbacks[e]);else t.callbacks[i.namespace]instanceof Object&&t.callbacks[i.namespace][i.value]instanceof Array&&(delete t.callbacks[i.namespace][i.value],0===Object.keys(t.callbacks[i.namespace]).length&&delete t.callbacks[i.namespace])})),this}trigger(e,t=[]){if(void 0===e||""===e)return console.warn("wrong name"),!1;const i=this;const r=t instanceof Array?t:[];let n=this.resolveNames(e);n=this.resolveName(n[0]),setTimeout((()=>{if("base"===n.namespace)for(const e in i.callbacks){if(i.callbacks[e]instanceof Object&&i.callbacks[e][n.value]instanceof Array&&i.callbacks[e][n.value])i.callbacks[e][n.value].forEach((function(e){e.apply(i,r)}));else if(this.callbacks[n.namespace]instanceof Object&&i.callbacks[n.namespace][n.value]){if(""===n.value)return console.warn("wrong name"),this;i.callbacks[n.namespace][n.value].forEach((function(e){e.apply(i,r)}))}return null}}),100)}resolveNames(e){let t=e;return t=t.replace(/[^a-zA-Z0-9 ,/.]/g,""),t=t.replace(/[,/]+/g," "),t=t.split(" "),t}resolveName(e){const t={},i=e.split(".");return t.original=e,t.value=i[0],t.namespace="base",i.length>1&&""!==i[1]&&(t.namespace=i[1]),t}}const nt=Node.ELEMENT_NODE,ot=Node.TEXT_NODE,st=Node.CDATA_SECTION_NODE;function at(e,t,i){let r,n,o,s=0,a=0,l=!0;for(n=0;n<e.length;n++)if(o=e[n],o.nodeType===nt){if(r||l?(s+=2,l=!1):s++,t===o)return"img"===o.tagName.toLowerCase()?{count:s,offset:i}:{count:s};a=0,r=!0}else{if((null==o?void 0:o.nodeType)!==ot&&(null==o?void 0:o.nodeType)!==st)continue;if((r||l)&&(s++,l=!1),t===o)return{count:s,offset:i+a};a+=o.textContent.length,r=!1}throw new Error("The specified node was not found in the array of siblings")}function lt(e,t){const i="number"==typeof e,r="number"==typeof t;return i||r?!i&&r?-1:i&&!r?1:(e||0)-(t||0):0}function ct(e,t){if(!e&&!t)return 0;if(!e&&t)return-1;if(e&&!t)return 1;const i=(e.y||0)-(t.y||0);return i||(e.x||0)-(t.x||0)}class ht{constructor(e,t){this.isRange=!1,this.opts=Object.assign({flattenRange:!1,stricter:!0},t||{}),this.cfi=e,this.parts=[];const i=(e=e.trim()).match(/^epubcfi\((.*)\)$/);if(!i)throw new Error("Not a valid CFI");if(i.length<2)return;let r,n,o;e=i[1]||"";let s=[],a=0;for(;e.length;){if(({parsed:r,offset:n,newDoc:o}=this.parse(e)),!r||null===n)throw new Error("Parsing failed");if(a&&o)throw new Error("CFI is a range that spans multiple documents. This is not allowed");s.push(r),(o||e.length-n<=0)&&(2===a?this.to=s:this.parts.push(s),s=[]),","===(e=e.slice(n))[0]&&(0===a?(s.length&&this.parts.push(s),s=[]):1===a&&(s.length&&(this.from=s),s=[]),e=e.slice(1),a++)}this.from&&this.from.length&&(!this.opts.flattenRange&&this.to&&this.to.length?this.isRange=!0:(this.parts=this.parts.concat(this.from),delete this.from,delete this.to)),this.opts.stricter&&this.removeIllegalOpts()}removeIllegalOpts(e){if(!e)if(this.from){if(this.removeIllegalOpts(this.from),!this.to)return;e=this.to}else e=this.parts;let t,i,r,n;for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length-1;i++)n=r[i],delete n.temporal,delete n.spatial,delete n.offset,delete n.textLocationAssertion}static generatePart(e,t,i){let r,n="";for(;e.parentNode;)r=at(e.parentNode.childNodes,e,t),!n&&r.offset&&(n=":"+r.offset),n="/"+r.count+(e.id?"["+(e.id.replace(/[\[\]\^,();]/g,"^$&")+"]"):"")+n,e=e.parentNode;return n}static generate(e,t,i){let r;if(Array.isArray(e)){const t=[];for(const r of e)t.push(this.generatePart(r.node,r.offset,i));r=t.join("!")}else r=this.generatePart(e,t,i);return i&&(r+=i),"epubcfi("+r+")"}static toParsed(e){return e.isRange?e.getFrom():e.get()}static comparePath(e,t){const i=Math.max(e.length,t.length);let r,n,o,s;for(r=0;r<i;r++){if(n=e[r],o=t[r],!n)return-1;if(!o)return 1;if(s=this.compareParts(n,o),s)return s}return 0}static sort(e){e.sort(((e,t)=>this.compare(e,t)))}static compare(e,t){let i=e.get(),r=t.get();if(e.isRange||t.isRange){if(e.isRange&&t.isRange){const e=this.comparePath(i.from,r.from);return e||this.comparePath(i.to,r.to)}return e.isRange&&(i=i.from),t.isRange&&(r=r.from),this.comparePath(i,r)}return this.comparePath(i,r)}static compareParts(e,t){const i=Math.max(e.length,t.length);let r,n,o,s;for(r=0;r<i;r++){if(n=e[r],o=t[r],!n)return-1;if(!o)return 1;if(s=n.nodeIndex-o.nodeIndex,s)return s;if(0===n.nodeIndex)return 0;if(!(r<i-1)){if(n.nodeIndex%2==0){if(s=lt(n.temporal,o.temporal),s)return s;if(s=ct(n.spatial,o.spatial),s)return s}if(s=(n.offset||0)-(o.offset||0),s)return s}}return 0}decodeEntities(e,t){try{const i=e.createElement("textarea");return i.innerHTML=t,i.value||""}catch(e){return t}}trueLength(e,t){return this.decodeEntities(e,t).length}getFrom(){if(!this.isRange)throw new Error("Trying to get beginning of non-range CFI");if(!this.from)return this.deepClone(this.parts);const e=this.deepClone(this.parts);return e[e.length-1]=e[e.length-1].concat(this.from),e}getTo(){if(!this.isRange)throw new Error("Trying to get end of non-range CFI");const e=this.deepClone(this.parts);return e[e.length-1]=e[e.length-1].concat(this.to),e}get(){return this.isRange?{from:this.getFrom(),to:this.getTo(),isRange:!0}:this.deepClone(this.parts)}parseSideBias(e,t){if(!t)return;const i=t.trim().match(/^(.*);s=([ba])$/);!i||i.length<3?"object"==typeof e.textLocationAssertion?e.textLocationAssertion.post=t:e.textLocationAssertion=t:(i[1]&&("object"==typeof e.textLocationAssertion?e.textLocationAssertion.post=i[1]:e.textLocationAssertion=i[1]),"a"===i[2]?e.sideBias="after":e.sideBias="before")}parseSpatialRange(e){if(!e)return;const t=e.trim().match(/^([\d\.]+):([\d\.]+)$/);if(!t||t.length<3)return;const i={x:parseInt(t[1]),y:parseInt(t[2])};return"number"==typeof i.x&&"number"==typeof i.y?i:void 0}parse(e){const t={},i=/[\d]/;let r,n,o,s,a,l,c=!1,h=!1;for(l=0;l<=e.length;l++)if(s=l<e.length?e[l]:"","^"!==s||a){if("/"===n){if(s.match(i)){r?r+=s:r=s,a=!1;continue}r&&(t.nodeIndex=parseInt(r),r=null),o=n,n=null}if(":"===n){if(s.match(i)){r?r+=s:r=s,a=!1;continue}r&&(t.offset=parseInt(r),r=null),o=n,n=null}if("@"===n){let e=!1;if(s.match(i)||"."===s||":"===s?":"===s&&(c?e=!0:c=!0):e=!0,!e){r?r+=s:r=s,a=!1;continue}o=n,n=null,r&&c&&(t.spatial=this.parseSpatialRange(r)),r=null}if("~"===n){if(s.match(i)||"."===s){r?r+=s:r=s,a=!1;continue}r&&(t.temporal=parseFloat(r)),o=n,n=null,r=null}if(!n){if("!"===s){l++,n=s;break}if(","===s)break;if("/"===s){if(h)break;h=!0,o=n,n=s,a=!1;continue}if(":"===s||"~"===s||"@"===s){if(this.opts.stricter){if(":"===s&&(void 0!==t.temporal||void 0!==t.spatial))break;if(("~"===s||"@"===s)&&void 0!==t.offset)break}o=n,n=s,a=!1,c=!1;continue}if("["===s&&!a&&":"===o){o=n,n="[",a=!1;continue}if("["===s&&!a&&"/"===o){o=n,n="nodeID",a=!1;continue}}"["!==n?("nodeID"!==n||("]"!==s||a?r?r+=s:r=s:(o=n,n=null,t.nodeID=r,r=null)),a=!1):("]"!==s||a?","!==s||a?r?r+=s:r=s:(t.textLocationAssertion={},r&&(t.textLocationAssertion.pre=r),r=null):(o=n,n=null,this.parseSideBias(t,r),r=null),a=!1)}else a=!0;if(!t.nodeIndex&&0!==t.nodeIndex)throw new Error("Missing child node index in CFI");return{parsed:t,offset:l,newDoc:"!"===n}}getChildNodeByCFIIndex(e,t,i,r){const n=t.childNodes;if(!n.length)return{node:t,offset:0};if(i<=0)return{node:n[0],relativeToNode:"before",offset:0};let o,s,a,l=0;for(s=0;s<n.length;s++)switch(a=n[s],a.nodeType){case nt:if(l%2==0){if(l+=2,l>=i)return"img"===a.tagName.toLowerCase()&&r?{node:a,offset:r}:{node:a,offset:0}}else{if(l+=1,l===i)return"img"===a.tagName.toLowerCase()&&r?{node:a,offset:r}:{node:a,offset:0};if(l>i)return o?{node:o,offset:this.trueLength(e,o.textContent)}:{node:t,offset:0}}o=a;break;case ot:case st:if(0!==l&&l%2!=0||(l+=1),l===i){const t=this.trueLength(e,a.textContent);if(!(r>=t))return{node:a,offset:r};r-=t}o=a;break;default:continue}if(i>l){const i={relativeToNode:"after",offset:0};return i.node=o||t,this.isTextNode(i.node)&&(i.offset=this.trueLength(e,i.node.textContent.length)),i}}isTextNode(e){return!!e&&(e.nodeType===ot||e.nodeType===st)}correctOffset(e,t,i,r){let n,o=t;if("string"==typeof r?n=this.decodeEntities(e,r):(r.pre=this.decodeEntities(e,r.pre),r.post=this.decodeEntities(e,r.post),n=r.pre+"."+r.post),!this.isTextNode(t))return{node:t,offset:0};for(;this.isTextNode(o.previousSibling);)o=o.previousSibling;const s=o;let a;const l=[];let c="",h=0;for(;this.isTextNode(o)&&(a=this.decodeEntities(e,o.textContent),l[h]=a.length,c+=a,o.nextSibling);)o=o.nextSibling,h++;const d=r.pre?r.pre.length:0,u=function(e,t,i){i=i||0;const r=[];let n,o=0;do{if(n=e.match(t),!n)break;r.push(n.index+i),o+=n.index+n.length,e=e.slice(n.index+n.length)}while(o<e.length);return r}(c,new RegExp(n),d);if(!u.length)return{node:t,offset:i};let f=function(e,t){let i,r,n,o;for(n=0;n<e.length;n++)o=Math.abs(e[n]-t),(!n||o<i)&&(o=i,r=e[n]);return r}(u,i);if(o===t&&f===i)return{node:t,offset:i};for(h=0,o=s;f>=l[h];){if(f-=l[h],f<0)return{node:t,offset:i};const e=[];if(!o.nextSibling||h+1>=e.length)return{node:t,offset:i};h++,o=o.nextSibling}return{node:o,offset:f}}resolveNode(e,t,i,r){if(r=Object.assign({},r||{}),!i)throw new Error("Missing DOM argument");let n;if(0===e&&(n=i.querySelector("package")),!n)for(const e of i.childNodes)if(e.nodeType===nt){n=e;break}if(n=i,!n)throw new Error("Document incompatible with CFIs");let o,s,a=n,l=0;for(o=t.length-1;o>=0;o--)if(s=t[o],!r.ignoreIDs&&s.nodeID&&(a=i.getElementById(s.nodeID))){l=o+1;break}a||(a=n);let c={node:a,offset:0};for(o=l;o<t.length;o++)s=t[o],s&&(c=this.getChildNodeByCFIIndex(i,c.node,s.nodeIndex,s.offset),s.textLocationAssertion&&(c=this.correctOffset(i,c.node,s.offset,s.textLocationAssertion)));return c}resolveURI(e,t,i){if(i=i||{},e<0||e>this.parts.length-2)throw new Error("index is out of bounds");const r=this.parts[e];if(!r)throw new Error("Missing CFI part for index: "+e);let n=this.resolveNode(e,r,t,i).node;const o=n.tagName.toLowerCase();if("itemref"===o&&"spine"===n.parentNode.tagName.toLowerCase()){const e=n.getAttribute("idref");if(!e)throw new Error("Referenced node had not 'idref' attribute");if(n=t.getElementById(e),!n)throw new Error("Specified node is missing from manifest");const i=n.getAttribute("href");if(!i)throw new Error("Manifest item is missing href attribute");return i}if("iframe"===o||"embed"===o){const e=n.getAttribute("src");if(!e)throw new Error(o+" element is missing 'src' attribute");return e}if("object"===o){const e=n.getAttribute("data");if(!e)throw new Error(o+" element is missing 'data' attribute");return e}if("image"===o||"use"===o){const e=n.getAttribute("xlink:href");if(!e)throw new Error(o+" element is missing 'xlink:href' attribute");return e}throw new Error("No URI found")}deepClone(e){return JSON.parse(JSON.stringify(e))}resolveLocation(e,t){const i=t.length-1,r=t[i];if(!r)throw new Error("Missing CFI part for index: "+i);const n=this.resolveNode(i,r,e),o=this.deepClone(r[r.length-1]);return delete o.nodeIndex,o.offset||delete n.offset,Object.assign(Object.assign({},o),n)}resolveLast(e,t){if(t=Object.assign({range:!1},t||{}),!this.isRange)return this.resolveLocation(e,this.parts);if(t.range){const t=e.createRange(),i=this.getFrom();"before"===i.relativeToNode?t.setStartBefore(i.node,i.offset):"after"===i.relativeToNode?t.setStartAfter(i.node,i.offset):t.setStart(i.node,i.offset);const r=this.getTo();return"before"===r.relativeToNode?t.setEndBefore(r.node,r.offset):"after"===r.relativeToNode?t.setEndAfter(r.node,r.offset):t.setEnd(r.node,r.offset),t}return{from:this.resolveLocation(e,this.getFrom()),to:this.resolveLocation(e,this.getTo()),isRange:!0}}resolve(e,t){return this.resolveLast(e,t)}}const dt=["color-0","color-1","color-2","color-3","line-0","line-1","line-2","line-3"],ut=["#FEF3CD","#FBFACC","#CEFACD","#CDE9FA"],ft=["#FF0000","#000080","#0000FF","#2EFF2E"],pt=["#fac106","#ebe702","#0be603","#0493e6"],gt=(e,i,r,n,o,s)=>{var a,l;let c=dt[i],h=s.contentWindow||(null===(a=s.contentDocument)||void 0===a?void 0:a.defaultView),d=e;d=[d];let u=t.getSelection(s);u.restoreCharacterRanges(o,d);let f=u.getRangeAt(0);bt(f,c,r,n,o),h&&h.getSelection()&&(null===(l=h.getSelection())||void 0===l||l.empty())},mt=(e,t,i,r,n,o,s)=>{let a=dt[t],l=s.querySelector(".noteLayer"),c=s.querySelector("#koodoPDFLayer");var h=n.getViewport({scale:o});let d=[];for(let t=0;t<e.coords.length;t++){const i=e.coords[t];var u=h.convertToViewportRectangle(i);let r=Math.abs(u[0]-u[2]),n=Math.abs(u[1]-u[3]),o=Math.min(u[1],u[3]),s=Math.min(u[0],u[2]),a=o+n,l=s+r;Math.abs(n-h.height)<10||Math.abs(r-h.width)<10||0===r||0===n||d.push({width:r,height:n,top:o,left:s,bottom:a,right:l})}let f=1e4;d.forEach((e=>{e.height<f&&(f=e.height)}));const p=d.sort(((e,t)=>e.width-t.width)),g=[];for(let e=0;e<p.length;e++){const t=p[e],i=t.bottom;p.some(((r,n)=>{if(n===e)return!1;const o=r.bottom;return Math.abs(i-o)<f&&(r.left<=t.left&&r.right>=t.right||r.left<=t.left&&Math.abs(r.right-t.right)<5||Math.abs(r.left-t.left)<5&&r.right>=t.right)}))||g.push(t)}for(let e=0;e<g.length;e++){const t=g[e];var m=document.createElement("div");c&&(null==m||m.setAttribute("style","position: absolute;"+(a.indexOf("color")>-1?"background-color: ":"border-bottom: ")+(a.indexOf("color")>-1?pt[a.split("-")[1]]:`2px solid ${ft[a.split("-")[1]]}`)+"; left:"+(t.left+parseFloat(getComputedStyle(c).marginLeft))+"px; top:"+t.top+"px;width:"+t.width+"px; height:"+t.height+"px; z-index: 1; cursor: pointer; opacity: "+(a.indexOf("color")>-1?.3:1)+";"),null==m||m.setAttribute("data-key",i),null==m||m.setAttribute("class","kookit-note"),null==m||m.addEventListener("click",(e=>{e&&e.target&&e.target.dataset&&e.target.dataset.key&&r(e)})),m.ontouchend=e=>{window.isSwiping||(e&&e.target&&e.target.dataset&&e.target.dataset.key&&r(e),e.preventDefault(),e.stopPropagation())},l.appendChild(m))}},yt=e=>{const t=e.querySelectorAll(".kookit-note");for(let e=0;e<t.length;e++){const i=t[e];i.parentNode.removeChild(i)}},bt=(e,t,i,r,n)=>{const o=e.nativeRange.getClientRects(),s=[],a=Array.from(o).sort(((e,t)=>e.width-t.width)),l=a.length?Math.max(...Array.from(o).map((e=>e.width))):0;for(let e=0;e<a.length;e++){const t=a[e];if(t.width<=0||t.height<=0)continue;s.some((e=>Math.abs(t.bottom-e.bottom)<5&&t.width===l))||s.push(t)}for(let e=0;e<s.length;e++){const o=s[e];var c=document.createElement("span");null==c||c.setAttribute("style","position: absolute;"+(t.indexOf("color")>-1?"background-color: ":"border-bottom: ")+(t.indexOf("color")>-1?ut[t.split("-")[1]]+";opacity: 1":`2px solid ${ft[t.split("-")[1]]}`)+";left:"+(Math.min(o.left,o.x)+n.body.scrollLeft)+"px; top:"+(Math.min(o.top,o.y)+n.body.scrollTop)+"px;width:"+o.width+"px; height:"+o.height+"px; z-index:-1;opacity: "+(t.indexOf("color")>-1?.8:1)+"; cursor: pointer;"),c.setAttribute("class"," kookit-note"),c.setAttribute("data-key",i),n.body.appendChild(c);var h=document.createElement("span");null==h||h.setAttribute("style","position: absolute;left:"+(Math.min(o.left,o.x)+n.body.scrollLeft)+"px; top:"+(Math.min(o.top,o.y)+n.body.scrollTop)+"px;width:"+o.width+"px; height:"+o.height+"px; z-index:1;"),h.setAttribute("class"," kookit-note"),h.setAttribute("data-key",i),h.addEventListener("click",(e=>{e&&e.target&&e.target.dataset&&e.target.dataset.key&&r(e)})),h.ontouchend=e=>{window.isSwiping||(e&&e.target&&e.target.dataset&&e.target.dataset.key&&r(e),e.preventDefault(),e.stopPropagation())},n.body.appendChild(h)}};const vt=(e,t,i)=>{!function(e){let t=document.getElementById("book");t&&t.remove();const i=document.createElement("div");i.id="book";const r=document.createElement("canvas");r.id="pageflip-canvas";const n=document.createElement("div");n.id="pages";for(let t=0;t<e;t++){const e=document.createElement("section");n.appendChild(e)}i.appendChild(r),i.appendChild(n),document.body.appendChild(i);let o=document.createElement("style");o.innerHTML="\n      #book {\n        position: fixed;\n        width: 200vw;\n        height: 100vh;\n        left: -100vw;\n        top: 0vh;\n        float: left;\n        margin: 0;\n        display: none;\n      }\n\n      #pages section {\n        display: block;\n        width: 100vw;\n        height: 100vh;\n        position: absolute;\n        left: 100vw;\n        top: 0px;\n        overflow: hidden;\n        margin: 0;\n      }\n\n      #pageflip-canvas {\n        position: absolute;\n        z-index: 100;\n        margin: 0;\n      }\n    ",document.head.appendChild(o)}(e+1);var r=window.innerWidth,n=window.innerHeight,o=2*r-0,s=n-0,a=r,l=n,c=0,h=0,d=(s-l)/2,u=0,f=document.getElementById("pageflip-canvas");if(f){var p=f.getContext("2d"),g={x:0,y:0},m=[],y=document.getElementById("book");if(y){for(var b=y.getElementsByTagName("section"),v=0,w=b.length;v<w;v++)b[v].style.zIndex=w-v+"",m.push({progress:1,target:1,page:b[v],dragging:!1});return f.width=o+0,f.height=s+0,f.style.top="0px",f.style.left="0px",setInterval((function(){p.clearRect(0,0,f.width,f.height);for(var e=0;e<m.length;e++){var t=m[e];t.dragging&&(t.target=Math.max(Math.min(g.x/a,1),-1)),t.progress+=.2*(t.target-t.progress),(t.dragging||Math.abs(t.progress)<.997)&&L(t)}}),30),document.addEventListener("mousemove",x,!1),document.addEventListener("mousedown",C,!1),document.addEventListener("mouseup",T,!1),y.addEventListener("touchmove",x,!1),y.addEventListener("touchstart",C,!1),y.addEventListener("touchend",T,!1),{flipToNextPage:()=>{u+1<m.length&&(m[u].target=-1,u=Math.min(u+1,m.length))},flipToPrevPage:()=>{u-1>=0&&(m[u-1].target=1,u=Math.max(u-1,0))},mouseDownHandler:C,mouseUpHandler:T,mouseMoveHandler:x}}}function x(e){if(!y)return;const t=e.touches[0],i=t.screenX,r=t.screenY;g.x=i-y.offsetLeft-o/2,g.y=r-y.offsetTop}function C(e){const t=e.touches[0];c=t.screenX,t.screenX<window.screen.width/2&&u-1>=0?m[u-1].dragging=!0:t.screenX>window.screen.width/2&&u+1<m.length&&(m[u].dragging=!0),e.preventDefault()}function T(e){const t=e.changedTouches[0];h=t.screenX;for(var i=0;i<m.length;i++)m[i].dragging&&(g.x<a/4*3&&h-c<0?(m[i].target=-1,u=Math.min(u+1,m.length)):g.x>a/4*1&&h-c>0?(m[i].target=1,u=Math.max(u-1,0)):i===u?m[i].target=1:i===u-1&&(m[i].target=-1)),m[i].dragging=!1}function L(e){var r=1-Math.abs(e.progress),n=.5*a*(1-e.progress),s=a*e.progress+n,c=20*r,h=.5*a*Math.max(Math.min(1-e.progress,.5),0),u=.5*a*Math.max(Math.min(r,.5),0),f=.5*a*Math.max(Math.min(r,.5),0);e.page.style.width=Math.max(s,0)+"px",p.save(),p.translate(0+o/2,d+0),p.strokeStyle=("no"===t?"rgba(0,0,0,":"rgba(255,255,255,")+.05*r+")",p.lineWidth=30*r,p.beginPath(),p.moveTo(s-n,.5*-c),p.lineTo(s-n,l+.5*c),p.stroke();var g=p.createLinearGradient(s,0,s+u,0);g.addColorStop(0,("no"===t?"rgba(0,0,0,":"rgba(255,255,255,")+.2*r+")"),g.addColorStop(.8,("no"===t?"rgba(0,0,0,":"rgba(255,255,255,")+"0.0)"),p.fillStyle=g,p.beginPath(),p.moveTo(s,0),p.lineTo(s+u,0),p.lineTo(s+u,l),p.lineTo(s,l),p.fill();var m=p.createLinearGradient(s-n-f,0,s-n,0);m.addColorStop(0,("no"===t?"rgba(0,0,0,":"rgba(255,255,255,")+"0.0)"),m.addColorStop(1,("no"===t?"rgba(0,0,0,":"rgba(255,255,255,")+.15*+r+")"),p.fillStyle=m,p.beginPath(),p.moveTo(s-n-f,0),p.lineTo(s-n,0),p.lineTo(s-n,l),p.lineTo(s-n-f,l),p.fill();var y=p.createLinearGradient(s-h,0,s,0);i?(y.addColorStop(.35,i),y.addColorStop(.73,i),y.addColorStop(.9,i),y.addColorStop(1,i)):"no"===t?(y.addColorStop(.35,"#fafafa"),y.addColorStop(.73,"#eeeeee"),y.addColorStop(.9,"#fafafa"),y.addColorStop(1,"#e2e2e2")):(y.addColorStop(.35,"#333"),y.addColorStop(.73,"#444"),y.addColorStop(.9,"#333"),y.addColorStop(1,"#444")),p.fillStyle=y,p.strokeStyle=("no"===t?"rgba(0,0,0,":"rgba(255,255,255,")+"0.06)",p.lineWidth=.5,p.beginPath(),p.moveTo(s,0),p.lineTo(s,l),p.quadraticCurveTo(s,l+2*c,s-n,l+c),p.lineTo(s-n,-c),p.quadraticCurveTo(s,2*-c,s,0),p.fill(),p.stroke(),p.restore()}},wt=(e,t,i,r,n)=>c(void 0,void 0,void 0,(function*(){let{width:o,height:s}=yield i[r].text.getDimension(),a=n.body.clientWidth,l=e.clientHeight,c=Math.min(a/o,l/s);return"scroll"===t&&(c=a/o),c})),xt=(e,t)=>{var i;const r=t.getElementById("pdf-container-"+e);if(!r)return;let n=document.createElement("iframe");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.border="0",n.style.margin="0",n.style.padding="0",n.style.fontSize="100%",n.style.font="inherit",n.scrolling="no",n.tabIndex=0,n.id="pdf-iframe-"+e;let o=document.createElement("style");return o.id="default-style",o.textContent="p,empty-line{display: inherit;margin-block-start: inherit;margin-block-end: inherit;margin-inline-start: inherit;margin-inline-end: inherit;}body{margin: 0px}",r.appendChild(n),null===(i=n.contentDocument)||void 0===i||i.head.appendChild(o),n},Ct=(e,t,i)=>c(void 0,void 0,void 0,(function*(){let r=i.getElementById("pdf-container-"+e);if(r){if("scroll"!==t){let e=r?h(r.offsetLeft)-h(r.marginLeft||parseFloat(getComputedStyle(r).marginLeft)):0;i.body.scrollTo(e,0)}else r.scrollIntoView();r.scrollIntoView()}})),Tt=(e,t,i,r)=>{var n=!1,o=t.getBoundingClientRect();if("scroll"!==i){let e=o.left;n=e>-10&&e<=r.body.clientWidth}else{let t=o.top,i=o.bottom;n=t-10>=e.scrollTop&&t+10<=e.scrollTop+e.clientHeight||i-10>=e.scrollTop&&i+10<=e.scrollTop+e.clientHeight||t+10<=e.scrollTop&&i-10>=e.scrollTop+e.clientHeight}return n},Lt=(e,t,i)=>{if(i.querySelectorAll('span[data-highlight="true"]').forEach((e=>{const t=(e.getAttribute("style")||"").replace(/background(?:-color)?\s*:[^;]+;?/gi,"").trim();t?e.setAttribute("style",t):e.removeAttribute("style"),e.removeAttribute("data-highlight")})),!e.trim())return;let r=i.querySelectorAll("p,span"),n=Array.from(r).filter(((t,i)=>(t.textContent||"").trim()&&t.textContent===e));n.length>0&&(n[0].setAttribute("style",(n[0].getAttribute("style")||"")+t),n[0].setAttribute("data-highlight","true"))},Mt=(e,t,i,r,n,o,s,a,l)=>c(void 0,void 0,void 0,(function*(){let e=Math.floor(r.body.clientWidth/12),c=e%2==0?e:e-1;const h=r.body.clientWidth;if("mimical"===t&&"yes"!==s){let e=document.getElementById("book");e&&(e.style.display="block",i>0?o():i<0&&n(),setTimeout((()=>{if(!e)return{};e.style.display="none"}),1e3))}if(i>0)if("single"===l){let e=r.querySelector("#pdf-container-"+(a-1));e&&e.scrollIntoView()}else r.body.scrollBy(-(h+c)/2,0);else if(i<0)if("single"===l){let e=r.querySelector("#pdf-container-"+(a+1));e&&e.scrollIntoView()}else r.body.scrollBy((h+c)/2,0)})),St=e=>c(void 0,void 0,void 0,(function*(){const t=1600,i=e.getViewport({scale:1}),r=document.createElement("canvas"),n=r.getContext("2d");r.width=t,r.height=t/i.width*i.height;const o={canvasContext:n,viewport:e.getViewport({scale:t/i.width})};yield e.render(o).promise;const s=r.toDataURL("image/jpeg",1),a=function(e){const t=e.length-23;return Math.ceil(.75*t)}(s);return{imageURL:s,size:a}}));function Dt(e){return c(this,void 0,void 0,(function*(){try{const t=yield fetch(e),i=yield t.blob();return yield new Promise(((e,t)=>{const r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(i)}))}catch(e){throw console.error("转换失败:",e),e}}))}function kt(){return window.visualViewport?window.visualViewport.offsetLeft:window.pageXOffset||document.documentElement.scrollLeft||0}function At(){return window.visualViewport?window.visualViewport.offsetTop:window.pageYOffset||document.documentElement.scrollTop||0}const Et=(e,t,i)=>c(void 0,void 0,void 0,(function*(){const r=e.target;if(!r)return;const n=It(r);if(n){e.preventDefault(),e.stopPropagation();let r=n.getAttribute("href");if(r&&r.startsWith("kindle:")){let e=i.resolveChapter(r);if(e)return yield i.goToChapter(e.index,e.href,e.label),!0;r="#"+(yield i.resolveHref(r)).id}let o="";if(r&&r.indexOf("#")>-1){let n=r.split("#").reverse()[0],s=t.body.querySelector("#"+n);if(!s){if(r.indexOf("filepos")>-1){let e=i.resolveChapter(r);return yield i.goToChapter(e.index,e.href,e.label),!0}if(0!==r.indexOf("#")){for(;r.startsWith(".");)r=r.substring(1);let e=i.resolveChapter(r);e&&(yield i.goToChapter(e.index,e.href,e.label))}if(s=t.body.querySelector("#"+CSS.escape(n)),!s)return!1;yield i.goToNode(t.body.querySelector("#"+CSS.escape(n)))}if((s.textContent.trim()===e.target.textContent.trim()||!s.textContent.trim())&&s.parentElement){if("BODY"===s.parentElement.tagName)return!1;s=s.parentElement}o=s.textContent}else if(r){let e=i.resolveChapter(r);e&&(yield i.goToChapter(e.index,e.href,e.label))}return window.ReactNativeWebView.postMessage(JSON.stringify({event:"link-clicked",href:r,footnote:o})),!1}}));function It(e){if("A"===e.tagName)return e;let t=e;for(;t&&"BODY"!==t.tagName;){if("A"===t.tagName)return t;t=t.parentElement}return null}function Nt(e,t,i){const r=3*t+e+1;return i.layout.A.area.includes(r)?i.touchControlA:i.layout.B.area.includes(r)?i.touchControlB:i.layout.C.area.includes(r)?i.touchControlC:"right"}const Rt=(e,i,r,n,o,s,a,l)=>{var h;let d=i.contentWindow||(null===(h=i.contentDocument)||void 0===h?void 0:h.defaultView),u=l.getDocument(),f=0,p=0,g=0,m=0;const y=30;let b=Math.floor(r.clientWidth/12),v=b%2==0?b:b-1,w=r.clientWidth+v,x=null,C=!1,T=0;e.addEventListener("touchend",(function(t){window.isSwiping=!1,window.isTouchNavigation=!0,x&&clearTimeout(x),x=setTimeout((()=>{window.isTouchNavigation=!1,x=null}),4e3);let i=(new Date).getTime();if(i-m<=300)return void t.preventDefault();m=i;const c=t.changedTouches[0],h=Date.now();let b=c.screenX,T=c.screenY;const M=h-f,S=b-p,D=T-g;if(C&&"mimical"===o&&"scroll"!==n)return C=!1,l.mouseUpHandler(t),c.screenX<window.screen.width/4*3&&b-p<0?(l.next(),C=!1):c.screenX>window.screen.width/4*1&&b-p>0&&(l.prev(),C=!1),void setTimeout((()=>{let e=document.getElementById("book");e&&(e.style.display="none")}),400);if(C&&"sliding"===o&&"scroll"!==n){let R="PDF"===s?u:e;if(window.scrollAnimationId&&cancelAnimationFrame(window.scrollAnimationId),Math.abs(R.body.scrollWidth-R.body.scrollLeft-r.clientWidth)<10)return L&&clearTimeout(L),void(L=setTimeout((()=>{l.next(),C=!1}),300));if(0===R.body.scrollLeft)return L&&clearTimeout(L),void(L=setTimeout((()=>{l.prev(),C=!1}),300));R.body.style.transform="";let P,O=R.body.scrollLeft;const B=Math.round(O/w),F=Math.abs(S)/window.screen.width,H=.1;P=S>0&&F>H?(B-1)*w:S<0&&F>H?(B+1)*w:B*w,P=Math.max(0,Math.min(P,R.body.scrollWidth-w)),R.body.scrollWidth-P<w+v&&(P=R.body.scrollWidth);const j=performance.now(),W=R.body.scrollLeft,$=P-W,U=300;R.body.style.willChange="scroll-position";const q=e=>1-Math.pow(1-e,3);function z(e){const t=e-j;if(t>=U)return R.body.scrollLeft=P,R.body.style.willChange="auto",l.record(),void(C=!1);const i=q(t/U),r=W+$*i;R.body.scrollLeft=r,window.scrollAnimationId=requestAnimationFrame(z)}window.scrollAnimationId=requestAnimationFrame(z)}else{var k=d.getSelection().toString(),A=Math.abs(S)>=y||Math.abs(D)>=y;if(!k||"PDF"===s&&("PDF"!==s||A)){if(M>500){const V=t.target;if(!V)return;if("IMG"===V.tagName||"image"===V.tagName){const X=V.src||V.getAttribute("xlink:href");return void(X.startsWith("blob:")&&Dt(X).then((e=>{window.ReactNativeWebView.postMessage(JSON.stringify({event:"view-image",imgSrc:e}))})))}}if(M<500&&Math.abs(S)<y&&Math.abs(D)<y){var E=window.screen.width/3,I=window.screen.height/3,N=Nt(Math.floor(b/E),Math.floor(T/I),a);window.ReactNativeWebView.postMessage(JSON.stringify({event:N}))}else(Math.abs(S)>=y||Math.abs(D)>=y)&&(window.ReactNativeWebView.postMessage(JSON.stringify({event:"swipe"})),"scroll"===n&&Math.abs(r.scrollHeight-r.scrollTop-r.clientHeight)<10&&window.ReactNativeWebView.postMessage(JSON.stringify({event:"scroll-bottom"})),"scroll"===n&&0===r.scrollTop&&window.ReactNativeWebView.postMessage(JSON.stringify({event:"scroll-top"})))}else window.ReactNativeWebView.postMessage(JSON.stringify({event:"select-text-after-touch",selectedText:k}))}}),!1),e.addEventListener("touchstart",(function(e){f=Date.now();const t=e.target;if(!t)return;if(It(t))return;e.touches.length>1&&e.preventDefault();const i=e.touches[0];p=i.screenX,g=i.screenY}),!1),e.addEventListener("touchmove",(function(t){if(!C&&Math.abs(t.touches[0].screenX-p)<=10)return;if(t.preventDefault(),window.visualViewport.scale>1&&"PDF"===s)return void t.preventDefault();const i=t.touches[0],r=i.screenX,a=i.screenY,c=r-p,h=a-g;if((Math.abs(c)>10||Math.abs(h)>10)&&(window.isSwiping=!0),!C&&Math.abs(c)>Math.abs(h)&&Math.abs(c)>10){if(C=!0,T=r,e.body.style.transform="translateZ(0)","mimical"===o&&"scroll"!==n){let e=document.getElementById("book");e&&(e.style.display="block",l.mouseDownHandler(t))}}else if(C&&"mimical"===o&&"scroll"!==n&&l.mouseMoveHandler(t),C&&"sliding"===o&&"scroll"!==n){let t="PDF"===s?u:e;const i=r-T,n=t.body.scrollLeft;t.body.scrollLeft=n-i,T=r,requestAnimationFrame((()=>{}))}}),!1),e.addEventListener("click",(t=>{Et(t,e,l)}),!0);let L=null,M=0,S=0,D=e=>c(void 0,void 0,void 0,(function*(){var i,n;const o=d.getSelection().toString().trim();if(o){var a=d.getSelection().getRangeAt(0);let u=l.getPageSize();var c=a.getBoundingClientRect();if("PDF"===s){let e=a.getClientRects();if(e.length>0){e=Array.from(e).filter((e=>Math.abs(e.height-u.sectionHeight)>10&&Math.abs(e.width-u.sectionWidth)>10&&e.height>0&&e.width>0));let t=1/0,i=1/0,r=-1/0,n=-1/0;for(let o=0;o<e.length;o++){const s=e[o];t=Math.min(t,s.top),i=Math.min(i,s.left),r=Math.max(r,s.bottom),n=Math.max(n,s.right)}c={top:t,left:i,bottom:r,right:n,width:n-i,height:r-t}}}var h={top:c.top-r.scrollTop,left:c.left,width:c.width,height:c.height,screenWidth:window.innerWidth,screenHeight:window.innerHeight,sectionHeight:u.sectionHeight,sectionWidth:u.sectionWidth,gap:u.gap,scale:window.visualViewport.scale,offsetLeft:A,offsetTop:E};t.init();let f=null;if("PDF"===s)try{let t=null===(n=null===(i=e.target.ownerDocument)||void 0===i?void 0:i.defaultView)||void 0===n?void 0:n.frameElement,r=(null==t?void 0:t.getAttribute("id"))||"",o=r?parseInt(r.split("-").reverse()[0]):0;f=yield l.getHightlightCoords(o),h.chapterDocIndex=o;let s=t.parentElement;s&&(h.top=h.top+parseFloat(getComputedStyle(s).top))}catch(e){console.error("Error getting highlight coords:",e)}else f=yield l.getHightlightCoords();window.ReactNativeWebView.postMessage(JSON.stringify({event:"select-text",selectedText:o,position:h,range:f}))}}));e.body.oncontextmenu=function(e){const t=e.target;if(t){if("IMG"!==t.tagName&&"image"!==t.tagName)return Date.now()-M<100?setTimeout((()=>{1===S&&D(e)}),600):D(e),e.preventDefault(),e.stopPropagation(),!1;{const e=t.src||t.getAttribute("xlink:href");e.startsWith("blob:")&&Dt(e).then((e=>{window.ReactNativeWebView.postMessage(JSON.stringify({event:"view-image",imgSrc:e}))}))}}};let k=0,A=0,E=0;e.addEventListener("selectstart",(t=>{S=0,M=Date.now(),A=kt(),E=At(),"scroll"!==n&&(k=e.body.scrollLeft)}),!1);let I=0;e.addEventListener("selectionchange",(t=>{if(!d.getSelection().toString().trim())return;k>0&&(e.body.scrollLeft=k),S++;const i=Date.now();i-I>=3e3&&(I=i,window.ReactNativeWebView.postMessage(JSON.stringify({event:"selection-change"})))}),!1)},Pt=(e,i,r,n,o,s,a,l)=>{var h;let d=i.contentWindow||(null===(h=i.contentDocument)||void 0===h?void 0:h.defaultView),u=l.getDocument(),f=0,p=0,g=0,m=0;let y=Math.floor(r.clientWidth/12),b=y%2==0?y:y-1,v=null,w=!1,x=0;e.addEventListener("touchend",(function(i){var h,y;return c(this,void 0,void 0,(function*(){window.isSwiping=!1,window.isTouchNavigation=!0,v&&clearTimeout(v),v=setTimeout((()=>{window.isTouchNavigation=!1,v=null}),4e3);let c=(new Date).getTime();if(c-m<=300)return void i.preventDefault();m=c;const x=i.changedTouches[0],T=Date.now(),L=x.screenX,M=x.screenY,S=T-f,D=L-p,k=M-g;if(w&&"mimical"===o&&"scroll"!==n)return w=!1,l.mouseUpHandler(i),L<window.screen.width/4*3&&L-p<0?(l.next(),w=!1):L>window.screen.width/4*1&&L-p>0&&(l.prev(),w=!1),void setTimeout((()=>{let e=document.getElementById("book");e&&(e.style.display="none")}),400);if(w&&"sliding"===o&&"scroll"!==n){let R="PDF"===s?u:e;if(window.scrollAnimationId&&cancelAnimationFrame(window.scrollAnimationId),Math.abs(R.body.scrollWidth-R.body.scrollLeft-r.clientWidth)<10)return C&&clearTimeout(C),void(C=setTimeout((()=>{l.next(),w=!1}),300));if(0===R.body.scrollLeft)return C&&clearTimeout(C),void(C=setTimeout((()=>{l.prev(),w=!1}),300));R.body.style.transform="";let P,O=r.clientWidth+b,B=R.body.scrollLeft;const F=Math.round(B/O),H=Math.abs(D)/window.screen.width,j=.1;P=D>0&&H>j?(F-1)*O:D<0&&H>j?(F+1)*O:F*O,P=Math.max(0,Math.min(P,R.body.scrollWidth-O)),R.body.scrollWidth-P<O+b&&(P=R.body.scrollWidth);const W=performance.now(),$=R.body.scrollLeft,U=P-$,q=300;R.body.style.willChange="scroll-position";const z=e=>1-Math.pow(1-e,3);function V(e){const t=e-W;if(t>=q)return R.body.scrollLeft=P,R.body.style.willChange="auto",l.record(),void(w=!1);const i=z(t/q),r=$+U*i;R.body.scrollLeft=r,window.scrollAnimationId=requestAnimationFrame(V)}return void(window.scrollAnimationId=requestAnimationFrame(V))}const A=d.getSelection().toString().trim();if(A){var E=d.getSelection().getRangeAt(0).getBoundingClientRect(),I=l.getPageSize(),N={top:E.top-r.scrollTop,left:E.left,width:E.width,height:E.height,screenWidth:window.innerWidth,screenHeight:window.innerHeight,sectionHeight:I.sectionHeight,sectionWidth:I.sectionWidth,gap:I.gap,scale:window.visualViewport.scale,offsetLeft:kt(),offsetTop:At()};t.init();let X=null;if("PDF"===s){let J=i.target.ownerDocument,G=null===(h=null==J?void 0:J.defaultView)||void 0===h?void 0:h.frameElement,_=(null==G?void 0:G.getAttribute("id"))||"",Y=_?parseInt(_.split("-").reverse()[0]):0;N.chapterDocIndex=Y,X=yield l.getHightlightCoords(Y);let Z=G.parentElement;Z&&(N.top=N.top+parseFloat(getComputedStyle(Z).top))}else X=yield l.getHightlightCoords();window.ReactNativeWebView.postMessage(JSON.stringify({event:"select-text",selectedText:A,position:N,range:X}))}else{if(S>500){const K=i.target;if(!K)return;if("IMG"===K.tagName||"image"===K.tagName){const Q=K.src||K.getAttribute("xlink:href");return void(Q.startsWith("blob:")&&Dt(Q).then((e=>{window.ReactNativeWebView.postMessage(JSON.stringify({event:"view-image",imgSrc:e}))})))}}if(S<500&&Math.abs(D)<30&&Math.abs(k)<30){const ee=document.documentElement.clientWidth,te=document.documentElement.clientHeight;let ie=Math.min(Math.max(L,0),ee),re=Math.min(Math.max(M,0),te);if("PDF"===s&&"double"===n){let ae=i.target.ownerDocument,le=null===(y=null==ae?void 0:ae.defaultView)||void 0===y?void 0:y.frameElement,ce=(null==le?void 0:le.getAttribute("id"))||"";(ce?parseInt(ce.split("-").reverse()[0]):0)%2==1&&(ie+=ee/2)}const ne=ee/3,oe=te/3;let se=Nt(Math.min(Math.floor(ie/ne),2),Math.min(Math.floor(re/oe),2),a);window.ReactNativeWebView.postMessage(JSON.stringify({event:se}))}else(Math.abs(D)>=30||Math.abs(k)>=30)&&(window.ReactNativeWebView.postMessage(JSON.stringify({event:"swipe"})),"scroll"===n&&Math.abs(r.scrollHeight-r.scrollTop-r.clientHeight)<10&&window.ReactNativeWebView.postMessage(JSON.stringify({event:"scroll-bottom"})),"scroll"===n&&0===r.scrollTop&&window.ReactNativeWebView.postMessage(JSON.stringify({event:"scroll-top"})))}}))}),{passive:!1}),e.addEventListener("touchstart",(function(e){const t=e.target;if(!t)return;if(It(t))return;const i=e.touches[0];f=Date.now(),p=i.screenX,g=i.screenY}),{passive:!1}),e.addEventListener("touchmove",(function(t){const i=d.getSelection().toString().trim();if(!w&&Math.abs(t.touches[0].screenX-p)<=10||i)return;if(window.visualViewport.scale>1&&"PDF"===s)return;const r=t.touches[0],a=r.screenX,c=r.screenY,h=a-p,f=c-g;if(!w&&Math.abs(h)>Math.abs(f)&&Math.abs(h)>10){if(w=!0,x=a,"mimical"===o&&"scroll"!==n){window.isSwiping=!0;let e=document.getElementById("book");e&&(e.style.display="block",l.mouseDownHandler(t))}}else if(w&&"mimical"===o&&"scroll"!==n&&l.mouseMoveHandler(t),w&&"sliding"===o&&"scroll"!==n){window.isSwiping=!0;let t="PDF"===s?u:e;const i=a-x,r=t.body.scrollLeft;t.body.scrollLeft=r-i,x=a,requestAnimationFrame((()=>{}))}}),{passive:!1}),e.addEventListener("click",(t=>{Et(t,e,l)}),!0);let C=null;e.body.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1};let T=0;e.addEventListener("selectionchange",(e=>{if(!d.getSelection().toString().trim())return;const t=Date.now();t-T>=3e3&&(T=t,window.ReactNativeWebView.postMessage(JSON.stringify({event:"selection-change"})))}),{passive:!1})};class Ot extends rt{constructor(e){super(),this.tranformText=()=>{let e=this.getDocument();e&&("Simplified To Traditional"===this.convertChinese?e.querySelectorAll("h1,h2,h3,h4,h5,h6,p,div,ul,dl,ol,pre,li,dt,dd,blockquote,address,kookitmarker").forEach((e=>{e.innerHTML=e.innerHTML.split("").map((e=>ke(e))).join("")})):"Traditional To Simplified"===this.convertChinese&&e.querySelectorAll("h1,h2,h3,h4,h5,h6,p,div,ul,dl,ol,pre,li,dt,dd,blockquote,address,kookitmarker").forEach((e=>{e.innerHTML=e.innerHTML.split("").map((e=>Ae(e))).join("")})),"yes"===this.isIndent&&e.querySelectorAll("h1,h2,h3,h4,h5,h6,p,div,ul,dl,ol,pre,li,dt,dd,blockquote,address").forEach((e=>{for(let t of e.childNodes){if(t.nodeType===Node.TEXT_NODE){(t.nodeValue||"").match(/^(\s+)/)&&e.setAttribute("style",(e.getAttribute("style")||"")+"text-indent: 0em !important;");break}if(t.nodeType===Node.ELEMENT_NODE&&"img"===t.tagName.toLowerCase()){e.setAttribute("style",(e.getAttribute("style")||"")+"text-indent: 0em !important;");break}}})))},this.addPageAnimation=e=>{if("mimical"===this.animation){let t=this.getProgress();if(!t)return;const i=vt(t.totalPage,this.isDarkMode,e);i&&(this.flipToNextPage=i.flipToNextPage,this.flipToPrevPage=i.flipToPrevPage,this.mouseDownHandler=i.mouseDownHandler,this.mouseUpHandler=i.mouseUpHandler,this.mouseMoveHandler=i.mouseMoveHandler)}},this.readerMode=e.readerMode,this.animation=e.animation,this.format=e.format,this.convertChinese=e.convertChinese,this.isIndent=e.isIndent,this.isDarkMode=e.isDarkMode,this.isMobile=e.isMobile,this.chapterList=[],this.chapterDocList=[],this.flattenChapters=[],this.book="",this.element="",this.tempLocation={},this.flipToNextPage=()=>{},this.flipToPrevPage=()=>{},this.mouseDownHandler=()=>{},this.mouseUpHandler=()=>{},this.mouseMoveHandler=e=>{},this.touchEventSet={},"yes"===this.isMobile&&(console.log=function(...e){window.ReactNativeWebView.postMessage(e.map((e=>String(e))).join(", "))},console.info=function(...e){window.ReactNativeWebView.postMessage(e.map((e=>String(e))).join(", "))},console.error=function(...e){window.ReactNativeWebView.postMessage(e.map((e=>String(e))).join(", "))})}getPageSize(){let e="double"===this.readerMode?2:1,t=Math.floor(this.element.clientWidth/12),i=t%2==0?t:t-1,r=this.getIframe();if(!r)return;let n=null==r?void 0:r.getBoundingClientRect().height;return{width:this.element.clientWidth,height:this.element.clientHeight,left:this.element.offsetLeft,top:this.element.offsetTop,scrollTop:this.element.scrollTop,sectionWidth:(this.element.clientWidth-i)/e,sectionHeight:n,gap:i}}scrollToText(e){let t=this.getDocument();if(!t)return;let i=We(t.body).filter((e=>!tt(e))).filter((t=>(t.textContent||"").indexOf(e)>-1));if(i.length>0){let e=i[0],r=e?h(e.offsetLeft)-h(e.marginLeft||parseFloat(getComputedStyle(e).marginLeft)):0,n=e?h(e.offsetTop)-h(e.marginTop||parseFloat(getComputedStyle(e).marginTop)):0;"scroll"!==this.readerMode?t.body.scrollTo(r,0):this.element.scrollTo(0,n)}}goToPage(e){return c(this,void 0,void 0,(function*(){if("scroll"===this.readerMode){e<0&&(e=1);let t=(e-1)*(this.element.clientHeight-50);this.element.scrollTo(0,t)}else{let t=this.getDocument();if(!t)return;let i=Math.floor(this.element.clientWidth/12),r=i%2==0?i:i-1;const n=this.element.clientWidth+r;"double"===this.readerMode?e=(e%2==0?e-2:e-1)/2:e-=1,e<0&&(e=0);const o=e*n;t.body.scrollTo({top:0,left:o,behavior:"sliding"===this.animation&&"yes"!==this.isMobile?"smooth":"auto"})}yield this.record()}))}resolveChapter(e){let t=e,i=-1;for(let e=0;e<this.flattenChapters.length;e++)if(this.flattenChapters[e].href.includes(t)){i=e;break}if(i>-1)return this.flattenChapters[i];{let r=e.split("#")[0];for(let e=0;e<this.flattenChapters.length;e++)if(this.flattenChapters[e].href.includes(r.substring(1))){i=e;break}if(i>-1)return this.flattenChapters[i];for(let e=0;e<this.chapterDocList.length;e++)if(this.chapterDocList[e].text&&this.chapterDocList[e].text.id&&(this.chapterDocList[e].text.id+"").includes(t)){i=e;break}return i>-1?{label:"",href:"",index:i}:null}}flatChapter(e){let t=[];for(let i=0;i<e.length;i++)e[i].subitems&&e[i].subitems.length>0?(t.push(e[i]),t=t.concat(this.flatChapter(e[i].subitems))):t.push(e[i]);return this.flattenChapters=t,t}getChapter(){return this.chapterList}getChapterDoc(){return this.chapterDocList}goToPercentage(e){return c(this,void 0,void 0,(function*(){if(this.flattenChapters.length>0){let t=1===e?this.flattenChapters.length-1:Math.floor(this.flattenChapters.length*e);yield this.goToChapter(this.flattenChapters[t].index.toString(),this.flattenChapters[t].href,this.flattenChapters[t].label)}}))}goToChapterIndex(e){return c(this,void 0,void 0,(function*(){this.flattenChapters.length>0&&(yield this.goToChapter(this.flattenChapters[e].index,this.flattenChapters[e].href,this.flattenChapters[e].label))}))}goToChapterDocIndex(e){return c(this,void 0,void 0,(function*(){this.chapterDocList.length>0&&(yield this.goToChapter(e,this.chapterDocList[e].href,this.chapterDocList[e].label))}))}goToChapter(e,t,i){return c(this,void 0,void 0,(function*(){let r=this.getDocument(),n=this.getIframe();r&&n&&(yield ze(parseInt(e),i,t,this.chapterDocList,this.element,this.readerMode,this.format,this.tempLocation,r,n),t&&t.indexOf("#")>-1&&(yield Xe(this.element,this.readerMode,"","",t,"",r)),yield this.record(),this.trigger("rendered"))}))}goToPosition(e){return c(this,void 0,void 0,(function*(){let i=this.getDocument(),r=this.getIframe();if(!i||!r)return;let n=JSON.parse(e);this.tempLocation={text:n.text,chapterTitle:n.chapterTitle,chapterDocIndex:n.chapterDocIndex,chapterHref:n.chapterHref,count:n.count,page:n.page,percentage:n.percentage};let{text:o,chapterTitle:s,chapterDocIndex:a,chapterHref:l,count:c,page:h,cfi:d}=n;if(yield ze(parseInt(a),s,l,this.chapterDocList,this.element,this.readerMode,this.format,this.tempLocation,i,r),d){const e=new ht(d,{});let t=this.getDocument();if(!t)return;const{node:i,offset:r}=e.resolve(t,{});if(i){let e=null,t=i;for(;t;){const i=t;if(i.tagName&&"h1,h2,h3,h4,h5,h6,p,div,ul,dl,ol,pre,li,dt,dd,blockquote,address,kookitmarker".indexOf(i.tagName.toLowerCase())>-1){e=i;break}t=t.parentNode}e&&(c="ignore",o=e.textContent)}}yield Xe(this.element,this.readerMode,o,c,"",h,i),t.init(),yield this.record(),this.trigger("rendered")}))}getDocument(){let e=document.getElementById("page-area");if(!e)return null;let t=e.getElementsByTagName("iframe")[0];if(!t)return null;let i=t.contentDocument;return i||null}getIframe(){let e=document.getElementById("page-area");if(!e)return null;let t=e.getElementsByTagName("iframe")[0];return t||null}goToNode(e){return c(this,void 0,void 0,(function*(){let t=this.getDocument();if(!t)return;let i=Je(e,this.element,this.readerMode),r=i?h(i.offsetLeft)-h(i.marginLeft||parseFloat(getComputedStyle(i).marginLeft)):0,n=i?h(i.offsetTop)-h(i.marginTop||parseFloat(getComputedStyle(i).marginTop)):0;"scroll"!==this.readerMode?t.body.scrollTo(r,0):this.element.scrollTo(0,n),yield this.record(),this.trigger("rendered")}))}removeContent(){this.element.innerHTML=""}prev(){return c(this,void 0,void 0,(function*(){let e=this.getDocument(),t=this.getIframe();if(e&&t){if("scroll"===this.readerMode&&0===h(this.element.scrollTop)||"scroll"!==this.readerMode&&0===h(e.body.scrollLeft)){if("0"===this.tempLocation.chapterDocIndex)return;"mimical"===this.animation&&"scroll"!==this.readerMode&&"yes"===this.isMobile&&(yield new Promise((e=>setTimeout(e,500)))),yield qe(this.element,this.flatChapter(this.chapterList),this.chapterDocList,this.readerMode,this.format,this.tempLocation,e,t),parseInt(this.tempLocation.chapterDocIndex||"-1")>-1&&("scroll"===this.readerMode?this.element.scrollTo(0,e.body.scrollHeight):e.body.scrollTo(e.body.scrollWidth,0)),this.trigger("rendered")}else"scroll"===this.readerMode?this.element.scrollBy({left:0,top:-(this.element.clientHeight-50),behavior:"smooth"}):yield $e(this.element,this.animation,1,e,this.flipToNextPage,this.flipToPrevPage,this.isMobile);yield this.record()}}))}next(){return c(this,void 0,void 0,(function*(){let e=this.getDocument(),t=this.getIframe();e&&t&&(Math.abs(e.body.scrollWidth-h(e.body.scrollLeft)-e.body.clientWidth)<50&&"scroll"!==this.readerMode||Math.abs(this.element.scrollHeight-h(this.element.scrollTop)-this.element.clientHeight)<20&&"scroll"===this.readerMode?("mimical"===this.animation&&"scroll"!==this.readerMode&&"yes"===this.isMobile&&(yield new Promise((e=>setTimeout(e,500)))),yield Ke(this.element,this.flatChapter(this.chapterList),this.chapterDocList,this.readerMode,this.format,this.tempLocation,e,t),this.trigger("rendered")):"scroll"===this.readerMode?Math.abs(this.element.scrollHeight-h(this.element.scrollTop)-this.element.clientHeight)-(this.element.clientHeight-50)<20&&Math.abs(this.element.scrollHeight-h(this.element.scrollTop)-this.element.clientHeight)>20?this.element.scrollTo({left:0,top:this.element.scrollHeight-20,behavior:"smooth"}):this.element.scrollBy({left:0,top:this.element.clientHeight-50,behavior:"smooth"}):yield $e(this.element,this.animation,-1,e,this.flipToNextPage,this.flipToPrevPage,this.isMobile),yield this.record())}))}prevChapter(){return c(this,void 0,void 0,(function*(){let e=this.getDocument(),t=this.getIframe();e&&t&&(yield qe(this.element,this.flatChapter(this.chapterList),this.chapterDocList,this.readerMode,this.format,this.tempLocation,e,t),yield this.record(),this.trigger("rendered"))}))}nextChapter(){return c(this,void 0,void 0,(function*(){let e=this.getDocument(),t=this.getIframe();e&&t&&(yield Ke(this.element,this.flatChapter(this.chapterList),this.chapterDocList,this.readerMode,this.format,this.tempLocation,e,t),yield this.record(),this.trigger("rendered"))}))}visibleText(){return c(this,void 0,void 0,(function*(){let e=this.getDocument();return e?Qe(this.element,this.readerMode,e):""}))}audioText(){return c(this,void 0,void 0,(function*(){let e=this.getDocument();return e?((e,t,i)=>{let r=We(i.body).filter((e=>!tt(e))),n=r.filter((e=>{if(!(e.textContent||"").trim())return!1;let t=e.parentElement;for(;t&&t!==i.body;){if(r.includes(t))return!1;t=t.parentElement}return!0})).filter((e=>{var t;return"img"!==e.textContent&&!(null===(t=e.textContent)||void 0===t?void 0:t.startsWith("img"))})).map((e=>e.textContent)),o=0,s=Qe(e,t,i);if(s&&s.length>0){let e=s[0];o=n.indexOf(e)}return n.slice(o)})(this.element,this.readerMode,e):""}))}chapterText(){return c(this,void 0,void 0,(function*(){let e=this.getDocument();return e&&e.body.textContent||""}))}autoScroll(e,t){if(!this.getDocument())return;if(this.scrollTimer&&(cancelAnimationFrame(this.scrollTimer),this.scrollTimer=null),this.recordTimer&&(clearInterval(this.recordTimer),this.recordTimer=null),"no"===t||"scroll"!==this.readerMode)return;let i=0,r=0;const n=()=>{if(i+=e,r++,Math.abs(e)<1){if((Math.abs(i)>=.5||r%Math.max(1,Math.floor(30/Math.abs(e)))==0)&&Math.abs(i)>=.1){const e=Math.round(10*i)/10;this.element.scrollBy({left:0,top:e,behavior:"auto"}),i=0,r=0}}else if(Math.abs(i)>=1){const e=Math.floor(i);this.element.scrollBy({left:0,top:e,behavior:"auto"}),i-=e}this.scrollTimer=requestAnimationFrame(n)};this.scrollTimer=requestAnimationFrame(n),this.recordTimer=setInterval((()=>{"scroll"===this.readerMode&&Math.abs(this.element.scrollHeight-this.element.scrollTop-this.element.clientHeight)<10&&this.nextChapter(),this.record()}),3e3)}autoScrollIOS(e,t){let i=this.getDocument();if(!i)return;if(this.scrollTimer&&(clearInterval(this.scrollTimer),this.scrollTimer=null),this.recordTimer&&(clearInterval(this.recordTimer),this.recordTimer=null),"no"===t||"scroll"!==this.readerMode)return;let r=0,n=this.element.scrollTop;this.scrollTimer=setInterval((()=>{r+=e,i&&(i.body.style.transform=`translateY(-${r}px)`,Math.abs(r)>=50&&(i.body.style.transform="translateY(0px)",n+=r,this.element.scrollTo({left:0,top:n,behavior:"auto"}),r=0))}),30),this.recordTimer=setInterval((()=>{"scroll"===this.readerMode&&Math.abs(this.element.scrollHeight-this.element.scrollTop-this.element.clientHeight)<10&&this.nextChapter(),this.record()}),3e3)}highlightSearchNode(e,t){let i=this.getDocument();i&&et(e,t,i)}highlightAudioNode(e,t){let i=this.getDocument();i&&((e,t,i,r,n)=>{if(i.querySelectorAll('span[data-highlight="true"]').forEach((e=>{const t=e.parentNode;t&&t.replaceChild(i.createTextNode(e.textContent||""),e)})),!e.trim())return;let o=We(i.body).filter((e=>it(r,e,n)&&(e.textContent||"").trim())).filter((t=>{const i=t.textContent||"";return i.trim()&&i.indexOf(e)>-1}));if(o.length>0){const r=r=>{var n;if(r.nodeType===Node.TEXT_NODE){const o=r.textContent||"",s=o.indexOf(e);if(s>-1){const a=o.substring(0,s),l=o.substring(s+e.length),c=i.createElement("span");c.setAttribute("style",t),c.setAttribute("data-highlight","true"),c.textContent=e;const h=i.createDocumentFragment();return a&&h.appendChild(i.createTextNode(a)),h.appendChild(c),l&&h.appendChild(i.createTextNode(l)),null===(n=r.parentNode)||void 0===n||n.replaceChild(h,r),!0}}return!1},n=e=>{if(r(e))return!0;const t=Array.from(e.childNodes);for(const e of t)if(n(e))return!0;return!1};n(o[0])}})(e,t,i,this.element,this.readerMode)}doSearch(t){return c(this,void 0,void 0,(function*(){return"PDF"===this.format?yield((t,i)=>c(void 0,void 0,void 0,(function*(){let r=[];for(let e=0;e<i.length;e++)(yield i[e].text.getTextContent()).items.forEach(((n,o)=>{n.str.indexOf(t)>-1&&r.push({excerpt:n.str,cfi:JSON.stringify({text:n.str+"#"+e+"#"+o,chapterTitle:i[e].label,chapterDocIndex:e,chapterHref:i[e].href,count:"search",percentage:e/i.length,keyword:t})})}));return e.uniq(r,"excerpt")})))(t,this.chapterDocList):yield((t,i)=>c(void 0,void 0,void 0,(function*(){var r;let n=[];for(let e=0;e<i.length;e++){let o=(new DOMParser).parseFromString(yield d(i[e].text,!0),"text/html"),s=We(o.body).filter((e=>!tt(e)));for(let o=0;o<s.length;o++){let a=(s[o].textContent||"").indexOf(t);a>-1&&n.push({excerpt:(null===(r=s[o].textContent)||void 0===r?void 0:r.substring(a-100,a+100))||"",cfi:JSON.stringify({text:s[o].textContent,chapterTitle:i[e].label,chapterDocIndex:e,chapterHref:i[e].href,count:"search",percentage:e/i.length,keyword:t})})}}return e.uniq(n,"excerpt")})))(t,this.chapterDocList)}))}getProgress(){let e=this.getDocument();if(e)return m(this.readerMode,e,this.element)}record(){return c(this,void 0,void 0,(function*(){""!==this.animation&&(yield new Promise((e=>setTimeout(e,1e3))));let e=this.getDocument();e&&(yield _e(this.element,this.readerMode,this.flatChapter(this.chapterList),this.chapterDocList,this.tempLocation,e,null),this.trigger("page-changed"))}))}getPosition(){return this.tempLocation}getNotePosition(){return c(this,void 0,void 0,(function*(){let e=this.getDocument();if(!e)return;let t=x(e);return t?(yield _e(this.element,this.readerMode,this.flatChapter(this.chapterList),this.chapterDocList,this.tempLocation,e,t),this.tempLocation):void 0}))}setStyle(e){let t=this.getDocument();if(t){var i=document.createElement("style");i.innerHTML=e,t.head.appendChild(i)}}getHightlightCoords(){return c(this,void 0,void 0,(function*(){let e=this.getDocument(),i=this.getIframe();if(e&&i)return t.getSelection(i).saveCharacterRanges(e.body)[0]}))}renderHighlighters(e,t){return c(this,void 0,void 0,(function*(){let i=this.getDocument(),r=this.getIframe();if(i&&r){yt(i);for(let n=0;n<e.length;n++){const o=e[n];try{yield new Promise((e=>setTimeout(e,5))),gt(JSON.parse(o.range),o.color,o.key,t,i,r)}catch(e){return void console.error(e,"Exception has been caught when restore character ranges.")}}}}))}removeOneNote(e,t){let i=this.getDocument();if(!i)return;const r=i.querySelectorAll(".kookit-note");for(let t=0;t<r.length;t++){const i=r[t];i.getAttribute("data-key")===e&&i.parentNode.removeChild(i)}}createOneNote(e,t){return c(this,void 0,void 0,(function*(){let i=this.getDocument(),r=this.getIframe();i&&r&&gt(JSON.parse(e.range),e.color,e.key,t,i,r)}))}displayFontBase64(e,t,i,r){return c(this,void 0,void 0,(function*(){let n=this.getDocument();if(!n||0===t.length)return;const o=new FontFace(e,`url(data:font/${r};charset=utf-8;base64,${t})`);let s=yield o.load();document.fonts.add(s);const a="@font-face {  font-family: '"+e+"';  src: url('data:font/"+r+";charset=utf-8;base64,"+t+"') format('"+i+"');}",l=document.createElement("style");l.type="text/css",l.appendChild(document.createTextNode(a)),n.head.appendChild(l)}))}displayFontUrl(e,t){return c(this,void 0,void 0,(function*(){let i=this.getDocument();if(!i||0===t.length)return;const r=new FontFace(e,`url(${t})`);let n=yield r.load();document.fonts.add(n);const o="@font-face {  font-family: '"+e+"';  src: url('"+t+"') format('truetype');}",s=document.createElement("style");s.type="text/css",s.appendChild(document.createTextNode(o)),i.head.appendChild(s)}))}getAllDocuments(){let e=this.getDocument();if(!e)return[];if("PDF"!==this.format)return[e];let t=e.querySelectorAll("iframe"),i=[];return t.forEach((e=>{let t=e.contentDocument;t&&i.push(t)})),[e,...i]}getAllIframes(){let e=this.getIframe();if(!e)return[];if("PDF"!==this.format)return[e];let t=this.getDocument();if(!t)return[];let i=t.querySelectorAll("iframe"),r=[];return i.forEach((e=>{let t=e;r.push(t)})),[e,...r]}addTouchEvent(e,t){let i=this.getAllDocuments(),r=this.getAllIframes();for(let n=0;n<i.length;n++){const o=i[n],s=r[n];if(!o||!s)continue;let a=s.id;this.touchEventSet[a]||(this.touchEventSet[a]=!0,"yes"===e?Rt(o,s,this.element,this.readerMode,this.animation,this.format,t,this):Pt(o,s,this.element,this.readerMode,this.animation,this.format,t,this))}}clearSelection(){var e,t;let i=this.getAllIframes();for(let r=0;r<i.length;r++){const n=i[r];if(!n)continue;let o=n.contentWindow||(null===(e=n.contentDocument)||void 0===e?void 0:e.defaultView);if(!o||!o.getSelection())return;null===(t=o.getSelection())||void 0===t||t.empty()}}restoreSelectionClearHighlight(){if("PDF"===this.format)return;let e=this.getDocument();if(!e)return;e.querySelectorAll("#temp-highlight").forEach((e=>{var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}));let i=this.getIframe();if(!i)return;let r=window.charRange;r&&t.getSelection(i).restoreCharacterRanges(e,[r])}}const Bt={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",webp:"image/webp",zip:"application/zip",rar:"application/x-rar-compressed","7z":"application/x-7z-compressed",tar:"application/x-tar",html:"text/html",htm:"text/html",xml:"text/xml",xhtml:"application/xhtml+xml",css:"text/css"},Ft={"image/svg+xml":"svg","image/png":"png","image/jpeg":"jpg","image/gif":"gif","image/webp":"webp","application/zip":"zip","application/x-rar-compressed":"rar","application/x-7z-compressed":"7z","application/x-tar":"tar","text/html":"html","text/xml":"xml","application/xhtml+xml":"xhtml","text/css":"css"},Ht=t=>c(void 0,void 0,void 0,(function*(){let r=yield i.loadAsync(t);var n=r.file("toc.json");let o=[];n&&(o=JSON.parse(yield n.async("string")));var s=r.file("sections.json");let a=[];s&&(a=JSON.parse(yield s.async("string")));const l={getCover:()=>""};return l.sections=a.map(((e,t)=>({id:e.href,load:()=>(e=>c(void 0,void 0,void 0,(function*(){var t=r.file("chapters/"+e+".html");let i="";return t&&(i=yield t.async("string")),URL.createObjectURL(new Blob([i],{type:"text/html"}))})))(t),unload:()=>{},loadAsset:e=>(e=>c(void 0,void 0,void 0,(function*(){var t=r.file(e);let i;return t&&(i=yield t.async("arraybuffer")),URL.createObjectURL(new Blob([i],{type:Bt[e.split(".").reverse()[0]]}))})))(e)}))),l.toc=o.map((e=>({label:e.label,href:e.href,subitems:e.subitems}))),l.rendition={layout:"pre-paginated"},l.resolveHref=t=>({index:e.findLastIndex(a,{href:t})}),l.splitTOCHref=e=>[e,null],l.getTOCFragment=e=>e.documentElement,l})),jt=e=>new Promise(((t,r)=>c(void 0,void 0,void 0,(function*(){let r=new T(e),n=yield r.getChapter(e.toc),o=yield r.getChapterDoc(),s=n,a=o.map((e=>({href:e.href,label:e.label}))),l=yield Promise.all(o.map((e=>c(void 0,void 0,void 0,(function*(){let t="";if(e.text&&e.text.load){let i=yield fetch(yield e.text.load()).then((e=>e.blob()));t=yield i.text()}return t}))))),h=new i;h.file("toc.json",JSON.stringify(s)),h.file("sections.json",JSON.stringify(a));let d=[];for(let e=0;e<l.length;e++){let t=(new DOMParser).parseFromString(l[e],"text/html"),i=u(t);for(let t=0;t<i.length;t++){let r=h.folder("imgs/"+e);if(!r)break;let n=i[t].getAttribute("src")||i[t].getAttribute("xlink:href");if(n)try{let o=yield fetch(yield n).then((e=>e.blob()));r.file(t+"."+Ft[o.type],o);let s="imgs/"+e+"/"+t+"."+Ft[o.type];i[t].src=s,i[t].getAttribute("xlink:href")&&i[t].setAttribute("xlink:href",s)}catch(e){console.error(e)}}let r=Array.from(t.getElementsByTagName("link"));for(let t=0;t<r.length;t++){let i=r[t],n=h.folder("css/"+e);if(!n)break;if(i.getAttribute("href"))try{let r=yield fetch(yield i.getAttribute("href")).then((e=>e.blob()));n.file(t+"."+Ft[r.type],r),i.href="css/"+e+"/"+t+"."+Ft[r.type]}catch(e){console.error(e)}}d.push(t.documentElement.innerHTML)}let f=h.folder("chapters");if(f){for(let e=0;e<d.length;e++)f.file(e+".html",d[e]);h.generateAsync({type:"blob"}).then((e=>c(void 0,void 0,void 0,(function*(){t(yield new Response(e).arrayBuffer())})))).catch((e=>{t("err")}))}}))));class Wt extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"EPUB"})),this.epubBuffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}parse(){return c(this,void 0,void 0,(function*(){let e=new Blob([this.epubBuffer]),t=new File([e],"book",{lastModified:(new Date).getTime(),type:e.type});try{const e=yield this.makeZipLoader(t);this.book=yield new Le(e).init()}catch(e){throw console.error(e),e}}))}preCache(){return c(this,void 0,void 0,(function*(){try{return this.book||(yield this.parse()),yield jt(this.book)}catch(e){return""}}))}makeZipLoader(e){return c(this,void 0,void 0,(function*(){let t=yield i.loadAsync(e);const r=t.files;return{entries:Object.values(r).map((e=>({filename:e.name}))),loadText:e=>c(this,void 0,void 0,(function*(){let i=t.file(e);return i?i.async("string"):""})),loadBlob:e=>c(this,void 0,void 0,(function*(){let i=t.file(e);if(i){let e=yield i.async("arraybuffer");return new Blob([e])}return new Blob([new ArrayBuffer(0)])})),getSize:e=>{let i=t.file(e);if(i)return i._data.uncompressedSize||0}}}))}getMetadata(){return c(this,void 0,void 0,(function*(){try{this.book||(yield this.parse());let e=new T(this.book);return yield e.getMetadata()}catch(e){throw console.error(e,"error"),e}}))}}const $t=e=>{if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value},Ut={XML:"application/xml",XHTML:"application/xhtml+xml",HTML:"text/html",CSS:"text/css",SVG:"image/svg+xml"},qt={name:[0,32,"string"],type:[60,4,"string"],creator:[64,4,"string"],numRecords:[76,2,"uint"]},zt={compression:[0,2,"uint"],numTextRecords:[8,2,"uint"],recordSize:[10,2,"uint"],encryption:[12,2,"uint"]},Vt={magic:[16,4,"string"],length:[20,4,"uint"],type:[24,4,"uint"],encoding:[28,4,"uint"],uid:[32,4,"uint"],version:[36,4,"uint"],titleOffset:[84,4,"uint"],titleLength:[88,4,"uint"],localeRegion:[94,1,"uint"],localeLanguage:[95,1,"uint"],resourceStart:[108,4,"uint"],huffcdic:[112,4,"uint"],numHuffcdic:[116,4,"uint"],exthFlag:[128,4,"uint"],trailingFlags:[240,4,"uint"],indx:[244,4,"uint"]},Xt={resourceStart:[108,4,"uint"],fdst:[192,4,"uint"],numFdst:[196,4,"uint"],frag:[248,4,"uint"],skel:[252,4,"uint"],guide:[260,4,"uint"]},Jt={magic:[0,4,"string"],length:[4,4,"uint"],count:[8,4,"uint"]},Gt={magic:[0,4,"string"],length:[4,4,"uint"],type:[8,4,"uint"],idxt:[20,4,"uint"],numRecords:[24,4,"uint"],encoding:[28,4,"uint"],language:[32,4,"uint"],total:[36,4,"uint"],ordt:[40,4,"uint"],ligt:[44,4,"uint"],numLigt:[48,4,"uint"],numCncx:[52,4,"uint"]},_t={magic:[0,4,"string"],length:[4,4,"uint"],numControlBytes:[8,4,"uint"]},Yt={magic:[0,4,"string"],offset1:[8,4,"uint"],offset2:[12,4,"uint"]},Zt={magic:[0,4,"string"],length:[4,4,"uint"],numEntries:[8,4,"uint"],codeLength:[12,4,"uint"]},Kt={magic:[0,4,"string"],numEntries:[8,4,"uint"]},Qt={flags:[8,4,"uint"],dataStart:[12,4,"uint"],keyLength:[16,4,"uint"],keyStart:[20,4,"uint"]},ei={1252:"windows-1252",65001:"utf-8"},ti={100:["creator","string",!0],101:["publisher"],103:["description"],104:["isbn"],105:["subject","string",!0],106:["date"],108:["contributor","string",!0],109:["rights"],110:["subjectCode","string",!0],112:["source","string",!0],113:["asin"],121:["boundary","uint"],122:["fixedLayout"],125:["numResources","uint"],126:["originalResolution"],127:["zeroGutter"],128:["zeroMargin"],129:["coverURI"],132:["regionMagnification"],201:["coverOffset","uint"],202:["thumbnailOffset","uint"],503:["title"],524:["language","string",!0],527:["pageProgressionDirection"]},ii={1:["ar","ar-SA","ar-IQ","ar-EG","ar-LY","ar-DZ","ar-MA","ar-TN","ar-OM","ar-YE","ar-SY","ar-JO","ar-LB","ar-KW","ar-AE","ar-BH","ar-QA"],2:["bg"],3:["ca"],4:["zh","zh-TW","zh-CN","zh-HK","zh-SG"],5:["cs"],6:["da"],7:["de","de-DE","de-CH","de-AT","de-LU","de-LI"],8:["el"],9:["en","en-US","en-GB","en-AU","en-CA","en-NZ","en-IE","en-ZA","en-JM",null,"en-BZ","en-TT","en-ZW","en-PH"],10:["es","es-ES","es-MX",null,"es-GT","es-CR","es-PA","es-DO","es-VE","es-CO","es-PE","es-AR","es-EC","es-CL","es-UY","es-PY","es-BO","es-SV","es-HN","es-NI","es-PR"],11:["fi"],12:["fr","fr-FR","fr-BE","fr-CA","fr-CH","fr-LU","fr-MC"],13:["he"],14:["hu"],15:["is"],16:["it","it-IT","it-CH"],17:["ja"],18:["ko"],19:["nl","nl-NL","nl-BE"],20:["no","nb","nn"],21:["pl"],22:["pt","pt-BR","pt-PT"],23:["rm"],24:["ro"],25:["ru"],26:["hr",null,"sr"],27:["sk"],28:["sq"],29:["sv","sv-SE","sv-FI"],30:["th"],31:["tr"],32:["ur"],33:["id"],34:["uk"],35:["be"],36:["sl"],37:["et"],38:["lv"],39:["lt"],41:["fa"],42:["vi"],43:["hy"],44:["az"],45:["eu"],46:["hsb"],47:["mk"],48:["st"],49:["ts"],50:["tn"],52:["xh"],53:["zu"],54:["af"],55:["ka"],56:["fo"],57:["hi"],58:["mt"],59:["se"],62:["ms"],63:["kk"],65:["sw"],67:["uz",null,"uz-UZ"],68:["tt"],69:["bn"],70:["pa"],71:["gu"],72:["or"],73:["ta"],74:["te"],75:["kn"],76:["ml"],77:["as"],78:["mr"],79:["sa"],82:["cy","cy-GB"],83:["gl","gl-ES"],87:["kok"],97:["ne"],98:["fy"]},ri=(e,t)=>{const i=new e.constructor(e.length+t.length);return i.set(e),i.set(t,e.length),i},ni=(e,t,i)=>{const r=new e.constructor(e.length+t.length+i.length);return r.set(e),r.set(t,e.length),r.set(i,e.length+t.length),r},oi=new TextDecoder,si=e=>oi.decode(e),ai=e=>{if(!e)return;const t=e.byteLength,i=4===t?"getUint32":2===t?"getUint16":"getUint8";return new DataView(e)[i](0)},li=(e,t)=>Object.fromEntries(Array.from(Object.entries(e)).map((([e,[i,r,n]])=>[e,("string"===n?si:ai)(t.slice(i,i+r))]))),ci=e=>new TextDecoder(ei[e]),hi=(e,t=0)=>{let i=0,r=0;for(const n of e.subarray(t,t+4))if(i=i<<7|(127&n)>>>0,r++,128&n)break;return{value:i,length:r}},di=e=>{let t=0;for(const i of e.subarray(-4))128&i&&(t=0),t=t<<7|127&i;return t},ui=e=>{let t=0;for(;e>0;e>>=1)1&~e||t++;return t},fi=e=>{let t=0;for(;!(1&e);)e>>=1,t++;return t},pi=e=>{let t=[];for(let i=0;i<e.length;i++){const r=e[i];if(0===r)t.push(0);else if(r<=8)for(const n of e.subarray(i+1,(i+=r)+1))t.push(n);else if(r<=127)t.push(r);else if(r<=191){const n=r<<8|e[1+i++],o=(16383&n)>>>3,s=3+(7&n);for(let e=0;e<s;e++)t.push(t[t.length-o])}else t.push(32,128^r)}return Uint8Array.from(t)},gi=(e,t)=>{const i=t+32,r=i>>3;let n=0n;for(let i=t>>3;i<=r;i++)n=n<<8n|BigInt(e[i]??0);return n>>8n-BigInt(7&i)&0xffffffffn},mi=async(e,t)=>{const i=await t(e),r=li(Gt,i);if("INDX"!==r.magic)throw new Error("Invalid INDX record");const n=ci(r.encoding),o=i.slice(r.length),s=li(_t,o);if("TAGX"!==s.magic)throw new Error("Invalid TAGX section");const a=(s.length-12)/4,l=Array.from({length:a},((e,t)=>new Uint8Array(o.slice(12+4*t,12+4*t+4)))),c={};let h=0;for(let i=0;i<r.numCncx;i++){const o=await t(e+r.numRecords+i+1),s=new Uint8Array(o);for(let e=0;e<s.byteLength;){const t=e,{value:i,length:r}=hi(s,e);e+=r;const a=o.slice(e,e+i);e+=i,c[h+t]=n.decode(a)}h+=65536}const d=[];for(let i=0;i<r.numRecords;i++){const r=await t(e+1+i),n=new Uint8Array(r),o=li(Gt,r);if("INDX"!==o.magic)throw new Error("Invalid INDX record");for(let e=0;e<o.numRecords;e++){const t=o.idxt+4+2*e,i=ai(r.slice(t,t+2)),a=ai(r.slice(i,i+1)),c=si(r.slice(i+1,i+1+a)),h=[],u=i+1+a;let f=0,p=u+s.numControlBytes;for(const[e,t,i,o]of l){if(1&o){f++;continue}const s=u+f,a=ai(r.slice(s,s+1))&i;if(a===i)if(ui(i)>1){const{value:i,length:r}=hi(n,p);h.push([e,null,i,t]),p+=r}else h.push([e,1,null,t]);else h.push([e,a>>fi(i),null,t])}const g={};for(const[e,t,i,r]of h){const o=[];if(null!=t)for(let e=0;e<t*r;e++){const{value:e,length:t}=hi(n,p);o.push(e),p+=t}else{let e=0;for(;e<i;){const{value:t,length:i}=hi(n,p);o.push(t),p+=i,e+=i}}g[e]=o}d.push({name:c,tagMap:g})}}return{table:d,cncx:c}};class yi{#c;#h;pdb;async open(e){this.#c=e;const t=li(qt,await e.slice(0,78).arrayBuffer());this.pdb=t;const i=await e.slice(78,78+8*t.numRecords).arrayBuffer();this.#h=Array.from({length:t.numRecords},((e,t)=>ai(i.slice(8*t,8*t+4)))).map(((e,t,i)=>[e,i[t+1]]))}loadRecord(e){const t=this.#h[e];if(!t)throw new RangeError("Record index out of bounds");return this.#c.slice(...t).arrayBuffer()}async loadMagic(e){const t=this.#h[e][0];return si(await this.#c.slice(t,t+4).arrayBuffer())}}class bi extends yi{#d=0;#u;#f;#p;#g;#m;constructor({unzlib:e}){super(),this.unzlib=e}async open(e){await super.open(e),this.headers=this.#y(await super.loadRecord(0)),this.#u=this.headers.mobi.resourceStart;let t=this.headers.mobi.version>=8;if(!t){const e=this.headers.exth?.boundary;if(e<4294967295)try{this.headers=this.#y(await super.loadRecord(e)),this.#d=e,t=!0}catch(e){console.warn(e),console.warn("Failed to open KF8; falling back to MOBI")}}return await this.#b(),t?new ki(this).init():new xi(this).init()}#y(e){const t=li(zt,e),i=li(Vt,e);if("MOBI"!==i.magic)throw new Error("Missing MOBI header");const{titleOffset:r,titleLength:n,localeLanguage:o,localeRegion:s}=i;i.title=e.slice(r,r+n);const a=ii[o];i.language=a?.[s>>2]??a?.[0];const l=64&i.exthFlag?((e,t)=>{const{magic:i,count:r}=li(Jt,e);if("EXTH"!==i)throw new Error("Invalid EXTH header");const n=ci(t),o={};let s=12;for(let t=0;t<r;t++){const t=ai(e.slice(s,s+4)),i=ai(e.slice(s+4,s+8));if(t in ti){const[r,a,l]=ti[t],c=e.slice(s+8,s+i),h="uint"===a?ai(c):n.decode(c);l?(o[r]??=[],o[r].push(h)):o[r]=h}s+=i}return o})(e.slice(i.length+16),i.encoding):null;return{palmdoc:t,mobi:i,exth:l,kf8:i.version>=8?li(Xt,e):null}}async#b(){const{palmdoc:e,mobi:t}=this.headers;this.#f=ci(t.encoding),this.#p=new TextEncoder;const{compression:i}=e;if(this.#g=1===i?e=>e:2===i?pi:17480===i?await(async(e,t)=>{const i=await t(e.huffcdic),{magic:r,offset1:n,offset2:o}=li(Yt,i);if("HUFF"!==r)throw new Error("Invalid HUFF record");const s=Array.from({length:256},((e,t)=>n+4*t)).map((e=>ai(i.slice(e,e+4)))).map((e=>[128&e,31&e,e>>>8])),a=[null].concat(Array.from({length:32},((e,t)=>o+8*t)).map((e=>[ai(i.slice(e,e+4)),ai(i.slice(e+4,e+8))]))),l=[];for(let i=1;i<e.numHuffcdic;i++){const r=await t(e.huffcdic+i),n=li(Zt,r);if("CDIC"!==n.magic)throw new Error("Invalid CDIC record");const o=Math.min(1<<n.codeLength,n.numEntries-l.length),s=r.slice(n.length);for(let e=0;e<o;e++){const t=ai(s.slice(2*e,2*e+2)),i=ai(s.slice(t,t+2)),r=32767&i,n=32768&i,o=new Uint8Array(s.slice(t+2,t+2+r));l.push([o,n])}}const c=e=>{let t=new Uint8Array;const i=8*e.byteLength;for(let r=0;r<i;){const n=Number(gi(e,r));let[o,h,d]=s[n>>>24];if(!o){for(;n>>>32-h<a[h][0];)h+=1;d=a[h][1]}if((r+=h)>i)break;const u=d-(n>>>32-h);let[f,p]=l[u];p||(f=c(f),l[u]=[f,!0]),t=ri(t,f)}return t};return c})(t,this.loadRecord.bind(this)):null,!this.#g)throw new Error("Unknown compression type");const{trailingFlags:r}=t,n=1&r,o=ui(r>>>1);this.#m=e=>{for(let t=0;t<o;t++){const t=di(e);e=e.subarray(0,-t)}if(n){const t=1+(3&e[e.length-1]);e=e.subarray(0,-t)}return e}}decode(...e){return this.#f.decode(...e)}encode(...e){return this.#p.encode(...e)}loadRecord(e){return super.loadRecord(this.#d+e)}loadMagic(e){return super.loadMagic(this.#d+e)}loadText(e){return this.loadRecord(e+1).then((e=>new Uint8Array(e))).then(this.#m).then(this.#g)}async loadResource(e){const t=await super.loadRecord(this.#u+e),i=si(t.slice(0,4));return"FONT"===i?(async(e,t)=>{const{flags:i,dataStart:r,keyLength:n,keyStart:o}=li(Qt,e),s=new Uint8Array(e.slice(r));if(2&i){const t=16===n?1024:1040,i=new Uint8Array(e.slice(o,o+n)),r=Math.min(t,s.length);for(var a=0;a<r;a++)s[a]=s[a]^i[a%i.length]}if(1&i)try{return await t(s)}catch(e){console.warn(e),console.warn("Failed to decompress font")}return s})(t,this.unzlib):"VIDE"===i||"AUDI"===i?t.slice(12):t}getNCX(){const e=this.headers.mobi.indx;if(e<4294967295)return(async(e,t)=>{const{table:i,cncx:r}=await mi(e,t),n=i.map((({tagMap:e},t)=>({index:t,offset:e[1]?.[0],size:e[2]?.[0],label:r[e[3]]??"",headingLevel:e[4]?.[0],pos:e[6],parent:e[21]?.[0],firstChild:e[22]?.[0],lastChild:e[23]?.[0]}))),o=e=>(null==e.firstChild||(e.children=n.filter((t=>t.parent===e.index)).map(o)),e);return n.filter((e=>0===e.headingLevel)).map(o)})(e,this.loadRecord.bind(this))}getMetadata(){const{mobi:e,exth:t}=this.headers;return{identifier:e.uid.toString(),title:$t(t?.title||this.decode(e.title)),author:t?.creator?.map($t),publisher:$t(t?.publisher),language:t?.language??e.language,published:t?.date,description:$t(t?.description),subject:t?.subject?.map($t),rights:$t(t?.rights)}}async getCover(){const{exth:e}=this.headers,t=e?.coverOffset<4294967295?e?.coverOffset:e?.thumbnailOffset<4294967295?e?.thumbnailOffset:null;if(null!=t){const e=await this.loadResource(t);return new Blob([e])}}}const vi=/<\s*(?:mbp:)?pagebreak[^>]*>/gi,wi=/<[^<>]+filepos=['"]{0,1}(\d+)[^<>]*>/gi;class xi{parser=new DOMParser;serializer=new XMLSerializer;#v=new Map;#w=new Map;#r=new Map;#x;#C=[];#T=Ut.HTML;constructor(e){this.mobi=e}async init(){let e=new Uint8Array;for(let t=0;t<this.mobi.headers.palmdoc.numTextRecords;t++)e=ri(e,await this.mobi.loadText(t));const t=Array.from(new Uint8Array(e),(e=>String.fromCharCode(e))).join("");this.#x=[0].concat(Array.from(t.matchAll(vi),(e=>e.index))).map(((e,i,r)=>t.slice(e,r[i+1]))).map((e=>Uint8Array.from(e,(e=>e.charCodeAt(0))))).map((e=>({book:this,raw:e}))).reduce(((e,t)=>{const i=e[e.length-1];return t.start=i?.end??0,t.end=t.start+t.raw.byteLength,e.concat(t)}),[]),this.sections=this.#x.map(((e,t)=>({id:t,load:()=>this.loadSection(e),createDocument:()=>this.createDocument(e),resolveHref:e=>this.resolveHref(e),size:e.end-e.start})));try{this.landmarks=await this.getGuide();const e=this.landmarks.find((({type:e})=>e?.includes("toc")))?.href;if(e){const{index:t}=this.resolveHref(e),i=await this.sections[t].createDocument();let r,n=0,o=0;const s=new Map,a=new Map;this.toc=Array.from(i.querySelectorAll("a[filepos]")).reduce(((e,t)=>{const i=(e=>{let t=0;for(;e;){const i=e.parentElement;if(i){const e=i.tagName.toLowerCase();"p"===e?t+=1.5:"blockquote"===e&&(t+=2)}e=i}return t})(t),l={label:t.innerText?.trim(),href:`#filepos${t.getAttribute("filepos")}`},c=i>o?n+1:i===o?n:s.get(i)??Math.max(0,n-1);if(c>n)r?(r.subitems??=[],r.subitems.push(l),a.set(c,r)):e.push(l);else{const t=a.get(c);t?t.subitems.push(l):e.push(l)}return r=l,n=c,o=i,s.set(i,c),e}),[])}}catch(e){console.warn(e)}return this.#C=[...new Set(Array.from(t.matchAll(wi),(e=>e[1])))].map((e=>({filepos:e,number:Number(e)}))).sort(((e,t)=>e.number-t.number)),this.metadata=this.mobi.getMetadata(),this.getCover=this.mobi.getCover.bind(this.mobi),this}async getGuide(){const e=await this.createDocument(this.#x[0]);return Array.from(e.getElementsByTagName("reference"),(e=>({label:e.getAttribute("title"),type:e.getAttribute("type")?.split(/\s/),href:`#filepos${e.getAttribute("filepos")}`})))}async loadResource(e){if(this.#v.has(e))return this.#v.get(e);const t=await this.mobi.loadResource(e),i=URL.createObjectURL(new Blob([t]));return this.#v.set(e,i),i}async loadRecindex(e){return this.loadResource(Number(e)-1)}async replaceResources(e){for(const t of e.querySelectorAll("img[recindex]")){const e=t.getAttribute("recindex");try{t.src=await this.loadRecindex(e)}catch(t){console.warn(`Failed to load image ${e}`)}}for(const t of e.querySelectorAll("[mediarecindex]")){const e=t.getAttribute("mediarecindex"),i=t.getAttribute("recindex");try{t.src=await this.loadRecindex(e),i&&(t.poster=await this.loadRecindex(i))}catch(t){console.warn(`Failed to load media ${e}`)}}for(const t of e.querySelectorAll("[filepos]")){const e=t.getAttribute("filepos");t.href=`#filepos${e}`}}async loadText(e){if(this.#w.has(e))return this.#w.get(e);const{raw:t}=e,i=this.#C.filter((({number:t})=>t>=e.start&&t<e.end)).map((t=>({...t,offset:t.number-e.start})));let r=t;i.length&&(r=t.subarray(0,i[0].offset),i.forEach((({filepos:e,offset:n},o)=>{const s=i[o+1],a=this.mobi.encode(`<a id="filepos${e}"></a>`);r=ni(r,a,t.subarray(n,s?.offset))})));const n=this.mobi.decode(r).replaceAll(vi,"");return this.#w.set(e,n),n}async createDocument(e){const t=await this.loadText(e);return this.parser.parseFromString(t,this.#T)}async loadSection(e){if(this.#r.has(e))return this.#r.get(e);const t=await this.createDocument(e),i=t.createElement("style");t.head.append(i),i.append(t.createTextNode("blockquote {\n            margin-block-start: 0;\n            margin-block-end: 0;\n            margin-inline-start: 1em;\n            margin-inline-end: 0;\n        }")),await this.replaceResources(t);const r=this.serializer.serializeToString(t),n=URL.createObjectURL(new Blob([r],{type:this.#T}));return this.#r.set(e,n),n}resolveHref(e){const t=e.match(/#filepos(.*)/)[1],i=Number(t);return{index:this.#x.findIndex((e=>e.end>i)),anchor:e=>e.getElementById(`filepos${t}`)}}splitTOCHref(e){const t=e.match(/#filepos(.*)/)[1],i=Number(t);return[this.#x.findIndex((e=>e.end>i)),`filepos${t}`]}getTOCFragment(e,t){return e.getElementById(t)}isExternal(e){return/^(?!blob|filepos)\w+:/i.test(e)}destroy(){for(const e of this.#v.values())URL.revokeObjectURL(e);for(const e of this.#r.values())URL.revokeObjectURL(e)}}const Ci=/kindle:(flow|embed):(\w+)(?:\?mime=(\w+\/[-+.\w]+))?/,Ti=/kindle:pos:fid:(\w+):off:(\w+)/,Li=e=>{const[t,i]=e.match(Ti).slice(1);return{fid:parseInt(t,32),off:parseInt(i,32)}},Mi=(e=0,t=0)=>`kindle:pos:fid:${e.toString(32).toUpperCase().padStart(4,"0")}:off:${t.toString(32).toUpperCase().padStart(10,"0")}`,Si=e=>{const t=e.match(/\s(id|name|aid)\s*=\s*['"]([^'"]*)['"]/i);if(!t)return;const[,i,r]=t;return`[${i}="${CSS.escape(r)}"]`},Di=e=>{for(const t of e){if("page-spread-left"===t||"rendition:page-spread-left"===t)return"left";if("page-spread-right"===t||"rendition:page-spread-right"===t)return"right";if("rendition:page-spread-center"===t)return"center"}};class ki{parser=new DOMParser;serializer=new XMLSerializer;#r=new Map;#L=new Map;#M=new Map;#S={};#x;#D;#k=new Uint8Array;#A=new Uint8Array;#E=-1;#I=-1;#T=Ut.XHTML;#N=new Map;constructor(e){this.mobi=e}async init(){const e=this.mobi.loadRecord.bind(this.mobi),{kf8:t}=this.mobi.headers;try{const i=await e(t.fdst),r=li(Kt,i);if("FDST"!==r.magic)throw new Error("Missing FDST record");const n=Array.from({length:r.numEntries},((e,t)=>12+8*t)).map((e=>[ai(i.slice(e,e+4)),ai(i.slice(e+4,e+8))]));this.#S.fdstTable=n,this.#D=n[n.length-1][1]}catch{}const i=(await mi(t.skel,e)).table.map((({name:e,tagMap:t},i)=>({index:i,name:e,numFrag:t[1][0],offset:t[6][0],length:t[6][1]}))),r=await mi(t.frag,e),n=r.table.map((({name:e,tagMap:t})=>({insertOffset:parseInt(e),selector:r.cncx[t[2][0]],index:t[4][0],offset:t[6][0],length:t[6][1]})));this.#S.skelTable=i,this.#S.fragTable=n,this.#x=i.reduce(((e,t)=>{const i=e[e.length-1],r=i?.fragEnd??0,o=r+t.numFrag,s=n.slice(r,o),a=t.length+s.map((e=>e.length)).reduce(((e,t)=>e+t)),l=(i?.totalLength??0)+a;return e.concat({skel:t,frags:s,fragEnd:o,length:a,totalLength:l})}),[]);const o=await this.getResourcesByMagic(["RESC","PAGE"]),s=new Map;if(o.RESC){const e=await this.mobi.loadRecord(o.RESC),t=this.mobi.decode(e.slice(16)).replace(/\0/g,""),i=t.search(/\?>/),r=`<package>${t.slice(i)}</package>`,n=this.parser.parseFromString(r,Ut.XML);for(const e of n.querySelectorAll("spine > itemref")){const t=parseInt(e.getAttribute("skelid"));s.set(t,Di(e.getAttribute("properties")?.split(" ")??[]))}}this.sections=this.#x.map(((e,t)=>e.frags.length?{id:t,load:()=>this.loadSection(e),createDocument:()=>this.createDocument(e),resolveHref:e=>this.resolveHref(e),size:e.length,pageSpread:s.get(t)}:{linear:"no"}));try{const e=await this.mobi.getNCX(),t=({label:e,pos:i,children:r})=>{const[n,o]=i,s=Mi(n,o),a=this.#L.get(n);return a?a.push(o):this.#L.set(n,[o]),{label:$t(e),href:s,subitems:r?.map(t)}};this.toc=e?.map(t),this.landmarks=await this.getGuide()}catch(e){console.warn(e)}const{exth:a}=this.mobi.headers;return this.dir=a.pageProgressionDirection,this.rendition={layout:"true"===a.fixedLayout?"pre-paginated":"reflowable",viewport:Object.fromEntries(a.originalResolution?.split("x")?.slice(0,2)?.map(((e,t)=>[t?"height":"width",e]))??[])},this.metadata=this.mobi.getMetadata(),this.getCover=this.mobi.getCover.bind(this.mobi),this}async getResourcesByMagic(e){const t={},i=this.mobi.headers.kf8.resourceStart,r=this.mobi.pdb.numRecords;for(let n=i;n<r;n++)try{const i=await this.mobi.loadMagic(n),r=e.find((e=>e===i));r&&(t[r]=n)}catch{}return t}async getGuide(){const e=this.mobi.headers.kf8.guide;if(e<4294967295){const t=this.mobi.loadRecord.bind(this.mobi),{table:i,cncx:r}=await mi(e,t);return i.map((({name:e,tagMap:t})=>({label:r[t[1][0]]??"",type:e?.split(/\s/),href:Mi(t[6]?.[0]??t[3]?.[0])})))}}async loadResourceBlob(e){let{resourceType:t,id:i,type:r}=(e=>{const[t,i,r]=e.match(Ci).slice(1);return{resourceType:t,id:parseInt(i,32),type:r}})(e);"image/jpg"===r&&(r="image/jpeg");const n="flow"===t?await this.loadFlow(i):await this.mobi.loadResource(i-1),o=[Ut.XHTML,Ut.HTML,Ut.CSS,Ut.SVG].includes(r)?await this.replaceResources(this.mobi.decode(n)):n,s=r===Ut.SVG?this.parser.parseFromString(o,r):null;return[new Blob([o],{type:r}),s?.getElementsByTagNameNS("http://www.w3.org/2000/svg","image")?.length?s.documentElement:null]}async loadResource(e){if(this.#r.has(e))return this.#r.get(e);const[t,i]=await this.loadResourceBlob(e),r=i?e:URL.createObjectURL(t);return i&&this.#N.set(r,i),this.#r.set(e,r),r}replaceResources(e){return(async(e,t,i)=>{const r=[];e.replace(t,((...e)=>(r.push(e),null)));const n=[];for(const e of r)n.push(await i(...e));return e.replace(t,(()=>n.shift()))})(e,new RegExp(Ci,"g"),this.loadResource.bind(this))}async loadRaw(e,t){const i=t-this.#k.length,r=null==this.#D?1/0:this.#D-this.#A.length-e;if(i<0||i<r){for(;this.#k.length<t;){const e=++this.#E,t=await this.mobi.loadText(e);this.#k=ri(this.#k,t)}return this.#k.slice(e,t)}for(;this.#D-this.#A.length>e;){const e=this.mobi.headers.palmdoc.numTextRecords-1-++this.#I,t=await this.mobi.loadText(e);this.#A=ri(t,this.#A)}const n=this.#D-this.#A.length;return this.#A.slice(e-n,t-n)}loadFlow(e){if(e<4294967295)return this.loadRaw(...this.#S.fdstTable[e])}async loadText(e){const{skel:t,frags:i,length:r}=e,n=await this.loadRaw(t.offset,t.offset+r);let o=n.slice(0,t.length);for(const e of i){const i=e.insertOffset-t.offset,r=t.length+e.offset,s=n.slice(r,r+e.length);o=ni(o.slice(0,i),s,o.slice(i));const a=this.#L.get(e.index);if(a)for(const t of a){const i=this.mobi.decode(s).slice(t),r=Si(i);this.#R(e.index,t,r)}}return this.mobi.decode(o)}async createDocument(e){const t=await this.loadText(e);return this.parser.parseFromString(t,this.#T)}async loadSection(e){if(this.#r.has(e))return this.#r.get(e);const t=await this.loadText(e),i=await this.replaceResources(t);let r=this.parser.parseFromString(i,this.#T);r.querySelector("parsererror")&&(this.#T=Ut.HTML,r=this.parser.parseFromString(i,this.#T));for(const[e,t]of this.#N)for(const i of r.querySelectorAll(`img[src="${e}"]`))i.replaceWith(t);const n=URL.createObjectURL(new Blob([this.serializer.serializeToString(r)],{type:this.#T}));return this.#r.set(e,n),n}getIndexByFID(e){return this.#x.findIndex((t=>t.frags.some((t=>t.index===e))))}#R(e,t,i){const r=this.#M.get(e);if(r)r.set(t,i);else{const r=new Map;this.#M.set(e,r),r.set(t,i)}}async resolveHref(e){const{fid:t,off:i}=Li(e),r=this.getIndexByFID(t);if(r<0)return;const n=this.#M.get(t)?.get(i);if(n)return{index:r,anchor:e=>e.querySelector(n)};const{skel:o,frags:s}=this.#x[r],a=s.find((e=>e.index===t)),l=o.offset+o.length+a.offset,c=await this.loadRaw(l,l+a.length),h=this.mobi.decode(c.slice(i)),d=Si(h);this.#R(t,i,d);return{index:r,anchor:e=>e.querySelector(d)}}splitTOCHref(e){const t=Li(e);return[this.getIndexByFID(t.fid),t]}getTOCFragment(e,{fid:t,off:i}){const r=this.#M.get(t)?.get(i);return e.querySelector(r)}isExternal(e){return/^(?!blob|kindle)\w+:/i.test(e)}destroy(){for(const e of this.#r.values())URL.revokeObjectURL(e)}}class Ai extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"MOBI"})),this.mobiBuffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}resolveHref(e){return c(this,void 0,void 0,(function*(){let t=this.tempLocation.chapterDocIndex,i=this.chapterDocList[t];if(i){let r=yield i.text.resolveHref(e);if(!r)return{};if(r.index===parseInt(t)){let e=this.getDocument();if(!e)return r;let t=r.anchor(e);if(!t)return r;let i=t.getAttribute("id")||"";return Object.assign(Object.assign({},r),{id:i})}return r}return{}}))}parse(){return c(this,void 0,void 0,(function*(){try{let e=new Blob([this.mobiBuffer]),t=new File([e],"book",{lastModified:(new Date).getTime(),type:e.type});(yield(async e=>"BOOKMOBI"===si(await e.slice(60,68).arrayBuffer()))(t))&&(this.book=yield new bi({unzlib:r}).open(t))}catch(e){throw console.error(e),e}}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}getMetadata(){return c(this,void 0,void 0,(function*(){try{this.book||(yield this.parse());let e=new T(this.book);return yield e.getMetadata()}catch(e){throw console.error(e),e}}))}}const Ei=e=>`${Ri()?".":""}/lib/pdfjs/${e}`,Ii=window.pdfjsLib,Ni=async e=>await(await fetch(e)).text(),Ri=()=>"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0);function Pi(e,t="",i=""){return new Promise((r=>{vex.dialog.prompt({message:e,placeholder:t,value:i,callback:function(e){r(e)}})}))}const Oi=async()=>await Ni(Ei("text_layer_builder.css")),Bi=async()=>await Ni(Ei("annotation_layer_builder.css")),Fi=async(e,t)=>{try{const i=e.getViewport({scale:1});if(t){const t=document.createElement("canvas");t.height=i.height,t.width=i.width;const r=t.getContext("2d");return await e.render({canvasContext:r,viewport:i}).promise,new Promise((e=>t.toBlob(e)))}return URL.createObjectURL(new Blob([`\n        <!DOCTYPE html>\n        <html lang="en">\n        <meta charset="utf-8">\n        <meta name="viewport" content="width=${i.width}, height=${i.height}">\n        <style>\n        html, body {\n            margin: 0;\n            padding: 0;\n        }\n        ${await Oi()}\n        ${await Bi()}\n        </style>\n        <div class="noteLayer"></div>\n        <div class="koodoPDFLayer" id="koodoPDFLayer">\n            <div class="textLayer" id="textLayer"></div>\n            <div class="annotationLayer" id="annotationLayer"></div>\n            <div id="canvas"></div>\n        </div>\n    `],{type:"text/html"}))}catch(e){console.error(e)}},Hi=e=>({label:e.title,href:e.dest?JSON.stringify(e.dest):null,subitems:e.items.length?e.items.map(Hi):null});function ji(e="need"){return(navigator.language?.toLowerCase()||"en").startsWith("zh")?"need"===e?"请输入PDF密码：":"密码错误，请重新输入：":"need"===e?"Need password to open this PDF:":"Incorrect password, please try again:"}const Wi=async(e,t)=>{let i;for(;;){const r=new Ii.PDFDataRangeTransport(e.size,[]);r.requestDataRange=(t,i)=>{e.slice(t,i).arrayBuffer().then((e=>{r.onDataRange(t,e)}))};try{i=await Ii.getDocument({range:r,cMapUrl:Ei("cmaps/"),standardFontDataUrl:Ei("standard_fonts/"),isEvalSupported:!1,password:t}).promise;break}catch(e){if("PasswordException"!==e.name)throw e;if(e.code===Ii.PasswordResponses.NEED_PASSWORD?Ri()?(t=await Pi(ji("need"),"",""),vex.closeAll()):t=prompt(ji("need")):e.code===Ii.PasswordResponses.INCORRECT_PASSWORD&&(Ri()?(t=await Pi(ji("incorrect"),"",""),vex.closeAll()):t=prompt(ji("incorrect"))),!t)throw new Error("PDF loading failed: no password provided")}}let r=!1,n=i.numPages>0?await i.getPage(Math.floor(i.numPages/2)+1):null;if(n){const e=await n.getTextContent();if(r=0===e.items.length,e.items.length>0){r=e.items.reduce(((e,t)=>e+t.str.trim().length),0)<40}n.cleanup()}const o={rendition:{layout:"pre-paginated"}},{metadata:s,info:a}=await i.getMetadata()??{};o.metadata={title:s?.get("dc:title")??a?.Title,author:s?.get("dc:creator")??a?.Author,contributor:s?.get("dc:contributor"),description:s?.get("dc:description")??a?.Subject,language:s?.get("dc:language"),publisher:s?.get("dc:publisher"),subject:s?.get("dc:subject"),identifier:s?.get("dc:identifier"),source:s?.get("dc:source"),rights:s?.get("dc:rights")},o.metadata.description=(o.metadata.description?o.metadata.description:"")+(r?"\nscanned PDF":"")+(t?"\nprotected PDF: #"+t+"#":"");const l=await i.getOutline();o.toc=l?.map(Hi);const c=new Map;return o.sections=Array.from({length:i.numPages}).map(((e,t)=>({id:t,load:async()=>{const e=c.get(t);if(e)return e;const r=await Fi(await i.getPage(t+1));return c.set(t,r),r},unload:async()=>{(await i.getPage(t+1)).cleanup()},render:async(e,r,n,o)=>{await(async(e,t,i,r,n,o)=>{try{let s=window.devicePixelRatio*("yes"===n?1/r*1.5:1);const a=r*s;let l=i.querySelector("#koodoPDFLayer");l.style.visibility="hidden",l.style.transform=`scale(${1/s})`,l.style.transformOrigin="top left",l.style.setProperty("--scale-factor",a);const c=e.getViewport({scale:a}),h=document.createElement("canvas");l.style.width=`${c.width}px`,l.style.height=`${c.height}px`,h.height=c.height,h.width=c.width;const d=h.getContext("2d");await e.render({canvasContext:d,viewport:c,background:"rgba(0,0,0,0)"}).promise,i.querySelector("#canvas").replaceChildren(i.adoptNode(h)),l.style.overflow="hidden";const u=i.querySelector("#textLayer"),f=new Ii.TextLayer({textContentSource:await e.streamTextContent(),container:u,viewport:c});await f.render();for(const e of document.querySelectorAll(".hiddenCanvasElement"))Object.assign(e.style,{position:"absolute",top:"0",left:"0",width:"0",height:"0",display:"none"});const p=document.createElement("div");p.className="endOfContent",u.append(p);let g=!1,m=null;u.onpointerdown=()=>{let e=i?.defaultView;if(e.getSelection().toString().trim().length>0)return u.classList.remove("selecting"),g=!1,p.remove(),void u.append(p);u.classList.add("selecting"),g=!0},"yes"!==n?(u.onpointerup=()=>{u.classList.remove("selecting"),g=!1,p.remove(),u.append(p)},u.onpointermove=e=>{if(!g)return;let t=e.target.closest(".textLayer > span");const i=null!==t;u.style.cursor=i?"text":"default",i&&(m=t),p.remove(),u.insertBefore(p,m)}):i.addEventListener("selectionchange",(e=>{if(!g)return;let t=i?.defaultView;var r=t.getSelection().getRangeAt(0).endContainer;let n=r.nodeType===Node.TEXT_NODE?r.parentNode:r;n=n.closest(".textLayer > span");const o=null!==n;u.style.cursor=o?"text":"default",o&&(m=n),p.remove(),u.insertBefore(p,m.nextSibling?m.nextSibling:m)}));const y=i.querySelector("#annotationLayer");try{await new Ii.AnnotationLayer({page:e,viewport:c,div:y}).render({annotations:await e.getAnnotations(),linkService:{goToDestination:async e=>{try{const i="string"==typeof e?await t.getDestination(e):e;if(!i||!Array.isArray(i)||0===i.length)return void console.warn("Invalid destination:",e);const r=await t.getPageIndex(i[0]);o.goToChapterDocIndex(r)}catch(e){console.error("Error navigating to destination:",e)}},getDestinationHash:e=>JSON.stringify(e),addLinkAttributes:(e,t)=>e.href=t}})}catch(e){console.error(e)}}catch(e){console.error(e)}})(await i.getPage(t+1),i,e,r,n,o)},getTextContent:async()=>{const e=await i.getPage(t+1);return await e.getTextContent()},size:1e3,getDimension:async()=>{let e=(await i.getPage(t+1)).getViewport({scale:1});return{width:e.width,height:e.height}},getPage:async()=>await i.getPage(t+1)}))),o.isExternal=e=>/^\w+:/i.test(e),o.resolveHref=async e=>{const t=JSON.parse(e),r="string"==typeof t?await i.getDestination(t):t;return{index:await i.getPageIndex(r[0])}},o.splitTOCHref=async e=>{const t=JSON.parse(e),r="string"==typeof t?await i.getDestination(t):t;return[await i.getPageIndex(r[0]),null]},o.getTOCFragment=e=>e.documentElement,o.getCover=async()=>Fi(await i.getPage(1),!0),o.destroy=()=>i.destroy(),o},$i=async e=>{const t=new Uint8Array(await e.slice(0,5).arrayBuffer());return 37===t[0]&&80===t[1]&&68===t[2]&&70===t[3]&&45===t[4]};class Ui extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{convertChinese:"Default",format:"PDF"})),this.isStartFromEven="no",this.password="",this.scale=1,this.pdfBuffer=e,this.isStartFromEven=t.isStartFromEven||"no",this.password=t.password||"",this.scale=t.scale||1,this.backgroundColor=t.backgroundColor||"#ffffff",this.isScannedPDF=t.isScannedPDF||"no",this.platform=t.platform||"web"}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),"yes"===this.isStartFromEven&&(this.chapterDocList=[{label:"",text:{load:()=>c(this,void 0,void 0,(function*(){return""})),render:()=>c(this,void 0,void 0,(function*(){})),unload:()=>c(this,void 0,void 0,(function*(){})),getPage:()=>c(this,void 0,void 0,(function*(){return null})),getDimension:()=>c(this,void 0,void 0,(function*(){return{width:0,height:0}})),getScale:()=>c(this,void 0,void 0,(function*(){return 1})),getPageCount:()=>c(this,void 0,void 0,(function*(){return 0}))},href:""},...this.chapterDocList]),document.body.clientWidth*Math.abs(this.scale)-.4*document.body.clientWidth>document.body.clientWidth&&"double"!==this.readerMode?g(e,this.scale):g(e);const r=yield this.chapterDocList[0].text.getDimension(),n=yield this.chapterDocList[this.chapterDocList.length-1].text.getDimension(),o=yield this.chapterDocList[Math.floor(this.chapterDocList.length/2)].text.getDimension();let s=r.height/r.width>n.height/n.width?r:n;s=s.height/s.width>o.height/o.width?s:o;let a=this.getDocument();if(!a)return;((e,t,i,r)=>{for(let n=0;n<t.length;n++){const t=document.createElement("div");if(t.style.position="relative",t.style.width="100%",t.id="pdf-container-"+n,t.className="pdf-container","single"===r)t.style.paddingTop=e.clientHeight+"px";else{const e=(null==i?void 0:i.width)/(null==i?void 0:i.height)||.75;t.style.paddingTop=1/e*100+"%"}"double"===r&&(t.style.breakInside="avoid"),e.appendChild(t)}})(a.body||a.documentElement,this.chapterDocList,s,this.readerMode);let l=null;"scroll"===this.readerMode?this.element.addEventListener("scroll",(e=>{l&&clearTimeout(l),l=setTimeout((()=>c(this,void 0,void 0,(function*(){yield this.handlePDFScrollEvent(a),yield this.record()}))),100)})):a.addEventListener("scroll",(e=>{l&&clearTimeout(l),l=setTimeout((()=>c(this,void 0,void 0,(function*(){yield this.handlePDFScrollEvent(a),yield this.record()}))),200)})),((e,t,i)=>{if("scroll"===t)return;let r="double"===t?2:1,n=Math.floor(i.body.clientWidth/12),o=n%2==0?n:n-1;i.body.setAttribute("style",e.getAttribute("style")+`height: 100%;overflow-y: hidden;overflow-X: hidden;padding-left: 0px;padding-right: 0px;margin: 0px;box-sizing: border-box;touch-action: manipulation; overscroll-behavior: none;max-width: inherit;column-fill: auto;column-gap: ${o}px; column-width: ${(i.body.clientWidth-o)/r}px;`)})(e,this.readerMode,a),t()}))))}handlePDFScrollEvent(e){return c(this,void 0,void 0,(function*(){let t=e.querySelectorAll(".pdf-container");for(let i=0;i<t.length;i++){let r=t[i],n=r.getAttribute("id");if(!n)continue;let o=parseInt(n.split("-").reverse()[0]);Tt(this.element,r,this.readerMode,e)&&(yield this.renderPdfPage(o,e))}}))}parse(){return c(this,void 0,void 0,(function*(){try{let e=new Blob([this.pdfBuffer]),t=new File([e],"book",{lastModified:(new Date).getTime(),type:e.type});(yield $i(t))&&(this.book=yield Wi(t,this.password))}catch(e){throw console.error(e),e}}))}preCache(){return c(this,void 0,void 0,(function*(){return""}))}goToChapterIndex(e){return c(this,void 0,void 0,(function*(){this.chapterDocList.length>0&&(yield this.goToChapter(e,this.chapterDocList[e].href,this.chapterDocList[e].label))}))}getPageSize(){let e=this.getDocument();if(!e)return;let t="double"===this.readerMode?2:1,i=Math.floor(e.body.clientWidth/12),r=i%2==0?i:i-1,n=e.querySelectorAll("iframe")[0],o=null==n?void 0:n.getBoundingClientRect().height;return{width:e.body.clientWidth,height:this.element.clientHeight,left:this.element.offsetLeft,top:this.element.offsetTop,scrollTop:this.element.scrollTop,sectionWidth:(e.body.clientWidth-r)/t,sectionHeight:o,gap:r}}goToChapter(e,t,i){return c(this,void 0,void 0,(function*(){"double"===this.readerMode&&e%2==1&&e--;let t=this.getDocument(),i=this.getIframe();t&&i&&(yield this.renderPdfPage(e,t),yield Ct(parseInt(e),this.readerMode,t),yield this.recordByChapter(e))}))}getPositionByChapter(e){return{percentage:e/this.chapterDocList.length,chapterDocIndex:e+"",chapterHref:this.chapterDocList[e].href,chapterTitle:this.chapterDocList[e].label,text:""}}goToPercentage(e){return c(this,void 0,void 0,(function*(){if(this.chapterDocList.length>0){let t=1===e?this.chapterDocList.length-1:Math.floor(this.chapterDocList.length*e);yield this.goToChapter(t,this.chapterDocList[t].href,this.chapterDocList[t].label)}}))}goToPosition(e){var i;return c(this,void 0,void 0,(function*(){let r=this.getDocument(),n=this.getIframe();if(!r||!n)return;let o=JSON.parse(e);void 0===o.chapterDocIndex&&(o.chapterDocIndex=0),this.tempLocation={text:o.text,chapterTitle:o.chapterTitle,chapterDocIndex:o.chapterDocIndex,chapterHref:o.chapterHref,count:o.count,page:o.page,percentage:o.percentage};let{chapterTitle:s,chapterDocIndex:a,chapterHref:l}=o;if("double"===this.readerMode&&a%2==1&&a--,yield this.renderPdfPage(parseInt(a),r),"scroll"===this.readerMode){let e=this.getSubIframe(void 0!==a?a:parseInt(this.tempLocation.chapterDocIndex));if(!e)return;let t=(null===(i=e.parentElement)||void 0===i?void 0:i.getBoundingClientRect().height)||0;n.style.height=t*this.chapterDocList.length+"px"}yield Ct(parseInt(a),this.readerMode,r),t.init(),yield this.recordByChapter(parseInt(a))}))}prev(e){return c(this,void 0,void 0,(function*(){let t=this.getDocument(),i=this.getIframe();t&&i&&("scroll"===this.readerMode?this.element.scrollBy({left:0,top:-(this.element.clientHeight-50),behavior:"smooth"}):("ios"===e?yield Mt(this.element,this.animation,1,t,this.flipToNextPage,this.flipToPrevPage,this.isMobile,parseInt(this.tempLocation.chapterDocIndex||"0"),this.readerMode):yield $e(this.element,this.animation,1,t,this.flipToNextPage,this.flipToPrevPage,this.isMobile),yield this.renderPdfPage(parseInt(this.tempLocation.chapterDocIndex)-("double"===this.readerMode?2:1),t)),yield this.record())}))}next(e){return c(this,void 0,void 0,(function*(){let t=this.getDocument(),i=this.getIframe();t&&i&&("scroll"===this.readerMode?this.element.scrollBy({left:0,top:this.element.clientHeight-50,behavior:"smooth"}):("ios"===e?yield Mt(this.element,this.animation,-1,t,this.flipToNextPage,this.flipToPrevPage,this.isMobile,parseInt(this.tempLocation.chapterDocIndex||"0"),this.readerMode):yield $e(this.element,this.animation,-1,t,this.flipToNextPage,this.flipToPrevPage,this.isMobile),yield this.renderPdfPage(parseInt(this.tempLocation.chapterDocIndex)+("double"===this.readerMode?2:1),t)),yield this.record())}))}prevChapter(){return c(this,void 0,void 0,(function*(){yield this.prev()}))}nextChapter(){return c(this,void 0,void 0,(function*(){yield this.next()}))}goToPage(e){return c(this,void 0,void 0,(function*(){let t=Math.floor(e-1);t>=this.chapterDocList.length&&(t=this.chapterDocList.length-1),t<0&&(t=0),yield this.goToChapter(t,this.chapterDocList[t].href,this.chapterDocList[t].label)}))}visibleText(){return c(this,void 0,void 0,(function*(){return this.getDocument()?yield(e=parseInt(this.tempLocation.chapterDocIndex||"0"),t=this.chapterDocList,i=this.readerMode,c(void 0,void 0,void 0,(function*(){let r=(yield t[e].text.getTextContent()).items.map((e=>e.str));if("double"===i){let i=(yield t[e+1].text.getTextContent()).items.map((e=>e.str));r=r.concat(i)}return r}))):"";var e,t,i}))}audioText(){return c(this,void 0,void 0,(function*(){return yield this.visibleText()}))}chapterText(){return c(this,void 0,void 0,(function*(){return(yield this.visibleText()).join(" ")}))}record(){return c(this,void 0,void 0,(function*(){""!==this.animation&&(yield new Promise((e=>setTimeout(e,1e3))));let e=this.getDocument();e&&(yield this.handlePDFRecord(e))}))}recordByChapter(e){return c(this,void 0,void 0,(function*(){""!==this.animation&&(yield new Promise((e=>setTimeout(e,1e3)))),e>=this.chapterDocList.length||e<0||(this.tempLocation.chapterDocIndex=e+"",this.tempLocation.percentage=e/(this.chapterDocList.length-1)+"",this.tempLocation.chapterHref=this.chapterDocList[e].href,this.tempLocation.chapterTitle=this.chapterDocList[e].label,this.tempLocation.text="",this.trigger("page-changed"))}))}handlePDFRecord(e){return c(this,void 0,void 0,(function*(){let t=e.querySelectorAll(".pdf-container");if(t.length>0&&Tt(this.element,t[t.length-1],this.readerMode,e))this.handleRecord(t[t.length-1]);else for(let i=0;i<t.length;i++){let r=t[i];if(Tt(this.element,r,this.readerMode,e)){this.handleRecord(r);break}}}))}handleRecord(e){let t=e.getAttribute("id");if(!t)return;let i=parseInt(t.split("-").reverse()[0]);i!==parseInt(this.tempLocation.chapterDocIndex)&&(this.tempLocation.chapterDocIndex=i+"",this.tempLocation.percentage=i/(this.chapterDocList.length-1)+"",this.tempLocation.chapterHref=this.chapterDocList[i].href,this.tempLocation.chapterTitle=this.chapterDocList[i].label,this.tempLocation.text="",this.trigger("page-changed"))}getMetadata(){return c(this,void 0,void 0,(function*(){try{this.book||(yield this.parse());let e=new T(this.book);return yield e.getMetadata()}catch(e){throw console.error(e),e}}))}highlightAudioNode(e,t){let i=parseInt(this.tempLocation.chapterDocIndex),r=this.getSubDocument(i);if(r&&(Lt(e,t,r),"double"===this.readerMode)){let r=this.getSubDocument(i+1);if(!r)return;Lt(e,t,r)}}highlightSearchNode(e,t){let i=parseInt(this.tempLocation.chapterDocIndex),r=this.getSubDocument(i);r&&et(e,t,r)}getProgress(){return{totalPage:this.chapterDocList.length,currentPage:parseInt(this.tempLocation.chapterDocIndex||"0")+1}}getNotePosition(){var e;return c(this,void 0,void 0,(function*(){let t=this.getDocument();if(!t)return;let i=x(t);if(!i)return;let r=i.ownerDocument,n=null===(e=null==r?void 0:r.defaultView)||void 0===e?void 0:e.frameElement,o=(null==n?void 0:n.getAttribute("id"))||"",s=o?parseInt(o.split("-").reverse()[0]):0;return Object.assign(Object.assign({},this.tempLocation),{chapterDocIndex:s})}))}getSubDocument(e){let t=document.getElementById("page-area");if(!t)return null;let i=t.getElementsByTagName("iframe")[0];if(!i)return null;let r=i.contentDocument;if(!r)return null;let n=r.getElementById("pdf-iframe-"+e);return n||(xt(e||0,r),n=r.getElementById("pdf-iframe-"+e)),n.contentDocument}getSubIframe(e){let t=document.getElementById("page-area");if(!t)return null;let i=t.getElementsByTagName("iframe")[0];if(!i)return null;let r=i.contentDocument;return r?(i=r.getElementById("pdf-iframe-"+e),i||(xt(e||0,r),i=r.getElementById("pdf-iframe-"+e)),i):null}getHightlightCoords(e){return c(this,void 0,void 0,(function*(){let t=void 0!==e?e:parseInt(this.tempLocation.chapterDocIndex),i=this.getSubDocument(e);if(!i)return;var r=i.getSelection().getRangeAt(0).getClientRects();let n=yield this.chapterDocList[t].text.getPage(),o=yield wt(this.element,this.readerMode,this.chapterDocList,t,i);var s=n.getViewport({scale:o});let a=i.querySelector("canvas");var l=null==a?void 0:a.getClientRects()[0];let c=[];for(let e=0;e<r.length;e++)0===e?c.push({bottom:r[e].bottom,top:r[e].top,left:r[e].left,right:r[e].right}):Math.abs(c[c.length-1].bottom-r[e].bottom)<5?(c[c.length-1].left>r[e].left&&(c[c.length-1].left=r[e].left),c[c.length-1].right<r[e].right&&(c[c.length-1].right=r[e].right)):c.push({bottom:r[e].bottom,top:r[e].top,left:r[e].left,right:r[e].right});return{page:t,coords:c.map((function(e){return s.convertToPdfPoint(e.left-l.x,e.top-l.y).concat(s.convertToPdfPoint(e.right-l.x,e.bottom-l.y))})),readerMode:this.readerMode}}))}renderHighlighters(e,t){var i,r;return c(this,void 0,void 0,(function*(){if(0===e.length)return;let n=e[0].chapterIndex,o=this.getSubIframe(n),s=this.getSubDocument(n);if(!s||!o)return;yt(s);let a=o.contentWindow||(null===(i=o.contentDocument)||void 0===i?void 0:i.defaultView);for(let i=0;i<e.length;i++){const o=e[i];let c=JSON.parse(o.range);var l=parseInt(c.page+"");if(l!==n)continue;let h=yield this.chapterDocList[l].text.getPage(),d=yield wt(this.element,this.readerMode,this.chapterDocList,l,s);try{mt(c,o.color,o.key,t,h,d,s)}catch(e){return void console.warn(e,"Exception has been caught when restore character ranges.")}if(!a||!a.getSelection())return;null===(r=a.getSelection())||void 0===r||r.empty()}}))}removeOneNote(e,t){let i=this.getSubDocument(void 0!==t?t:parseInt(this.tempLocation.chapterDocIndex));if(!i)return;const r=i.querySelectorAll(".kookit-note");for(let t=0;t<r.length;t++){const i=r[t];i.getAttribute("data-key")===e&&i.parentNode.removeChild(i)}}createOneNote(e,t){return c(this,void 0,void 0,(function*(){let i=this.getSubIframe(e.chapterIndex),r=this.getSubDocument(e.chapterIndex);if(!r||!i)return;let n=JSON.parse(e.range);var o=parseInt(n.page+"");let s=yield this.chapterDocList[o].text.getPage(),a=yield wt(this.element,this.readerMode,this.chapterDocList,o,r);mt(n,e.color,e.key,t,s,a,r),this.clearSelection()}))}handleRenderPDFChapter(e,t){return c(this,void 0,void 0,(function*(){if(e>=this.chapterDocList.length||e<0)return;let i=t.getElementById("pdf-iframe-"+e);i||(i=xt(e,t));let r=null==i?void 0:i.contentDocument;if(!r)return;if(r.body.innerHTML)return;r.body.innerHTML="";let n=yield fetch(yield this.chapterDocList[e].text.load()).then((e=>e.blob())),o=yield n.text();r.body.innerHTML=o;let s=yield wt(this.element,this.readerMode,this.chapterDocList,e,r);yield this.chapterDocList[e].text.render(r,s,this.isMobile,this);let a=r.querySelector("#koodoPDFLayer");if(a){if("yes"===this.isDarkMode&&(a.style.filter="invert(1) hue-rotate(180deg) contrast(0.95)"),"rgba(233, 216, 188,1)"===this.backgroundColor&&"yes"===this.isScannedPDF&&(a.style.filter="sepia(100%) contrast(0.95) brightness(0.95)"),"rgba(197, 231, 207,1)"===this.backgroundColor&&"yes"===this.isScannedPDF&&(a.style.filter="sepia(30%) hue-rotate(60deg) saturate(120%) brightness(95%)"),"single"===this.readerMode||"double"===this.readerMode){let e=this.element.clientHeight/2-a.getBoundingClientRect().height/2;a.style.marginTop=e+"px",i.style.height=a.getBoundingClientRect().height+e+"px";let t=r.querySelector(".noteLayer");t&&(t.style.position="relative")}"scroll"!==this.readerMode&&(a.style.marginLeft=`calc(50% - ${a.getBoundingClientRect().width/2}px)`),a.style.visibility="visible",window.chapterDocIndex=e,this.trigger("rendered")}}))}handleUnloadPDFChapter(e,t){return c(this,void 0,void 0,(function*(){if(e>=this.chapterDocList.length||e<0)return;let t=this.getSubDocument(e);t&&""!==t.body.innerHTML&&(yield this.chapterDocList[e].text.unload(),t.body.innerHTML="")}))}renderPdfPage(e,t){return c(this,void 0,void 0,(function*(){e>=this.chapterDocList.length||e<0||(e>2&&(yield this.handleUnloadPDFChapter(e-3,t)),yield this.handleRenderPDFChapter(e,t),yield this.handleRenderPDFChapter(e+1,t))}))}}class qi extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"PDFTEXT"})),this.password="",this.ocrLang="chi_sim",this.paraSpacingValue=1.5,this.titleSizeValue=1.2,this.isFinishOCR=!1,this.performOCR=e=>c(this,void 0,void 0,(function*(){try{if("tesseract"===this.ocrEngine){return(yield this.worker.recognize(e)).data.text}this.ocrEngine}catch(e){throw console.error("OCR Error:",e),e}})),this.pdfBuffer=e,this.password=t.password||"",this.isScannedPDF=t.isScannedPDF||"no",this.ocrLang=t.ocrLang||"chi_sim",this.paraSpacingValue=parseFloat(t.paraSpacingValue)||1.5,this.titleSizeValue=parseFloat(t.titleSizeValue)||1.2,this.cache={},this.serverRegion=t.serverRegion||"global",this.processingPromises=new Map,this.ocrEngine=t.ocrEngine||"tesseract"}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc();for(let e=0;e<this.chapterDocList.length;e++){let t=this.chapterDocList[e];t.text.load=()=>c(this,void 0,void 0,(function*(){if(this.cache[e])return"yes"===this.isScannedPDF&&this.preProcessNextChapters(e),this.cache[e];let i="";return"yes"===this.isScannedPDF?(i=yield this.processCurrentChapter(e),this.preProcessNextChapters(e)):(i=yield this.getTextFromDoc(t),this.cache[e]=i),i}))}g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}processCurrentChapter(e){return c(this,void 0,void 0,(function*(){if(this.cache[e])return this.cache[e];if(this.processingPromises.has(e))return yield this.processingPromises.get(e),this.cache[e];const t=this.chapterDocList[e],i=yield this.getTextByOCR(t);return this.cache[e]=i,i}))}preProcessNextChapters(e){const t=Math.min(e+3,this.chapterDocList.length-1);for(let i=e+1;i<=t;i++)if(!this.cache[i]&&!this.processingPromises.has(i)){const e=this.processChapterOCR(i);this.processingPromises.set(i,e),e.finally((()=>{this.processingPromises.delete(i)}))}}processChapterOCR(e){return c(this,void 0,void 0,(function*(){try{const t=this.chapterDocList[e],i=yield this.getTextByOCR(t);this.cache[e]=i}catch(t){console.error(`Failed to process OCR for chapter ${e}:`,t)}}))}getTextByOCR(e){return c(this,void 0,void 0,(function*(){let t=yield e.text.getPage(),{imageURL:i}=yield St(t);let r=(yield this.performOCR(i)).split("\n").filter((e=>""!==e.trim()));return URL.createObjectURL(new Blob([`\n            <!DOCTYPE html>\n            <html lang="en">\n            <meta charset="utf-8">\n            <style>\n            html, body {\n                margin: 0;\n                padding: 20px;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n            }\n            p {\n                margin: 0.8em 0;\n                text-align: justify;\n            }\n            .bold {\n                font-weight: bold;\n            }\n            .paragraph {\n                margin-bottom: 1em;\n            }\n            </style>\n            <div>${r.map((e=>`<p>${e}</p>`)).join("")}</div>\n          `],{type:"text/html"}))}))}getTextFromDoc(e){return c(this,void 0,void 0,(function*(){let t=yield e.text.getTextContent(),i=[];if(t&&t.items&&Array.isArray(t.items)){const e=t.items.filter((e=>e.str&&e.transform)).map((e=>e.transform[3]));let r=10;if(e.length>0){const t=e.reduce(((e,t)=>(e[t]=(e[t]||0)+1,e)),{});r=Object.keys(t).map(Number).reduce(((e,i)=>t[e]>t[i]?e:i))}let n={text:"",styles:new Set,y:0,tag:"p"},o=0;t.items.forEach((e=>{if(e.str){const t=Math.abs(e.transform[5]-o);let s="p",a=e.transform[3]>Number(r)*this.titleSizeValue;t>e.height*this.paraSpacingValue&&n.text.trim()?(i.push(n),n={text:"",styles:new Set,y:e.transform[5],tag:s,isBold:a}):n.hasOwnProperty("isBold")||(n.isBold=a);const l=e.str;e.hasEOL?l.endsWith("-")?n.text+=l.slice(0,-1):n.text+=l+" ":n.text+=l,o=e.transform[5]}})),n.text.trim()&&i.push(n)}return URL.createObjectURL(new Blob([`\n        <!DOCTYPE html>\n        <html lang="en">\n        <meta charset="utf-8">\n        <style>\n        html, body {\n            margin: 0;\n            padding: 20px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n        }\n        p {\n            margin: 0.8em 0;\n            text-align: justify;\n        }\n        .bold {\n            font-weight: bold;\n        }\n        .paragraph {\n            margin-bottom: 1em;\n        }\n        </style>\n        <div>${i.length>0?i.map((e=>`<p class="paragraph${e.isBold?" bold":""}">${e.text.trim()}</p>`)).join(""):"Empty"}</div>\n      `],{type:"text/html"}))}))}parse(){return c(this,void 0,void 0,(function*(){try{let t=new Blob([this.pdfBuffer]),i=new File([t],"book",{lastModified:(new Date).getTime(),type:t.type});if((yield $i(i))&&(this.book=yield Wi(i,this.password)),"yes"===this.isScannedPDF&&"tesseract"===this.ocrEngine){let t=yield(e=("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0?".":"")+"/lib/tesseractjs/worker.min.js",c(void 0,void 0,void 0,(function*(){return yield(yield fetch(e)).text()}))),i=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));const r=yield window.Tesseract.createWorker([this.ocrLang],1,{workerPath:i,corePath:`https://${"global"===this.serverRegion?"storage.koodoreader.com":"storage.koodoreader.cn"}/tesseractjs/tesseract-core`,langPath:`https://${"global"===this.serverRegion?"storage.koodoreader.com":"storage.koodoreader.cn"}/tesseractjs/4.0.0-fast`,logger:e=>{"recognizing text"!==e.status||"number"!=typeof e.progress||this.isFinishOCR||((e=>{let t=document.getElementById("ocr-progress-bar");t||(t=document.createElement("progress"),t.id="ocr-progress-bar",t.max=1,t.value=0,t.style.position="fixed",t.style.top="10px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.width="300px",t.style.zIndex="9999",document.body.appendChild(t)),t.value=e,e>=1&&setTimeout((()=>{t.remove()}),1e3)})(e.progress),1===e.progress&&(this.isFinishOCR=!0))}});yield r.load(),this.worker=r}}catch(e){throw console.error(e),e}var e}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}getMetadata(){return c(this,void 0,void 0,(function*(){try{this.book||(yield this.parse());let e=new T(this.book);return yield e.getMetadata()}catch(e){throw console.error(e),e}}))}}const zi=(e,t=!1,i="",r)=>{const n=(new DOMParser).parseFromString(t?((e,t,i)=>{let r=e.split("\n");1===r.length&&(r=e.split("\r"));const n=[];let o=!1;if(i&&i.refresh&&(o=!0),r.length>1e4&&!o){i&&i.text||(i={text:r[0],chapterTitle:"",chapterDocIndex:0});let e=r.findIndex((e=>Re(e)===Re(i.text)));-1===e&&(e=0);const o=Math.max(e-1e3,0),s=Math.min(e+1e3,r.length),a=r.slice(o,s),l=a.filter((e=>{const i=Re(e);return i&&Pe(i,t)})),c=new Set(l.map((e=>Re(e))));let h=l.findIndex((e=>Re(e)===Re(i.chapterTitle)));if(-1===h&&(h=0),h<parseInt(i.chapterDocIndex||"0")-1){let e=parseInt(i.chapterDocIndex||"0")-h;if(e>0)for(let t=0;t<e;t++)n.push(`<h1>Chapter ${t}</h1>`),n.push(`<p>Chapter ${t}</p>`)}for(const e of a){const t=Re(e);t&&c.has(t)?n.push(`<h1>${t}</h1>`):n.push(`<p>${e}</p>`)}}else for(const e of r){const i=Re(e);i&&Pe(i,t)?n.push(`<h1>${i}</h1>`):n.push(`<p>${e}</p>`)}return n.join("")||`<h1>Title</h1><p>${e}</p>`})(e,i,r):e,"text/html");let o=Vi(n);0===o.length&&(o=_i(n));for(let e=0;e<o.length;e++){var s=document.createElement("kookitmarker"),a=document.createTextNode(" ");s.appendChild(a),o[e].parentNode&&o[e].parentNode.insertBefore(s,o[e])}const l=Xi(n.body.innerHTML),h={getCover:()=>""};return h.sections=l.map((e=>({id:e.index,load:()=>{return t=e.index,c(void 0,void 0,void 0,(function*(){return URL.createObjectURL(new Blob([l[t].text],{type:"text/html"}))}));var t},unload:()=>{e.index},size:l[e.index].text.length}))),h.toc=l.map((e=>({label:e.label,href:"title"+e.index}))).filter((e=>""!==e.label)),h.rendition={layout:"pre-paginated"},h.resolveHref=e=>({index:parseInt(e.substring(5,e.length))}),h.splitTOCHref=e=>[e,null],h.getTOCFragment=e=>e.documentElement,h},Vi=e=>Array.from(e.querySelectorAll("h1,h2,h3,h4,h5,h6,title")),Xi=e=>{let t=[],i=e.split("<kookitmarker> </kookitmarker>").filter((e=>""!==e.trim())),r=i.map((e=>Ji(e)||Gi(e)));return t=i.map(((e,t)=>({index:t,label:r[t],text:e,href:"title"+t}))),t},Ji=e=>{var t;const i=(new DOMParser).parseFromString(e,"text/html").querySelector("h1, h2, h3, h4, h5, h6");return i&&(null===(t=i.textContent)||void 0===t?void 0:t.trim())||""},Gi=e=>{var t;const i=(new DOMParser).parseFromString(e,"text/html").querySelector("title");return i&&(null===(t=i.textContent)||void 0===t?void 0:t.trim())||""},_i=e=>{let t=e.getElementsByTagName("*"),i=Array.from(t).filter((e=>1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&Pe(Re(e.textContent)))),r=[];for(let e=0;e<i.length;e++){const t=i[e],n=document.createElement("h1");n.innerHTML=t.innerText,t.parentNode.replaceChild(n,t),r.push(n)}return r};class Yi extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"TXT"})),this.txtBuffer=e,this.charset=t.charset,this.parserRegex=t.parserRegex}renderTo(e,t){return new Promise(((i,r)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse(t));let r=new T(this.book);this.chapterList=yield r.getChapter(this.book.toc),this.chapterDocList=yield r.getChapterDoc(),g(e);let n=this.getDocument();n&&(w(e,this.readerMode,n),i())}))))}parse(e){return c(this,void 0,void 0,(function*(){try{const t=new TextDecoder(this.charset),i=new Uint8Array(this.txtBuffer);let r=t.decode(i);this.book=zi(r,!0,this.parserRegex,e)}catch(e){throw console.error(e),e}}))}refreshContent(){return c(this,void 0,void 0,(function*(){yield this.parse({refresh:!0});let e=new T(this.book);return this.chapterList=yield e.getChapter(this.book.toc),this.chapterDocList=yield e.getChapterDoc(),this.chapterList}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse({refresh:!0})),yield jt(this.book)}))}getMetadata(e){return c(this,void 0,void 0,(function*(){try{const t=4096,i=e.byteLength,r=Math.min(i,t),o=new Uint8Array(e,0,r);const s=n.detect(o)||"utf8";return this.charset=s,{charset:s}}catch(e){return console.error("Error detecting charset:",e),this.charset="utf8",{charset:"utf8"}}}))}}const Zi=({entries:e,loadBlob:t,getSize:i},r,n)=>{const o=new Map,s=new Map,a=async(e,i)=>{if(o.has(e))return o.get(e);if(i){const r=URL.createObjectURL(await t(e)),n=URL.createObjectURL(await t(i)),a=URL.createObjectURL(new Blob([`<div style="width:100%; height:100%"><img src="${r}"></div><div style="width:100%; height:100%"><img src="${n}"></div>`],{type:"text/html"}));return s.set(e,[r,a]),o.set(e,a),a}{const i=URL.createObjectURL(await t(e)),r=URL.createObjectURL(new Blob([`<div style="width:100%; height:100%"><img src="${i}"></div>`],{type:"text/html"}));return s.set(e,[i,r]),o.set(e,r),r}},l=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"],c=e.map((e=>e.filename)).filter((e=>l.some((t=>e.endsWith(t))))).sort(((e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"}))),h={getCover:()=>t(c[0])};return h.metadata={title:r.name},h.sections=c.map(((e,t)=>({id:e,load:()=>{if("double"===n){const i=c[t+1];return a(e,i)}return a(e)},unload:()=>(e=>{s.get(e)?.forEach?.((e=>URL.revokeObjectURL(e))),s.delete(e),o.delete(e)})(e),size:i(e)}))).filter(((e,t)=>"double"!==n||t%2==0)),h.toc=c.map((e=>({label:e,href:e}))).filter(((e,t)=>"double"!==n||t%2==0)),h.rendition={layout:"pre-paginated"},h.resolveHref=e=>({index:h.sections.findIndex((t=>t.id===e))}),h.splitTOCHref=e=>[e,null],h.getTOCFragment=e=>e.documentElement,h};class Ki extends Ot{constructor(e,t){super(t),this.comicBuffer=e,this.readerMode=t.readerMode,this.format=t.format,this.chapterList=[],this.chapterDocList=[],this.book="",this.element="",this.rpc}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){if(this.element=e,g(e),!this.book)try{yield this.parse()}catch(e){console.error(e),i(e)}let r=new T(this.book);this.chapterList=yield r.getChapter(this.book.toc),this.chapterDocList=yield r.getChapterDoc();let n=this.getDocument();n&&(w(e,this.readerMode,n),t())}))))}parse(){return c(this,void 0,void 0,(function*(){try{let e=new Blob([this.comicBuffer]),t=new File([e],"book."+this.format.toLocaleLowerCase(),{lastModified:(new Date).getTime(),type:e.type});if("CBZ"===this.format){const e=yield this.makeZipLoader(t);this.book=Zi(e,t,this.readerMode)}else if("CBT"===this.format){const e=yield this.makeTarLoader();this.book=Zi(e,t,this.readerMode)}else if("CBR"===this.format){this.rpc=yield window.RPC.new("./lib/libunrar/worker.js",{loaded:function(){console.info("loaded")},progressShow:function(e,t,i){console.info(i)}}),yield new Promise((e=>setTimeout(e,200)));const e=yield this.makeRarLoader();this.book=Zi(e,t,this.readerMode)}else if("CB7"===this.format){const e=yield this.make7zLoader();this.book=Zi(e,t,this.readerMode)}}catch(e){throw console.error(e),e}}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}makeZipLoader(e){return c(this,void 0,void 0,(function*(){let t=yield i.loadAsync(e);const r=t.files;return{entries:Object.values(r).map((e=>({filename:e.name}))),loadText:e=>c(this,void 0,void 0,(function*(){let i=t.file(e);return i?i.async("string"):""})),loadBlob:e=>c(this,void 0,void 0,(function*(){let i=t.file(e);if(i){let e=yield i.async("arraybuffer");return new Blob([e])}return new Blob([new ArrayBuffer(0)])})),getSize:e=>{let i=t.file(e);if(i)return i._data.uncompressedSize||1}}}))}makeTarLoader(){return c(this,void 0,void 0,(function*(){const e=yield o(this.comicBuffer),t=new Map(e.map((e=>[e.name,e]))),i=e=>(i,...r)=>t.has(i)?e(t.get(i),...r):null,r=i((e=>e.readAsString())),n=i(((e,t)=>e.blob));return{entries:e.map((e=>({filename:e.name}))),loadText:r,loadBlob:n,getSize:e=>{var i,r;return null!==(r=null===(i=t.get(e))||void 0===i?void 0:i.size)&&void 0!==r?r:1}}}))}makeRarLoader(){return c(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{var i=[this.comicBuffer],r=[{name:"book.rar",content:this.comicBuffer}];this.rpc.transferables=i,this.rpc.unrar(r,null,0).then((t=>{let i=this.getRarEntries(t.ls);const r=new Map(Object.values(i).map((e=>[e.fullFileName,e]))),n=e=>(t,...i)=>r.has(t)?e(r.get(t),...i):null,o=n((e=>e.fullFileName)),s=n(((e,t)=>new Blob([e.fileContent])));e({entries:Object.values(i).map((e=>({filename:e.fullFileName}))),loadText:o,loadBlob:s,getSize:e=>{var t,i;return null!==(i=null===(t=r.get(e))||void 0===t?void 0:t.fileSize)&&void 0!==i?i:1}})})).catch((e=>{console.error(e),t(e)}))}))}))}make7zLoader(){return c(this,void 0,void 0,(function*(){const e="./lib/7z-wasm/7zz.wasm";if(!window.wasmBinary){const t=yield fetch(e,{credentials:"same-origin"});if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";window.wasmBinary=yield t.arrayBuffer()}const t=yield window.SevenZip({wasmBinary:window.wasmBinary}),i=new Uint8Array(this.comicBuffer),r="archive.cb7",n=t.FS.open(r,"w+");t.FS.write(n,i,0,i.length),t.FS.close(n),t.callMain(["x",r]);const o=t.FS,s=this.get7zEntries(o.lookupPath("/").node),a=new Map(s.map((e=>[e.name,e]))),l=e=>(t,...i)=>a.has(t)?e(a.get(t),...i):null,c=l((e=>e.name)),h=l(((e,t)=>new Blob([e.buffer])));return{entries:s.map((e=>({filename:e.name}))),loadText:c,loadBlob:h,getSize:e=>{var t,i;return null!==(i=null===(t=a.get(e))||void 0===t?void 0:t.size)&&void 0!==i?i:1}}}))}getRarEntries(e){const t=Object.keys(e);let i=[];for(let r=0;r<t.length;r++){const n=t[r];"dir"===e[n].type?i=i.concat(this.getRarEntries(e[n].ls)):i.push({fullFileName:n,fileContent:e[n].fileContent,fileSize:e[n].fileSize})}return i}get7zEntries(e){const t=e.contents,i=Object.keys(t).filter((e=>"archive.cb7"!=e&&"dev"!=e&&"home"!=e&&"proc"!=e&&"tmp"!=e));let r=[];for(let e=0;e<i.length;e++){const n=i[e];t[n].isFolder?r=r.concat(this.get7zEntries(t[n])):r.push({name:n,buffer:t[n].contents,size:t[n].usedBytes})}return r}getMetadata(){return c(this,void 0,void 0,(function*(){return new Promise(((e,t)=>c(this,void 0,void 0,(function*(){try{this.book||(yield this.parse());const t=yield this.book.getCover();var i=new FileReader;i.readAsDataURL(t),i.onloadend=()=>{e({cover:i.result})}}catch(e){console.error(e),t(e)}}))))}))}}const Qi=e=>e?.trim()?.replace(/\s{2,}/g," "),er=e=>Qi(e?.textContent),tr={XLINK:"http://www.w3.org/1999/xlink",EPUB:"http://www.idpf.org/2007/ops"},ir="application/xml",rr="application/xhtml+xml",nr={strong:["strong","self"],emphasis:["em","self"],style:["span","self"],a:"anchor",strikethrough:["s","self"],sub:["sub","self"],sup:["sup","self"],code:["code","self"],image:"image"},or={epigraph:["blockquote"],subtitle:["h2",nr],"text-author":["p",nr],date:["p",nr],stanza:"stanza"},sr={title:["header",{p:["h1",nr],"empty-line":["br"]}],epigraph:["blockquote","self"],image:"image",annotation:["aside"],section:["section","self"],p:["p",nr],poem:["blockquote",or],subtitle:["h2",nr],cite:["blockquote","self"],"empty-line":["br"],table:["table",{tr:["tr",["align"]],th:["th",["colspan","rowspan","align","valign"]],td:["td",["colspan","rowspan","align","valign"]]}],"text-author":["p",nr]};or.epigraph.push(sr);const ar={image:"image",title:["section",{p:["h1",nr],"empty-line":["br"]}],epigraph:["section",sr],section:["section",sr]},lr=e=>{const t=e.getAttributeNS(tr.XLINK,"href"),[,i]=t.split("#"),r=e.getRootNode().getElementById(i);return r?`data:${r.getAttribute("content-type")};base64,${r.textContent}`:t};class cr{constructor(e){this.fb2=e,this.doc=document.implementation.createDocument(tr.XHTML,"html")}image(e){const t=this.doc.createElement("img");return t.alt=e.getAttribute("alt"),t.title=e.getAttribute("title"),t.setAttribute("src",lr(e)),t}anchor(e){const t=this.convert(e,{a:["a",nr]});return t.setAttribute("href",e.getAttributeNS(tr.XLINK,"href")),"note"===e.getAttribute("type")&&t.setAttributeNS(tr.EPUB,"epub:type","noteref"),t}stanza(e){const t=this.convert(e,{stanza:["p",{title:["header",{p:["strong",nr],"empty-line":["br"]}],subtitle:["p",nr]}]});for(const i of e.children)"v"===i.nodeName&&(t.append(this.doc.createTextNode(i.textContent)),t.append(this.doc.createElement("br")));return t}convert(e,t){if(3===e.nodeType)return this.doc.createTextNode(e.textContent);if(4===e.nodeType)return this.doc.createCDATASection(e.textContent);if(8===e.nodeType)return this.doc.createComment(e.textContent);const i=t?.[e.nodeName];if(!i)return null;if("string"==typeof i)return this[i](e);const[r,n]=i,o=this.doc.createElement(r);if(e.id&&(o.id=e.id),o.classList.add(e.nodeName),Array.isArray(n))for(const t of n)o.setAttribute(t,e.getAttribute(t));const s="self"===n?t:Array.isArray(n)?null:n;let a=e.firstChild;for(;a;){const e=this.convert(a,s);e&&o.append(e),a=a.nextSibling}return o}}const hr=URL.createObjectURL(new Blob(['\n@namespace epub "http://www.idpf.org/2007/ops";\nbody > img, section > img {\n    display: block;\n    margin: auto;\n}\n.title {\n    text-align: center;\n}\nbody > section > .title, body.notesBodyType > .title {\n    margin: 3em 0;\n}\nbody.notesBodyType > section .title {\n    text-align: left;\n    margin: 1em 0;\n}\np {\n    text-indent: 1em;\n    margin: 0;\n}\n:not(p) + p, p:first-child {\n    text-indent: 0;\n}\n.poem p {\n    text-indent: 0;\n    margin: 1em 0;\n}\n.text-author, .date {\n    text-align: end;\n}\n.text-author:before {\n    content: "—";\n}\ntable {\n    border-collapse: collapse;\n}\ntd, th {\n    padding: .25em;\n}\na[epub|type~="noteref"] {\n    font-size: .75em;\n    vertical-align: super;\n}\nbody:not(.notesBodyType) > .title, body:not(.notesBodyType) > .epigraph {\n    margin: 3em 0;\n}\n'],{type:"text/css"})),dr="data-foliate-id",ur=async e=>{const t={},i=await(async e=>{const t=await e.arrayBuffer(),i=new TextDecoder("utf-8").decode(t),r=new DOMParser,n=r.parseFromString(i,ir),o=n.xmlEncoding||i.match(/^<\?xml\s+version\s*=\s*["']1.\d+"\s+encoding\s*=\s*["']([A-Za-z0-9._-]*)["']/)?.[1];if(o&&"utf-8"!==o.toLowerCase()){const e=new TextDecoder(o).decode(t);return r.parseFromString(e,ir)}return n})(e),r=new cr(i),n=e=>i.querySelector(e),o=e=>[...i.querySelectorAll(e)],s=e=>{const t=er(e.querySelector("nickname"));if(t)return t;const i=er(e.querySelector("first-name")),r=er(e.querySelector("middle-name")),n=er(e.querySelector("last-name"));return{name:[i,r,n].filter((e=>e)).join(" "),sortAs:n?[n,[i,r].filter((e=>e)).join(" ")].join(", "):null}},a=e=>e?.getAttribute("value")??er(e),l=n("title-info annotation");t.metadata={title:er(n("title-info book-title")),identifier:er(n("document-info id")),language:er(n("title-info lang")),author:o("title-info author").map(s),translator:o("title-info translator").map(s),producer:o("document-info author").map(s).concat(o("document-info program-used").map(er)),publisher:er(n("publish-info publisher")),published:a(n("title-info date")),modified:a(n("document-info date")),description:l?r.convert(l,{annotation:["div",sr]}).innerHTML:null,subject:o("title-info genre").map(er)},t.getCover=()=>fetch(lr(n("coverpage image"))).then((e=>e.blob()));const c=Array.from(i.querySelectorAll("body"),(e=>{const t=r.convert(e,{body:["body",ar]});return[Array.from(t.children,(e=>{const t=[e,...e.querySelectorAll("[id]")].map((e=>e.id));return{el:e,ids:t}})),t]})),h=c[0][0].map((({el:e,ids:t})=>({ids:t,titles:Array.from(e.querySelectorAll(":scope > section > .title"),((e,t)=>(e.setAttribute(dr,t),{title:er(e),index:t}))),el:e}))).concat(c.slice(1).map((([e,t])=>{const i=e.map((e=>e.ids)).flat();return t.classList.add("notesBodyType"),{ids:i,el:t,linear:"no"}}))).map((({ids:e,titles:t,el:i,linear:r})=>{const n=(o=i.outerHTML,`<?xml version="1.0" encoding="utf-8"?>\n<html xmlns="http://www.w3.org/1999/xhtml">\n    <head><link href="${hr}" rel="stylesheet" type="text/css"/></head>\n    <body>${o}</body>\n</html>`);var o;const s=new Blob([n],{type:rr}),a=URL.createObjectURL(s);return{ids:e,title:Qi(i.querySelector(".title, .subtitle, p")?.textContent??(i.classList.contains("title")?i.textContent:"")),titles:t,load:()=>a,createDocument:()=>(new DOMParser).parseFromString(n,rr),size:s.size-Array.from(i.querySelectorAll("[src]"),(e=>e.getAttribute("src")?.length??0)).reduce(((e,t)=>e+t),0),linear:r}})),d=new Map;return t.sections=h.map(((e,t)=>{const{ids:i,load:r,createDocument:n,size:o,linear:s}=e;for(const e of i)e&&d.set(e,t);return{id:t,load:r,createDocument:n,size:o,linear:s}})),t.toc=h.map((({title:e,titles:t},i)=>{const r=i.toString();return{label:e,href:r,subitems:t?.length?t.map((({title:e,index:t})=>({label:e,href:`${r}#${t}`}))):null}})).filter((e=>e)),t.resolveHref=e=>{const[t,i]=e.split("#");return t?{index:Number(t),anchor:e=>e.querySelector(`[${dr}="${i}"]`)}:{index:d.get(i),anchor:e=>e.getElementById(i)}},t.splitTOCHref=e=>e?.split("#")?.map((e=>Number(e)))??[],t.getTOCFragment=(e,t)=>e.querySelector(`[${dr}="${t}"]`),t};class fr extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"FB2"})),this.fb2Buffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}parse(){return c(this,void 0,void 0,(function*(){try{let e=new Blob([this.fb2Buffer]);this.book=yield ur(e)}catch(e){throw console.error(e),e}}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}getMetadata(){return c(this,void 0,void 0,(function*(){try{this.book||(yield this.parse());let e=new T(this.book);return yield e.getMetadata()}catch(e){throw console.error(e),e}}))}}class pr extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"CACHE"})),this.cacheBuffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book=yield Ht(this.cacheBuffer);let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}}class gr extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"DOCX"})),this.docxBuffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}parse(){return c(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{s.convertToHtml({arrayBuffer:this.docxBuffer}).then((t=>c(this,void 0,void 0,(function*(){this.book=zi(t.value,!1),e()}))))}catch(e){console.error(e),t(e)}}))}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}}class mr extends Ot{constructor(e,t){super(Object.assign(Object.assign({},t),{format:"MD"})),this.mdBuffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}parse(){return c(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{var i=new Blob([this.mdBuffer],{type:"text/plain"}),r=new FileReader;r.onload=t=>c(this,void 0,void 0,(function*(){var i;let r=yield a(null===(i=t.target)||void 0===i?void 0:i.result);this.book=zi(r,!1),e()})),r.readAsText(i,"UTF-8")}catch(e){console.error(e),t(e)}}))}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}}class yr extends Ot{constructor(e,t){super(t),this.htmlBuffer=e}renderTo(e){return new Promise(((t,i)=>c(this,void 0,void 0,(function*(){this.element=e,this.book||(yield this.parse());let i=new T(this.book);this.chapterList=yield i.getChapter(this.book.toc),this.chapterDocList=yield i.getChapterDoc(),g(e);let r=this.getDocument();r&&(w(e,this.readerMode,r),t())}))))}parse(){return c(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{var i=new Blob([this.htmlBuffer],{type:Bt[this.format.toLocaleLowerCase()]}),r=new FileReader;r.onload=t=>c(this,void 0,void 0,(function*(){var i;let r=null===(i=t.target)||void 0===i?void 0:i.result;"MHTML"===this.format&&(r=l.convert(r).window.document.documentElement.innerHTML),this.book=zi(r,!1),e()})),r.readAsText(i,"UTF-8")}catch(e){console.error(e),t(e)}}))}))}preCache(){return c(this,void 0,void 0,(function*(){return this.book||(yield this.parse()),yield jt(this.book)}))}}export{pr as CacheRender,Ki as ComicRender,gr as DocxRender,Wt as EpubRender,fr as Fb2Render,yr as HtmlRender,mr as MdRender,Ai as MobiRender,Ui as PdfRender,qi as PdfTextRender,Yi as TxtRender};
